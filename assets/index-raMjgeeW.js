(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Sm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uy={exports:{}},Rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function TN(){if(jb)return Rc;jb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:o}}return Rc.Fragment=e,Rc.jsx=t,Rc.jsxs=t,Rc}var Bb;function bN(){return Bb||(Bb=1,uy.exports=TN()),uy.exports}var w=bN(),cy={exports:{}},Ac={},hy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function wN(){return zb||(zb=1,function(n){function e(ne,fe){var ge=ne.length;ne.push(fe);e:for(;0<ge;){var qe=ge-1>>>1,j=ne[qe];if(0<a(j,fe))ne[qe]=fe,ne[ge]=j,ge=qe;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var fe=ne[0],ge=ne.pop();if(ge!==fe){ne[0]=ge;e:for(var qe=0,j=ne.length,oe=j>>>1;qe<oe;){var de=2*(qe+1)-1,he=ne[de],be=de+1,Me=ne[be];if(0>a(he,ge))be<j&&0>a(Me,he)?(ne[qe]=Me,ne[be]=ge,qe=be):(ne[qe]=he,ne[de]=ge,qe=de);else if(be<j&&0>a(Me,ge))ne[qe]=Me,ne[be]=ge,qe=be;else break e}}return fe}function a(ne,fe){var ge=ne.sortIndex-fe.sortIndex;return ge!==0?ge:ne.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],p=[],y=1,v=null,T=3,S=!1,C=!1,M=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function K(ne){for(var fe=t(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=ne)r(p),fe.sortIndex=fe.expirationTime,e(f,fe);else break;fe=t(p)}}function P(ne){if(M=!1,K(ne),!C)if(t(f)!==null)C=!0,ie||(ie=!0,G());else{var fe=t(p);fe!==null&&je(P,fe.startTime-ne)}}var ie=!1,O=-1,I=5,N=-1;function U(){return D?!0:!(n.unstable_now()-N<I)}function z(){if(D=!1,ie){var ne=n.unstable_now();N=ne;var fe=!0;try{e:{C=!1,M&&(M=!1,B(O),O=-1),S=!0;var ge=T;try{t:{for(K(ne),v=t(f);v!==null&&!(v.expirationTime>ne&&U());){var qe=v.callback;if(typeof qe=="function"){v.callback=null,T=v.priorityLevel;var j=qe(v.expirationTime<=ne);if(ne=n.unstable_now(),typeof j=="function"){v.callback=j,K(ne),fe=!0;break t}v===t(f)&&r(f),K(ne)}else r(f);v=t(f)}if(v!==null)fe=!0;else{var oe=t(p);oe!==null&&je(P,oe.startTime-ne),fe=!1}}break e}finally{v=null,T=ge,S=!1}fe=void 0}}finally{fe?G():ie=!1}}}var G;if(typeof k=="function")G=function(){k(z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Tt=V.port2;V.port1.onmessage=z,G=function(){Tt.postMessage(null)}}else G=function(){F(z,0)};function je(ne,fe){O=F(function(){ne(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var fe=3;break;default:fe=T}var ge=T;T=fe;try{return ne()}finally{T=ge}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ge=T;T=ne;try{return fe()}finally{T=ge}},n.unstable_scheduleCallback=function(ne,fe,ge){var qe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?qe+ge:qe):ge=qe,ne){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ge+j,ne={id:y++,callback:fe,priorityLevel:ne,startTime:ge,expirationTime:j,sortIndex:-1},ge>qe?(ne.sortIndex=ge,e(p,ne),t(f)===null&&ne===t(p)&&(M?(B(O),O=-1):M=!0,je(P,ge-qe))):(ne.sortIndex=j,e(f,ne),C||S||(C=!0,ie||(ie=!0,G()))),ne},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(ne){var fe=T;return function(){var ge=T;T=fe;try{return ne.apply(this,arguments)}finally{T=ge}}}}(fy)),fy}var Fb;function SN(){return Fb||(Fb=1,hy.exports=wN()),hy.exports}var dy={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function RN(){if(qb)return Ke;qb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function D(j,oe,de){this.props=j,this.context=oe,this.refs=M,this.updater=de||S}D.prototype.isReactComponent={},D.prototype.setState=function(j,oe){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,oe,"setState")},D.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function F(){}F.prototype=D.prototype;function B(j,oe,de){this.props=j,this.context=oe,this.refs=M,this.updater=de||S}var k=B.prototype=new F;k.constructor=B,C(k,D.prototype),k.isPureReactComponent=!0;var K=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},ie=Object.prototype.hasOwnProperty;function O(j,oe,de,he,be,Me){return de=Me.ref,{$$typeof:n,type:j,key:oe,ref:de!==void 0?de:null,props:Me}}function I(j,oe){return O(j.type,oe,void 0,void 0,void 0,j.props)}function N(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function U(j){var oe={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(de){return oe[de]})}var z=/\/+/g;function G(j,oe){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):oe.toString(36)}function V(){}function Tt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(V,V):(j.status="pending",j.then(function(oe){j.status==="pending"&&(j.status="fulfilled",j.value=oe)},function(oe){j.status==="pending"&&(j.status="rejected",j.reason=oe)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function je(j,oe,de,he,be){var Me=typeof j;(Me==="undefined"||Me==="boolean")&&(j=null);var ke=!1;if(j===null)ke=!0;else switch(Me){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(j.$$typeof){case n:case e:ke=!0;break;case y:return ke=j._init,je(ke(j._payload),oe,de,he,be)}}if(ke)return be=be(j),ke=he===""?"."+G(j,0):he,K(be)?(de="",ke!=null&&(de=ke.replace(z,"$&/")+"/"),je(be,oe,de,"",function(ft){return ft})):be!=null&&(N(be)&&(be=I(be,de+(be.key==null||j&&j.key===be.key?"":(""+be.key).replace(z,"$&/")+"/")+ke)),oe.push(be)),1;ke=0;var kt=he===""?".":he+":";if(K(j))for(var ht=0;ht<j.length;ht++)he=j[ht],Me=kt+G(he,ht),ke+=je(he,oe,de,Me,be);else if(ht=T(j),typeof ht=="function")for(j=ht.call(j),ht=0;!(he=j.next()).done;)he=he.value,Me=kt+G(he,ht++),ke+=je(he,oe,de,Me,be);else if(Me==="object"){if(typeof j.then=="function")return je(Tt(j),oe,de,he,be);throw oe=String(j),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ne(j,oe,de){if(j==null)return j;var he=[],be=0;return je(j,he,"","",function(Me){return oe.call(de,Me,be++)}),he}function fe(j){if(j._status===-1){var oe=j._result;oe=oe(),oe.then(function(de){(j._status===0||j._status===-1)&&(j._status=1,j._result=de)},function(de){(j._status===0||j._status===-1)&&(j._status=2,j._result=de)}),j._status===-1&&(j._status=0,j._result=oe)}if(j._status===1)return j._result.default;throw j._result}var ge=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function qe(){}return Ke.Children={map:ne,forEach:function(j,oe,de){ne(j,function(){oe.apply(this,arguments)},de)},count:function(j){var oe=0;return ne(j,function(){oe++}),oe},toArray:function(j){return ne(j,function(oe){return oe})||[]},only:function(j){if(!N(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ke.Component=D,Ke.Fragment=t,Ke.Profiler=a,Ke.PureComponent=B,Ke.StrictMode=r,Ke.Suspense=f,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(j){return P.H.useMemoCache(j)}},Ke.cache=function(j){return function(){return j.apply(null,arguments)}},Ke.cloneElement=function(j,oe,de){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var he=C({},j.props),be=j.key,Me=void 0;if(oe!=null)for(ke in oe.ref!==void 0&&(Me=void 0),oe.key!==void 0&&(be=""+oe.key),oe)!ie.call(oe,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&oe.ref===void 0||(he[ke]=oe[ke]);var ke=arguments.length-2;if(ke===1)he.children=de;else if(1<ke){for(var kt=Array(ke),ht=0;ht<ke;ht++)kt[ht]=arguments[ht+2];he.children=kt}return O(j.type,be,void 0,void 0,Me,he)},Ke.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Ke.createElement=function(j,oe,de){var he,be={},Me=null;if(oe!=null)for(he in oe.key!==void 0&&(Me=""+oe.key),oe)ie.call(oe,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(be[he]=oe[he]);var ke=arguments.length-2;if(ke===1)be.children=de;else if(1<ke){for(var kt=Array(ke),ht=0;ht<ke;ht++)kt[ht]=arguments[ht+2];be.children=kt}if(j&&j.defaultProps)for(he in ke=j.defaultProps,ke)be[he]===void 0&&(be[he]=ke[he]);return O(j,Me,void 0,void 0,null,be)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(j){return{$$typeof:h,render:j}},Ke.isValidElement=N,Ke.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:fe}},Ke.memo=function(j,oe){return{$$typeof:p,type:j,compare:oe===void 0?null:oe}},Ke.startTransition=function(j){var oe=P.T,de={};P.T=de;try{var he=j(),be=P.S;be!==null&&be(de,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(qe,ge)}catch(Me){ge(Me)}finally{P.T=oe}},Ke.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ke.use=function(j){return P.H.use(j)},Ke.useActionState=function(j,oe,de){return P.H.useActionState(j,oe,de)},Ke.useCallback=function(j,oe){return P.H.useCallback(j,oe)},Ke.useContext=function(j){return P.H.useContext(j)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(j,oe){return P.H.useDeferredValue(j,oe)},Ke.useEffect=function(j,oe,de){var he=P.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(j,oe)},Ke.useId=function(){return P.H.useId()},Ke.useImperativeHandle=function(j,oe,de){return P.H.useImperativeHandle(j,oe,de)},Ke.useInsertionEffect=function(j,oe){return P.H.useInsertionEffect(j,oe)},Ke.useLayoutEffect=function(j,oe){return P.H.useLayoutEffect(j,oe)},Ke.useMemo=function(j,oe){return P.H.useMemo(j,oe)},Ke.useOptimistic=function(j,oe){return P.H.useOptimistic(j,oe)},Ke.useReducer=function(j,oe,de){return P.H.useReducer(j,oe,de)},Ke.useRef=function(j){return P.H.useRef(j)},Ke.useState=function(j){return P.H.useState(j)},Ke.useSyncExternalStore=function(j,oe,de){return P.H.useSyncExternalStore(j,oe,de)},Ke.useTransition=function(){return P.H.useTransition()},Ke.version="19.1.0",Ke}var Hb;function q_(){return Hb||(Hb=1,dy.exports=RN()),dy.exports}var my={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function AN(){if(Gb)return Mn;Gb=1;var n=q_();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mn.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,y)},Mn.flushSync=function(f){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=p,r.p=y,r.d.f()}},Mn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},Mn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Mn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:S}):y==="script"&&r.d.X(f,{crossOrigin:v,integrity:T,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},Mn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);r.d.L(f,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mn.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},Mn.requestFormReset=function(f){r.d.r(f)},Mn.unstable_batchedUpdates=function(f,p){return f(p)},Mn.useFormState=function(f,p,y){return u.H.useFormState(f,p,y)},Mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Mn.version="19.1.0",Mn}var $b;function YR(){if($b)return my.exports;$b=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),my.exports=AN(),my.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function IN(){if(Kb)return Ac;Kb=1;var n=SN(),e=q_(),t=YR();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function f(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(r(188));return s!==i?null:i}for(var l=i,c=s;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return h(m),i;if(g===c)return h(m),s;g=g.sibling}throw Error(r(188))}if(l.return!==c.return)l=m,c=g;else{for(var b=!1,A=m.child;A;){if(A===l){b=!0,l=m,c=g;break}if(A===c){b=!0,c=m,l=g;break}A=A.sibling}if(!b){for(A=g.child;A;){if(A===l){b=!0,l=g,c=m;break}if(A===c){b=!0,c=g,l=m;break}A=A.sibling}if(!b)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),k=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function Tt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case D:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case ie:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case k:return(i.displayName||"Context")+".Provider";case B:return(i._context.displayName||"Context")+".Consumer";case K:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return s=i.displayName||null,s!==null?s:Tt(i.type)||"Memo";case I:s=i._payload,i=i._init;try{return Tt(i(s))}catch{}}return null}var je=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},qe=[],j=-1;function oe(i){return{current:i}}function de(i){0>j||(i.current=qe[j],qe[j]=null,j--)}function he(i,s){j++,qe[j]=i.current,i.current=s}var be=oe(null),Me=oe(null),ke=oe(null),kt=oe(null);function ht(i,s){switch(he(ke,s),he(Me,i),he(be,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?fb(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=fb(s),i=mb(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}de(be),he(be,i)}function ft(){de(be),de(Me),de(ke)}function Ft(i){i.memoizedState!==null&&he(kt,i);var s=be.current,l=mb(s,i.type);s!==l&&(he(Me,i),he(be,l))}function Sn(i){Me.current===i&&(de(be),de(Me)),kt.current===i&&(de(kt),Ec._currentValue=ge)}var Nn=Object.prototype.hasOwnProperty,Qt=n.unstable_scheduleCallback,On=n.unstable_cancelCallback,dt=n.unstable_shouldYield,Sr=n.unstable_requestPaint,en=n.unstable_now,Ca=n.unstable_getCurrentPriorityLevel,Bi=n.unstable_ImmediatePriority,hi=n.unstable_UserBlockingPriority,Rn=n.unstable_NormalPriority,Xr=n.unstable_LowPriority,Wr=n.unstable_IdlePriority,Rr=n.log,zn=n.unstable_setDisableYieldValue,Se=null,Ye=null;function tn(i){if(typeof Rr=="function"&&zn(i),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Se,i)}catch{}}var gn=Math.clz32?Math.clz32:fi,ar=Math.log,Qo=Math.LN2;function fi(i){return i>>>=0,i===0?32:31-(ar(i)/Qo|0)|0}var di=256,zi=4194304;function Zn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Zr(i,s,l){var c=i.pendingLanes;if(c===0)return 0;var m=0,g=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var A=c&134217727;return A!==0?(c=A&~g,c!==0?m=Zn(c):(b&=A,b!==0?m=Zn(b):l||(l=A&~i,l!==0&&(m=Zn(l))))):(A=c&~g,A!==0?m=Zn(A):b!==0?m=Zn(b):l||(l=c&~i,l!==0&&(m=Zn(l)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,l=s&-s,g>=l||g===32&&(l&4194048)!==0)?s:m}function mi(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Fi(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Da(){var i=di;return di<<=1,(di&4194048)===0&&(di=256),i}function xs(){var i=zi;return zi<<=1,(zi&62914560)===0&&(zi=4194304),i}function Jr(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Ar(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pi(i,s,l,c,m,g){var b=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var A=i.entanglements,L=i.expirationTimes,Z=i.hiddenUpdates;for(l=b&~l;0<l;){var se=31-gn(l),ce=1<<se;A[se]=0,L[se]=-1;var J=Z[se];if(J!==null)for(Z[se]=null,se=0;se<J.length;se++){var ee=J[se];ee!==null&&(ee.lane&=-536870913)}l&=~ce}c!==0&&Fn(i,c,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~s))}function Fn(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-gn(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194090}function Na(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var c=31-gn(l),m=1<<c;m&s|i[c]&s&&(i[c]|=s),l&=~m}}function gi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function q(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Y(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:Pb(i.type))}function te(i,s){var l=fe.p;try{return fe.p=i,s()}finally{fe.p=l}}var le=Math.random().toString(36).slice(2),pe="__reactFiber$"+le,Te="__reactProps$"+le,Ae="__reactContainer$"+le,Ie="__reactEvents$"+le,Ce="__reactListeners$"+le,ve="__reactHandles$"+le,xe="__reactResources$"+le,Oe="__reactMarker$"+le;function Ge(i){delete i[pe],delete i[Te],delete i[Ie],delete i[Ce],delete i[ve]}function mt(i){var s=i[pe];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Ae]||l[pe]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=_b(i);i!==null;){if(l=i[pe])return l;i=_b(i)}return s}i=l,l=i.parentNode}return null}function Dt(i){if(i=i[pe]||i[Ae]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function gt(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Ze(i){var s=i[xe];return s||(s=i[xe]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function $e(i){i[Oe]=!0}var Ir=new Set,xr={};function Xt(i,s){nn(i,s),nn(i+"Capture",s)}function nn(i,s){for(xr[i]=s,i=0;i<s.length;i++)Ir.add(s[i])}var Cs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yi={},qn={};function qi(i){return Nn.call(qn,i)?!0:Nn.call(yi,i)?!1:Cs.test(i)?qn[i]=!0:(yi[i]=!0,!1)}function or(i,s,l){if(qi(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function tt(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function at(i,s,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+c)}}var Cr,_i;function _t(i){if(Cr===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Cr=s&&s[1]||"",_i=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cr+i+_i}var lr=!1;function Hi(i,s){if(!i||lr)return"";lr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ee){var J=ee}Reflect.construct(i,[],ce)}else{try{ce.call()}catch(ee){J=ee}i.call(ce.prototype)}}else{try{throw Error()}catch(ee){J=ee}(ce=i())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],A=g[1];if(b&&A){var L=b.split(`
`),Z=A.split(`
`);for(m=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;m<Z.length&&!Z[m].includes("DetermineComponentFrameRoot");)m++;if(c===L.length||m===Z.length)for(c=L.length-1,m=Z.length-1;1<=c&&0<=m&&L[c]!==Z[m];)m--;for(;1<=c&&0<=m;c--,m--)if(L[c]!==Z[m]){if(c!==1||m!==1)do if(c--,m--,0>m||L[c]!==Z[m]){var se=`
`+L[c].replace(" at new "," at ");return i.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",i.displayName)),se}while(1<=c&&0<=m);break}}}finally{lr=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?_t(l):""}function Oa(i){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Hi(i.type,!1);case 11:return Hi(i.type.render,!1);case 1:return Hi(i.type,!0);case 31:return _t("Activity");default:return""}}function Xo(i){try{var s="";do s+=Oa(i),i=i.return;while(i);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Hn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xu(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dp(i){var s=xu(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Wo(i){i._valueTracker||(i._valueTracker=dp(i))}function Cu(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return i&&(c=xu(i)?i.checked?"true":"false":i.value),i=c,i!==l?(s.setValue(i),!0):!1}function Pa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var mp=/[\n"\\]/g;function rn(i){return i.replace(mp,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ur(i,s,l,c,m,g,b,A){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),s!=null?b==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Hn(s)):i.value!==""+Hn(s)&&(i.value=""+Hn(s)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),s!=null?Ds(i,b,Hn(s)):l!=null?Ds(i,b,Hn(l)):c!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+Hn(A):i.removeAttribute("name")}function Ma(i,s,l,c,m,g,b,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;l=l!=null?""+Hn(l):"",s=s!=null?""+Hn(s):l,A||s===i.value||(i.value=s),i.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=A?i.checked:!!c,i.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function Ds(i,s,l){s==="number"&&Pa(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Gi(i,s,l,c){if(i=i.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=s.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&c&&(i[l].defaultSelected=!0)}else{for(l=""+Hn(l),s=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function At(i,s,l){if(s!=null&&(s=""+Hn(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+Hn(l):""}function ka(i,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(r(92));if(je(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Hn(s),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function Dr(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $h(i,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,l):typeof l!="number"||l===0||Va.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function Du(i,s,l){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&l[m]!==c&&$h(i,m,c)}else for(var g in s)s.hasOwnProperty(g)&&$h(i,g,s[g])}function Nu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zo(i){return gp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var $i=null;function Nr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ki=null,Yi=null;function Ou(i){var s=Dt(i);if(s&&(i=s.stateNode)){var l=i[Te]||null;e:switch(i=s.stateNode,s.type){case"input":if(ur(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+rn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==i&&c.form===i.form){var m=c[Te]||null;if(!m)throw Error(r(90));ur(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===i.form&&Cu(c)}break e;case"textarea":At(i,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Gi(i,!!l.multiple,s,!1)}}}var vi=!1;function Kh(i,s,l){if(vi)return i(s,l);vi=!0;try{var c=i(s);return c}finally{if(vi=!1,(Ki!==null||Yi!==null)&&(zf(),Ki&&(s=Ki,i=Yi,Yi=Ki=null,Ou(s),i)))for(s=0;s<i.length;s++)Ou(i[s])}}function La(i,s){var l=i.stateNode;if(l===null)return null;var c=l[Te]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(ei)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){Or=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{Or=!1}var Ei=null,Ns=null,Qi=null;function Pu(){if(Qi)return Qi;var i,s=Ns,l=s.length,c,m="value"in Ei?Ei.value:Ei.textContent,g=m.length;for(i=0;i<l&&s[i]===m[i];i++);var b=l-i;for(c=1;c<=b&&s[l-c]===m[g-c];c++);return Qi=m.slice(i,1<c?1-c:void 0)}function Ti(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function bi(){return!0}function Mu(){return!1}function yn(i){function s(l,c,m,g,b){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(l=i[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?bi:Mu,this.isPropagationStopped=Mu,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),s}var vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jo=yn(vt),ja=y({},vt,{view:0,detail:0}),Yh=yn(ja),el,tl,wi,Ba=y({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(el=i.screenX-wi.screenX,tl=i.screenY-wi.screenY):tl=el=0,wi=i),el)},movementY:function(i){return"movementY"in i?i.movementY:tl}}),Pr=yn(Ba),Qh=y({},Ba,{dataTransfer:0}),yp=yn(Qh),za=y({},ja,{relatedTarget:0}),nl=yn(za),ku=y({},vt,{animationName:0,elapsedTime:0,pseudoElement:0}),rl=yn(ku),Xh=y({},vt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),il=yn(Xh),_p=y({},vt,{data:0}),Vu=yn(_p),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Zh[i])?!!s[i]:!1}function qa(){return Lu}var Jh=y({},ja,{key:function(i){if(i.key){var s=Fa[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ti(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(i){return i.type==="keypress"?Ti(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ti(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),sl=yn(Jh),ef=y({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=yn(ef),Xi=y({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),tf=yn(Xi),nf=y({},vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),rf=yn(nf),sf=y({},Ba,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),al=yn(sf),Gn=y({},vt,{newState:0,oldState:0}),af=yn(Gn),of=[9,13,27,32],Si=ei&&"CompositionEvent"in window,d=null;ei&&"documentMode"in document&&(d=document.documentMode);var _=ei&&"TextEvent"in window&&!d,E=ei&&(!Si||d&&8<d&&11>=d),x=" ",Q=!1;function re(i,s){switch(i){case"keyup":return of.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ot=!1;function un(i,s){switch(i){case"compositionend":return ye(s);case"keypress":return s.which!==32?null:(Q=!0,x);case"textInput":return i=s.data,i===x&&Q?null:i;default:return null}}function lt(i,s){if(ot)return i==="compositionend"||!Si&&re(i,s)?(i=Pu(),Qi=Ns=Ei=null,ot=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_n[i.type]:s==="textarea"}function Wi(i,s,l,c){Ki?Yi?Yi.push(c):Yi=[c]:Ki=c,s=Kf(s,"onChange"),0<s.length&&(l=new Jo("onChange","change",null,l,c),i.push({event:l,listeners:s}))}var An=null,Ri=null;function ju(i){ob(i,0)}function lf(i){var s=gt(i);if(Cu(s))return i}function x0(i,s){if(i==="change")return s}var C0=!1;if(ei){var vp;if(ei){var Ep="oninput"in document;if(!Ep){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),Ep=typeof D0.oninput=="function"}vp=Ep}else vp=!1;C0=vp&&(!document.documentMode||9<document.documentMode)}function N0(){An&&(An.detachEvent("onpropertychange",O0),Ri=An=null)}function O0(i){if(i.propertyName==="value"&&lf(Ri)){var s=[];Wi(s,Ri,i,Nr(i)),Kh(ju,s)}}function WC(i,s,l){i==="focusin"?(N0(),An=s,Ri=l,An.attachEvent("onpropertychange",O0)):i==="focusout"&&N0()}function ZC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return lf(Ri)}function JC(i,s){if(i==="click")return lf(s)}function eD(i,s){if(i==="input"||i==="change")return lf(s)}function tD(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var cr=typeof Object.is=="function"?Object.is:tD;function Bu(i,s){if(cr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!Nn.call(s,m)||!cr(i[m],s[m]))return!1}return!0}function P0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function M0(i,s){var l=P0(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=s&&c>=s)return{node:l,offset:s-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=P0(l)}}function k0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?k0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function V0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Pa(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=Pa(i.document)}return s}function Tp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var nD=ei&&"documentMode"in document&&11>=document.documentMode,ol=null,bp=null,zu=null,wp=!1;function L0(i,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wp||ol==null||ol!==Pa(c)||(c=ol,"selectionStart"in c&&Tp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zu&&Bu(zu,c)||(zu=c,c=Kf(bp,"onSelect"),0<c.length&&(s=new Jo("onSelect","select",null,s,l),i.push({event:s,listeners:c}),s.target=ol)))}function Ha(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var ll={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},Sp={},U0={};ei&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Ga(i){if(Sp[i])return Sp[i];if(!ll[i])return i;var s=ll[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in U0)return Sp[i]=s[l];return i}var j0=Ga("animationend"),B0=Ga("animationiteration"),z0=Ga("animationstart"),rD=Ga("transitionrun"),iD=Ga("transitionstart"),sD=Ga("transitioncancel"),F0=Ga("transitionend"),q0=new Map,Rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rp.push("scrollEnd");function ti(i,s){q0.set(i,s),Xt(s,[i])}var H0=new WeakMap;function Mr(i,s){if(typeof i=="object"&&i!==null){var l=H0.get(i);return l!==void 0?l:(s={value:i,source:s,stack:Xo(s)},H0.set(i,s),s)}return{value:i,source:s,stack:Xo(s)}}var kr=[],ul=0,Ap=0;function uf(){for(var i=ul,s=Ap=ul=0;s<i;){var l=kr[s];kr[s++]=null;var c=kr[s];kr[s++]=null;var m=kr[s];kr[s++]=null;var g=kr[s];if(kr[s++]=null,c!==null&&m!==null){var b=c.pending;b===null?m.next=m:(m.next=b.next,b.next=m),c.pending=m}g!==0&&G0(l,m,g)}}function cf(i,s,l,c){kr[ul++]=i,kr[ul++]=s,kr[ul++]=l,kr[ul++]=c,Ap|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Ip(i,s,l,c){return cf(i,s,l,c),hf(i)}function cl(i,s){return cf(i,null,null,s),hf(i)}function G0(i,s,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var m=!1,g=i.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&s!==null&&(m=31-gn(l),i=g.hiddenUpdates,c=i[m],c===null?i[m]=[s]:c.push(s),s.lane=l|536870912),g):null}function hf(i){if(50<fc)throw fc=0,Pg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var hl={};function aD(i,s,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(i,s,l,c){return new aD(i,s,l,c)}function xp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,s){var l=i.alternate;return l===null?(l=hr(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function $0(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ff(i,s,l,c,m,g){var b=0;if(c=i,typeof i=="function")xp(i)&&(b=1);else if(typeof i=="string")b=lN(i,l,be.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=hr(31,l,s,m),i.elementType=N,i.lanes=g,i;case C:return $a(l.children,m,g,s);case M:b=8,m|=24;break;case D:return i=hr(12,l,s,m|2),i.elementType=D,i.lanes=g,i;case P:return i=hr(13,l,s,m),i.elementType=P,i.lanes=g,i;case ie:return i=hr(19,l,s,m),i.elementType=ie,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:case k:b=10;break e;case B:b=9;break e;case K:b=11;break e;case O:b=14;break e;case I:b=16,c=null;break e}b=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return s=hr(b,l,s,m),s.elementType=i,s.type=c,s.lanes=g,s}function $a(i,s,l,c){return i=hr(7,i,c,s),i.lanes=l,i}function Cp(i,s,l){return i=hr(6,i,null,s),i.lanes=l,i}function Dp(i,s,l){return s=hr(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var fl=[],dl=0,df=null,mf=0,Vr=[],Lr=0,Ka=null,Ji=1,es="";function Ya(i,s){fl[dl++]=mf,fl[dl++]=df,df=i,mf=s}function K0(i,s,l){Vr[Lr++]=Ji,Vr[Lr++]=es,Vr[Lr++]=Ka,Ka=i;var c=Ji;i=es;var m=32-gn(c)-1;c&=~(1<<m),l+=1;var g=32-gn(s)+m;if(30<g){var b=m-m%5;g=(c&(1<<b)-1).toString(32),c>>=b,m-=b,Ji=1<<32-gn(s)+m|l<<m|c,es=g+i}else Ji=1<<g|l<<m|c,es=i}function Np(i){i.return!==null&&(Ya(i,1),K0(i,1,0))}function Op(i){for(;i===df;)df=fl[--dl],fl[dl]=null,mf=fl[--dl],fl[dl]=null;for(;i===Ka;)Ka=Vr[--Lr],Vr[Lr]=null,es=Vr[--Lr],Vr[Lr]=null,Ji=Vr[--Lr],Vr[Lr]=null}var $n=null,qt=null,yt=!1,Qa=null,Ai=!1,Pp=Error(r(519));function Xa(i){var s=Error(r(418,""));throw Hu(Mr(s,i)),Pp}function Y0(i){var s=i.stateNode,l=i.type,c=i.memoizedProps;switch(s[pe]=i,s[Te]=c,l){case"dialog":rt("cancel",s),rt("close",s);break;case"iframe":case"object":case"embed":rt("load",s);break;case"video":case"audio":for(l=0;l<mc.length;l++)rt(mc[l],s);break;case"source":rt("error",s);break;case"img":case"image":case"link":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"input":rt("invalid",s),Ma(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Wo(s);break;case"select":rt("invalid",s);break;case"textarea":rt("invalid",s),ka(s,c.value,c.defaultValue,c.children),Wo(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||hb(s.textContent,l)?(c.popover!=null&&(rt("beforetoggle",s),rt("toggle",s)),c.onScroll!=null&&rt("scroll",s),c.onScrollEnd!=null&&rt("scrollend",s),c.onClick!=null&&(s.onclick=Yf),s=!0):s=!1,s||Xa(i)}function Q0(i){for($n=i.return;$n;)switch($n.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:$n=$n.return}}function Fu(i){if(i!==$n)return!1;if(!yt)return Q0(i),yt=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Qg(i.type,i.memoizedProps)),l=!l),l&&qt&&Xa(i),Q0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(s===0){qt=ri(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;i=i.nextSibling}qt=null}}else s===27?(s=qt,Ks(i.type)?(i=Jg,Jg=null,qt=i):qt=s):qt=$n?ri(i.stateNode.nextSibling):null;return!0}function qu(){qt=$n=null,yt=!1}function X0(){var i=Qa;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),Qa=null),i}function Hu(i){Qa===null?Qa=[i]:Qa.push(i)}var Mp=oe(null),Wa=null,ts=null;function Os(i,s,l){he(Mp,s._currentValue),s._currentValue=l}function ns(i){i._currentValue=Mp.current,de(Mp)}function kp(i,s,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===l)break;i=i.return}}function Vp(i,s,l,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var b=m.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=m;for(var L=0;L<s.length;L++)if(A.context===s[L]){g.lanes|=l,A=g.alternate,A!==null&&(A.lanes|=l),kp(g.return,l,i),c||(b=null);break e}g=A.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(r(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),kp(b,l,i),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===i){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function Gu(i,s,l,c){i=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var A=m.type;cr(m.pendingProps.value,b.value)||(i!==null?i.push(A):i=[A])}}else if(m===kt.current){if(b=m.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Ec):i=[Ec])}m=m.return}i!==null&&Vp(s,i,l,c),s.flags|=262144}function pf(i){for(i=i.firstContext;i!==null;){if(!cr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Za(i){Wa=i,ts=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Pn(i){return W0(Wa,i)}function gf(i,s){return Wa===null&&Za(i),W0(i,s)}function W0(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},ts===null){if(i===null)throw Error(r(308));ts=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ts=ts.next=s;return l}var oD=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},lD=n.unstable_scheduleCallback,uD=n.unstable_NormalPriority,hn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lp(){return{controller:new oD,data:new Map,refCount:0}}function $u(i){i.refCount--,i.refCount===0&&lD(uD,function(){i.controller.abort()})}var Ku=null,Up=0,ml=0,pl=null;function cD(i,s){if(Ku===null){var l=Ku=[];Up=0,ml=Bg(),pl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Up++,s.then(Z0,Z0),s}function Z0(){if(--Up===0&&Ku!==null){pl!==null&&(pl.status="fulfilled");var i=Ku;Ku=null,ml=0,pl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function hD(i,s){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var J0=ne.S;ne.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&cD(i,s),J0!==null&&J0(i,s)};var Ja=oe(null);function jp(){var i=Ja.current;return i!==null?i:Ot.pooledCache}function yf(i,s){s===null?he(Ja,Ja.current):he(Ja,s.pool)}function eE(){var i=jp();return i===null?null:{parent:hn._currentValue,pool:i}}var Yu=Error(r(460)),tE=Error(r(474)),_f=Error(r(542)),Bp={then:function(){}};function nE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vf(){}function rE(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(vf,vf),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,sE(i),i;default:if(typeof s.status=="string")s.then(vf,vf);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,sE(i),i}throw Qu=s,Yu}}var Qu=null;function iE(){if(Qu===null)throw Error(r(459));var i=Qu;return Qu=null,i}function sE(i){if(i===Yu||i===_f)throw Error(r(483))}var Ps=!1;function zp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fp(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ms(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ks(i,s,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(bt&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=hf(i),G0(i,null,l),s}return cf(i,c,s,l),hf(i)}function Xu(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,l|=c,s.lanes=l,Na(i,l)}}function qp(i,s){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?m=g=s:g=g.next=s}else m=g=s;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Hp=!1;function Wu(){if(Hp){var i=pl;if(i!==null)throw i}}function Zu(i,s,l,c){Hp=!1;var m=i.updateQueue;Ps=!1;var g=m.firstBaseUpdate,b=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var L=A,Z=L.next;L.next=null,b===null?g=Z:b.next=Z,b=L;var se=i.alternate;se!==null&&(se=se.updateQueue,A=se.lastBaseUpdate,A!==b&&(A===null?se.firstBaseUpdate=Z:A.next=Z,se.lastBaseUpdate=L))}if(g!==null){var ce=m.baseState;b=0,se=Z=L=null,A=g;do{var J=A.lane&-536870913,ee=J!==A.lane;if(ee?(ut&J)===J:(c&J)===J){J!==0&&J===ml&&(Hp=!0),se!==null&&(se=se.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Be=i,Ve=A;J=s;var Ct=l;switch(Ve.tag){case 1:if(Be=Ve.payload,typeof Be=="function"){ce=Be.call(Ct,ce,J);break e}ce=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ve.payload,J=typeof Be=="function"?Be.call(Ct,ce,J):Be,J==null)break e;ce=y({},ce,J);break e;case 2:Ps=!0}}J=A.callback,J!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},se===null?(Z=se=ee,L=ce):se=se.next=ee,b|=J;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);se===null&&(L=ce),m.baseState=L,m.firstBaseUpdate=Z,m.lastBaseUpdate=se,g===null&&(m.shared.lanes=0),qs|=b,i.lanes=b,i.memoizedState=ce}}function aE(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function oE(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)aE(l[i],s)}var gl=oe(null),Ef=oe(0);function lE(i,s){i=us,he(Ef,i),he(gl,s),us=i|s.baseLanes}function Gp(){he(Ef,us),he(gl,gl.current)}function $p(){us=Ef.current,de(gl),de(Ef)}var Vs=0,Qe=null,It=null,sn=null,Tf=!1,yl=!1,eo=!1,bf=0,Ju=0,_l=null,fD=0;function Wt(){throw Error(r(321))}function Kp(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!cr(i[l],s[l]))return!1;return!0}function Yp(i,s,l,c,m,g){return Vs=g,Qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ne.H=i===null||i.memoizedState===null?GE:$E,eo=!1,g=l(c,m),eo=!1,yl&&(g=cE(s,l,c,m)),uE(i),g}function uE(i){ne.H=xf;var s=It!==null&&It.next!==null;if(Vs=0,sn=It=Qe=null,Tf=!1,Ju=0,_l=null,s)throw Error(r(300));i===null||vn||(i=i.dependencies,i!==null&&pf(i)&&(vn=!0))}function cE(i,s,l,c){Qe=i;var m=0;do{if(yl&&(_l=null),Ju=0,yl=!1,25<=m)throw Error(r(301));if(m+=1,sn=It=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ne.H=vD,g=s(l,c)}while(yl);return g}function dD(){var i=ne.H,s=i.useState()[0];return s=typeof s.then=="function"?ec(s):s,i=i.useState()[0],(It!==null?It.memoizedState:null)!==i&&(Qe.flags|=1024),s}function Qp(){var i=bf!==0;return bf=0,i}function Xp(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Wp(i){if(Tf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Tf=!1}Vs=0,sn=It=Qe=null,yl=!1,Ju=bf=0,_l=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Qe.memoizedState=sn=i:sn=sn.next=i,sn}function an(){if(It===null){var i=Qe.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var s=sn===null?Qe.memoizedState:sn.next;if(s!==null)sn=s,It=i;else{if(i===null)throw Qe.alternate===null?Error(r(467)):Error(r(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},sn===null?Qe.memoizedState=sn=i:sn=sn.next=i}return sn}function Zp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(i){var s=Ju;return Ju+=1,_l===null&&(_l=[]),i=rE(_l,i,s),s=Qe,(sn===null?s.memoizedState:sn.next)===null&&(s=s.alternate,ne.H=s===null||s.memoizedState===null?GE:$E),i}function wf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ec(i);if(i.$$typeof===k)return Pn(i)}throw Error(r(438,String(i)))}function Jp(i){var s=null,l=Qe.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Zp(),Qe.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),c=0;c<i;c++)l[c]=U;return s.index++,l}function rs(i,s){return typeof s=="function"?s(i):s}function Sf(i){var s=an();return eg(s,It,i)}function eg(i,s,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var m=i.baseQueue,g=c.pending;if(g!==null){if(m!==null){var b=m.next;m.next=g.next,g.next=b}s.baseQueue=m=g,c.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{s=m.next;var A=b=null,L=null,Z=s,se=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(ut&ce)===ce:(Vs&ce)===ce){var J=Z.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===ml&&(se=!0);else if((Vs&J)===J){Z=Z.next,J===ml&&(se=!0);continue}else ce={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(A=L=ce,b=g):L=L.next=ce,Qe.lanes|=J,qs|=J;ce=Z.action,eo&&l(g,ce),g=Z.hasEagerState?Z.eagerState:l(g,ce)}else J={lane:ce,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(A=L=J,b=g):L=L.next=J,Qe.lanes|=ce,qs|=ce;Z=Z.next}while(Z!==null&&Z!==s);if(L===null?b=g:L.next=A,!cr(g,i.memoizedState)&&(vn=!0,se&&(l=pl,l!==null)))throw l;i.memoizedState=g,i.baseState=b,i.baseQueue=L,c.lastRenderedState=g}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function tg(i){var s=an(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,m=l.pending,g=s.memoizedState;if(m!==null){l.pending=null;var b=m=m.next;do g=i(g,b.action),b=b.next;while(b!==m);cr(g,s.memoizedState)||(vn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,c]}function hE(i,s,l){var c=Qe,m=an(),g=yt;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=s();var b=!cr((It||m).memoizedState,l);b&&(m.memoizedState=l,vn=!0),m=m.queue;var A=mE.bind(null,c,m,i);if(tc(2048,8,A,[i]),m.getSnapshot!==s||b||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,vl(9,Rf(),dE.bind(null,c,m,l,s),null),Ot===null)throw Error(r(349));g||(Vs&124)!==0||fE(c,s,l)}return l}function fE(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=Qe.updateQueue,s===null?(s=Zp(),Qe.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function dE(i,s,l,c){s.value=l,s.getSnapshot=c,pE(s)&&gE(i)}function mE(i,s,l){return l(function(){pE(s)&&gE(i)})}function pE(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!cr(i,l)}catch{return!0}}function gE(i){var s=cl(i,2);s!==null&&gr(s,i,2)}function ng(i){var s=Jn();if(typeof i=="function"){var l=i;if(i=l(),eo){tn(!0);try{l()}finally{tn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:i},s}function yE(i,s,l,c){return i.baseState=l,eg(i,It,typeof c=="function"?c:rs)}function mD(i,s,l,c,m){if(If(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};ne.T!==null?l(!0):g.isTransition=!1,c(g),l=s.pending,l===null?(g.next=s.pending=g,_E(s,g)):(g.next=l.next,s.pending=l.next=g)}}function _E(i,s){var l=s.action,c=s.payload,m=i.state;if(s.isTransition){var g=ne.T,b={};ne.T=b;try{var A=l(m,c),L=ne.S;L!==null&&L(b,A),vE(i,s,A)}catch(Z){rg(i,s,Z)}finally{ne.T=g}}else try{g=l(m,c),vE(i,s,g)}catch(Z){rg(i,s,Z)}}function vE(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){EE(i,s,c)},function(c){return rg(i,s,c)}):EE(i,s,l)}function EE(i,s,l){s.status="fulfilled",s.value=l,TE(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,_E(i,l)))}function rg(i,s,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,TE(s),s=s.next;while(s!==c)}i.action=null}function TE(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function bE(i,s){return s}function wE(i,s){if(yt){var l=Ot.formState;if(l!==null){e:{var c=Qe;if(yt){if(qt){t:{for(var m=qt,g=Ai;m.nodeType!==8;){if(!g){m=null;break t}if(m=ri(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){qt=ri(m.nextSibling),c=m.data==="F!";break e}}Xa(c)}c=!1}c&&(s=l[0])}}return l=Jn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bE,lastRenderedState:s},l.queue=c,l=FE.bind(null,Qe,c),c.dispatch=l,c=ng(!1),g=lg.bind(null,Qe,!1,c.queue),c=Jn(),m={state:s,dispatch:null,action:i,pending:null},c.queue=m,l=mD.bind(null,Qe,m,g,l),m.dispatch=l,c.memoizedState=i,[s,l,!1]}function SE(i){var s=an();return RE(s,It,i)}function RE(i,s,l){if(s=eg(i,s,bE)[0],i=Sf(rs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ec(s)}catch(b){throw b===Yu?_f:b}else c=s;s=an();var m=s.queue,g=m.dispatch;return l!==s.memoizedState&&(Qe.flags|=2048,vl(9,Rf(),pD.bind(null,m,l),null)),[c,g,i]}function pD(i,s){i.action=s}function AE(i){var s=an(),l=It;if(l!==null)return RE(s,l,i);an(),s=s.memoizedState,l=an();var c=l.queue.dispatch;return l.memoizedState=i,[s,c,!1]}function vl(i,s,l,c){return i={tag:i,create:l,deps:c,inst:s,next:null},s=Qe.updateQueue,s===null&&(s=Zp(),Qe.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,s.lastEffect=i),i}function Rf(){return{destroy:void 0,resource:void 0}}function IE(){return an().memoizedState}function Af(i,s,l,c){var m=Jn();c=c===void 0?null:c,Qe.flags|=i,m.memoizedState=vl(1|s,Rf(),l,c)}function tc(i,s,l,c){var m=an();c=c===void 0?null:c;var g=m.memoizedState.inst;It!==null&&c!==null&&Kp(c,It.memoizedState.deps)?m.memoizedState=vl(s,g,l,c):(Qe.flags|=i,m.memoizedState=vl(1|s,g,l,c))}function xE(i,s){Af(8390656,8,i,s)}function CE(i,s){tc(2048,8,i,s)}function DE(i,s){return tc(4,2,i,s)}function NE(i,s){return tc(4,4,i,s)}function OE(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function PE(i,s,l){l=l!=null?l.concat([i]):null,tc(4,4,OE.bind(null,s,i),l)}function ig(){}function ME(i,s){var l=an();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Kp(s,c[1])?c[0]:(l.memoizedState=[i,s],i)}function kE(i,s){var l=an();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Kp(s,c[1]))return c[0];if(c=i(),eo){tn(!0);try{i()}finally{tn(!1)}}return l.memoizedState=[c,s],c}function sg(i,s,l){return l===void 0||(Vs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=l,i=UT(),Qe.lanes|=i,qs|=i,l)}function VE(i,s,l,c){return cr(l,s)?l:gl.current!==null?(i=sg(i,l,c),cr(i,s)||(vn=!0),i):(Vs&42)===0?(vn=!0,i.memoizedState=l):(i=UT(),Qe.lanes|=i,qs|=i,s)}function LE(i,s,l,c,m){var g=fe.p;fe.p=g!==0&&8>g?g:8;var b=ne.T,A={};ne.T=A,lg(i,!1,s,l);try{var L=m(),Z=ne.S;if(Z!==null&&Z(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var se=hD(L,c);nc(i,s,se,pr(i))}else nc(i,s,c,pr(i))}catch(ce){nc(i,s,{then:function(){},status:"rejected",reason:ce},pr())}finally{fe.p=g,ne.T=b}}function gD(){}function ag(i,s,l,c){if(i.tag!==5)throw Error(r(476));var m=UE(i).queue;LE(i,m,s,ge,l===null?gD:function(){return jE(i),l(c)})}function UE(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:ge},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function jE(i){var s=UE(i).next.queue;nc(i,s,{},pr())}function og(){return Pn(Ec)}function BE(){return an().memoizedState}function zE(){return an().memoizedState}function yD(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=pr();i=Ms(l);var c=ks(s,i,l);c!==null&&(gr(c,s,l),Xu(c,s,l)),s={cache:Lp()},i.payload=s;return}s=s.return}}function _D(i,s,l){var c=pr();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},If(i)?qE(s,l):(l=Ip(i,s,l,c),l!==null&&(gr(l,i,c),HE(l,s,c)))}function FE(i,s,l){var c=pr();nc(i,s,l,c)}function nc(i,s,l,c){var m={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(If(i))qE(s,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var b=s.lastRenderedState,A=g(b,l);if(m.hasEagerState=!0,m.eagerState=A,cr(A,b))return cf(i,s,m,0),Ot===null&&uf(),!1}catch{}finally{}if(l=Ip(i,s,m,c),l!==null)return gr(l,i,c),HE(l,s,c),!0}return!1}function lg(i,s,l,c){if(c={lane:2,revertLane:Bg(),action:c,hasEagerState:!1,eagerState:null,next:null},If(i)){if(s)throw Error(r(479))}else s=Ip(i,l,c,2),s!==null&&gr(s,i,2)}function If(i){var s=i.alternate;return i===Qe||s!==null&&s===Qe}function qE(i,s){yl=Tf=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function HE(i,s,l){if((l&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,l|=c,s.lanes=l,Na(i,l)}}var xf={readContext:Pn,use:wf,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt},GE={readContext:Pn,use:wf,useCallback:function(i,s){return Jn().memoizedState=[i,s===void 0?null:s],i},useContext:Pn,useEffect:xE,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Af(4194308,4,OE.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Af(4194308,4,i,s)},useInsertionEffect:function(i,s){Af(4,2,i,s)},useMemo:function(i,s){var l=Jn();s=s===void 0?null:s;var c=i();if(eo){tn(!0);try{i()}finally{tn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(i,s,l){var c=Jn();if(l!==void 0){var m=l(s);if(eo){tn(!0);try{l(s)}finally{tn(!1)}}}else m=s;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=_D.bind(null,Qe,i),[c.memoizedState,i]},useRef:function(i){var s=Jn();return i={current:i},s.memoizedState=i},useState:function(i){i=ng(i);var s=i.queue,l=FE.bind(null,Qe,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:ig,useDeferredValue:function(i,s){var l=Jn();return sg(l,i,s)},useTransition:function(){var i=ng(!1);return i=LE.bind(null,Qe,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var c=Qe,m=Jn();if(yt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),Ot===null)throw Error(r(349));(ut&124)!==0||fE(c,s,l)}m.memoizedState=l;var g={value:l,getSnapshot:s};return m.queue=g,xE(mE.bind(null,c,g,i),[i]),c.flags|=2048,vl(9,Rf(),dE.bind(null,c,g,l,s),null),l},useId:function(){var i=Jn(),s=Ot.identifierPrefix;if(yt){var l=es,c=Ji;l=(c&~(1<<32-gn(c)-1)).toString(32)+l,s=""+s+"R"+l,l=bf++,0<l&&(s+="H"+l.toString(32)),s+=""}else l=fD++,s=""+s+"r"+l.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:og,useFormState:wE,useActionState:wE,useOptimistic:function(i){var s=Jn();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=lg.bind(null,Qe,!0,l),l.dispatch=s,[i,s]},useMemoCache:Jp,useCacheRefresh:function(){return Jn().memoizedState=yD.bind(null,Qe)}},$E={readContext:Pn,use:wf,useCallback:ME,useContext:Pn,useEffect:CE,useImperativeHandle:PE,useInsertionEffect:DE,useLayoutEffect:NE,useMemo:kE,useReducer:Sf,useRef:IE,useState:function(){return Sf(rs)},useDebugValue:ig,useDeferredValue:function(i,s){var l=an();return VE(l,It.memoizedState,i,s)},useTransition:function(){var i=Sf(rs)[0],s=an().memoizedState;return[typeof i=="boolean"?i:ec(i),s]},useSyncExternalStore:hE,useId:BE,useHostTransitionStatus:og,useFormState:SE,useActionState:SE,useOptimistic:function(i,s){var l=an();return yE(l,It,i,s)},useMemoCache:Jp,useCacheRefresh:zE},vD={readContext:Pn,use:wf,useCallback:ME,useContext:Pn,useEffect:CE,useImperativeHandle:PE,useInsertionEffect:DE,useLayoutEffect:NE,useMemo:kE,useReducer:tg,useRef:IE,useState:function(){return tg(rs)},useDebugValue:ig,useDeferredValue:function(i,s){var l=an();return It===null?sg(l,i,s):VE(l,It.memoizedState,i,s)},useTransition:function(){var i=tg(rs)[0],s=an().memoizedState;return[typeof i=="boolean"?i:ec(i),s]},useSyncExternalStore:hE,useId:BE,useHostTransitionStatus:og,useFormState:AE,useActionState:AE,useOptimistic:function(i,s){var l=an();return It!==null?yE(l,It,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Jp,useCacheRefresh:zE},El=null,rc=0;function Cf(i){var s=rc;return rc+=1,El===null&&(El=[]),rE(El,i,s)}function ic(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Df(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function KE(i){var s=i._init;return s(i._payload)}function YE(i){function s($,H){if(i){var W=$.deletions;W===null?($.deletions=[H],$.flags|=16):W.push(H)}}function l($,H){if(!i)return null;for(;H!==null;)s($,H),H=H.sibling;return null}function c($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function m($,H){return $=Zi($,H),$.index=0,$.sibling=null,$}function g($,H,W){return $.index=W,i?(W=$.alternate,W!==null?(W=W.index,W<H?($.flags|=67108866,H):W):($.flags|=67108866,H)):($.flags|=1048576,H)}function b($){return i&&$.alternate===null&&($.flags|=67108866),$}function A($,H,W,ue){return H===null||H.tag!==6?(H=Cp(W,$.mode,ue),H.return=$,H):(H=m(H,W),H.return=$,H)}function L($,H,W,ue){var we=W.type;return we===C?se($,H,W.props.children,ue,W.key):H!==null&&(H.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&KE(we)===H.type)?(H=m(H,W.props),ic(H,W),H.return=$,H):(H=ff(W.type,W.key,W.props,null,$.mode,ue),ic(H,W),H.return=$,H)}function Z($,H,W,ue){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=Dp(W,$.mode,ue),H.return=$,H):(H=m(H,W.children||[]),H.return=$,H)}function se($,H,W,ue,we){return H===null||H.tag!==7?(H=$a(W,$.mode,ue,we),H.return=$,H):(H=m(H,W),H.return=$,H)}function ce($,H,W){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Cp(""+H,$.mode,W),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return W=ff(H.type,H.key,H.props,null,$.mode,W),ic(W,H),W.return=$,W;case S:return H=Dp(H,$.mode,W),H.return=$,H;case I:var ue=H._init;return H=ue(H._payload),ce($,H,W)}if(je(H)||G(H))return H=$a(H,$.mode,W,null),H.return=$,H;if(typeof H.then=="function")return ce($,Cf(H),W);if(H.$$typeof===k)return ce($,gf($,H),W);Df($,H)}return null}function J($,H,W,ue){var we=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return we!==null?null:A($,H,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return W.key===we?L($,H,W,ue):null;case S:return W.key===we?Z($,H,W,ue):null;case I:return we=W._init,W=we(W._payload),J($,H,W,ue)}if(je(W)||G(W))return we!==null?null:se($,H,W,ue,null);if(typeof W.then=="function")return J($,H,Cf(W),ue);if(W.$$typeof===k)return J($,H,gf($,W),ue);Df($,W)}return null}function ee($,H,W,ue,we){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $=$.get(W)||null,A(H,$,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return $=$.get(ue.key===null?W:ue.key)||null,L(H,$,ue,we);case S:return $=$.get(ue.key===null?W:ue.key)||null,Z(H,$,ue,we);case I:var Je=ue._init;return ue=Je(ue._payload),ee($,H,W,ue,we)}if(je(ue)||G(ue))return $=$.get(W)||null,se(H,$,ue,we,null);if(typeof ue.then=="function")return ee($,H,W,Cf(ue),we);if(ue.$$typeof===k)return ee($,H,W,gf(H,ue),we);Df(H,ue)}return null}function Be($,H,W,ue){for(var we=null,Je=null,Ne=H,Le=H=0,Tn=null;Ne!==null&&Le<W.length;Le++){Ne.index>Le?(Tn=Ne,Ne=null):Tn=Ne.sibling;var pt=J($,Ne,W[Le],ue);if(pt===null){Ne===null&&(Ne=Tn);break}i&&Ne&&pt.alternate===null&&s($,Ne),H=g(pt,H,Le),Je===null?we=pt:Je.sibling=pt,Je=pt,Ne=Tn}if(Le===W.length)return l($,Ne),yt&&Ya($,Le),we;if(Ne===null){for(;Le<W.length;Le++)Ne=ce($,W[Le],ue),Ne!==null&&(H=g(Ne,H,Le),Je===null?we=Ne:Je.sibling=Ne,Je=Ne);return yt&&Ya($,Le),we}for(Ne=c(Ne);Le<W.length;Le++)Tn=ee(Ne,$,Le,W[Le],ue),Tn!==null&&(i&&Tn.alternate!==null&&Ne.delete(Tn.key===null?Le:Tn.key),H=g(Tn,H,Le),Je===null?we=Tn:Je.sibling=Tn,Je=Tn);return i&&Ne.forEach(function(Zs){return s($,Zs)}),yt&&Ya($,Le),we}function Ve($,H,W,ue){if(W==null)throw Error(r(151));for(var we=null,Je=null,Ne=H,Le=H=0,Tn=null,pt=W.next();Ne!==null&&!pt.done;Le++,pt=W.next()){Ne.index>Le?(Tn=Ne,Ne=null):Tn=Ne.sibling;var Zs=J($,Ne,pt.value,ue);if(Zs===null){Ne===null&&(Ne=Tn);break}i&&Ne&&Zs.alternate===null&&s($,Ne),H=g(Zs,H,Le),Je===null?we=Zs:Je.sibling=Zs,Je=Zs,Ne=Tn}if(pt.done)return l($,Ne),yt&&Ya($,Le),we;if(Ne===null){for(;!pt.done;Le++,pt=W.next())pt=ce($,pt.value,ue),pt!==null&&(H=g(pt,H,Le),Je===null?we=pt:Je.sibling=pt,Je=pt);return yt&&Ya($,Le),we}for(Ne=c(Ne);!pt.done;Le++,pt=W.next())pt=ee(Ne,$,Le,pt.value,ue),pt!==null&&(i&&pt.alternate!==null&&Ne.delete(pt.key===null?Le:pt.key),H=g(pt,H,Le),Je===null?we=pt:Je.sibling=pt,Je=pt);return i&&Ne.forEach(function(EN){return s($,EN)}),yt&&Ya($,Le),we}function Ct($,H,W,ue){if(typeof W=="object"&&W!==null&&W.type===C&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case T:e:{for(var we=W.key;H!==null;){if(H.key===we){if(we=W.type,we===C){if(H.tag===7){l($,H.sibling),ue=m(H,W.props.children),ue.return=$,$=ue;break e}}else if(H.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&KE(we)===H.type){l($,H.sibling),ue=m(H,W.props),ic(ue,W),ue.return=$,$=ue;break e}l($,H);break}else s($,H);H=H.sibling}W.type===C?(ue=$a(W.props.children,$.mode,ue,W.key),ue.return=$,$=ue):(ue=ff(W.type,W.key,W.props,null,$.mode,ue),ic(ue,W),ue.return=$,$=ue)}return b($);case S:e:{for(we=W.key;H!==null;){if(H.key===we)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){l($,H.sibling),ue=m(H,W.children||[]),ue.return=$,$=ue;break e}else{l($,H);break}else s($,H);H=H.sibling}ue=Dp(W,$.mode,ue),ue.return=$,$=ue}return b($);case I:return we=W._init,W=we(W._payload),Ct($,H,W,ue)}if(je(W))return Be($,H,W,ue);if(G(W)){if(we=G(W),typeof we!="function")throw Error(r(150));return W=we.call(W),Ve($,H,W,ue)}if(typeof W.then=="function")return Ct($,H,Cf(W),ue);if(W.$$typeof===k)return Ct($,H,gf($,W),ue);Df($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,H!==null&&H.tag===6?(l($,H.sibling),ue=m(H,W),ue.return=$,$=ue):(l($,H),ue=Cp(W,$.mode,ue),ue.return=$,$=ue),b($)):l($,H)}return function($,H,W,ue){try{rc=0;var we=Ct($,H,W,ue);return El=null,we}catch(Ne){if(Ne===Yu||Ne===_f)throw Ne;var Je=hr(29,Ne,null,$.mode);return Je.lanes=ue,Je.return=$,Je}finally{}}}var Tl=YE(!0),QE=YE(!1),Ur=oe(null),Ii=null;function Ls(i){var s=i.alternate;he(fn,fn.current&1),he(Ur,i),Ii===null&&(s===null||gl.current!==null||s.memoizedState!==null)&&(Ii=i)}function XE(i){if(i.tag===22){if(he(fn,fn.current),he(Ur,i),Ii===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Ii=i)}}else Us()}function Us(){he(fn,fn.current),he(Ur,Ur.current)}function is(i){de(Ur),Ii===i&&(Ii=null),de(fn)}var fn=oe(0);function Nf(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Zg(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ug(i,s,l,c){s=i.memoizedState,l=l(c,s),l=l==null?s:y({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var cg={enqueueSetState:function(i,s,l){i=i._reactInternals;var c=pr(),m=Ms(c);m.payload=s,l!=null&&(m.callback=l),s=ks(i,m,c),s!==null&&(gr(s,i,c),Xu(s,i,c))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var c=pr(),m=Ms(c);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=ks(i,m,c),s!==null&&(gr(s,i,c),Xu(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=pr(),c=Ms(l);c.tag=2,s!=null&&(c.callback=s),s=ks(i,c,l),s!==null&&(gr(s,i,l),Xu(s,i,l))}};function WE(i,s,l,c,m,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,b):s.prototype&&s.prototype.isPureReactComponent?!Bu(l,c)||!Bu(m,g):!0}function ZE(i,s,l,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==i&&cg.enqueueReplaceState(s,s.state,null)}function to(i,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(i=i.defaultProps){l===s&&(l=y({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var Of=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function JE(i){Of(i)}function eT(i){console.error(i)}function tT(i){Of(i)}function Pf(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function nT(i,s,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function hg(i,s,l){return l=Ms(l),l.tag=3,l.payload={element:null},l.callback=function(){Pf(i,s)},l}function rT(i){return i=Ms(i),i.tag=3,i}function iT(i,s,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;i.payload=function(){return m(g)},i.callback=function(){nT(s,l,c)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){nT(s,l,c),typeof m!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function ED(i,s,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Gu(s,l,m,!0),l=Ur.current,l!==null){switch(l.tag){case 13:return Ii===null?kg():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===Bp?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Lg(i,c,m)),!1;case 22:return l.flags|=65536,c===Bp?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Lg(i,c,m)),!1}throw Error(r(435,l.tag))}return Lg(i,c,m),kg(),!1}if(yt)return s=Ur.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==Pp&&(i=Error(r(422),{cause:c}),Hu(Mr(i,l)))):(c!==Pp&&(s=Error(r(423),{cause:c}),Hu(Mr(s,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=Mr(c,l),m=hg(i.stateNode,c,m),qp(i,m),Ht!==4&&(Ht=2)),!1;var g=Error(r(520),{cause:c});if(g=Mr(g,l),hc===null?hc=[g]:hc.push(g),Ht!==4&&(Ht=2),s===null)return!0;c=Mr(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=hg(l.stateNode,c,i),qp(l,i),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Hs===null||!Hs.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=rT(m),iT(m,i,l,c),qp(l,m),!1}l=l.return}while(l!==null);return!1}var sT=Error(r(461)),vn=!1;function In(i,s,l,c){s.child=i===null?QE(s,null,l,c):Tl(s,i.child,l,c)}function aT(i,s,l,c,m){l=l.render;var g=s.ref;if("ref"in c){var b={};for(var A in c)A!=="ref"&&(b[A]=c[A])}else b=c;return Za(s),c=Yp(i,s,l,b,g,m),A=Qp(),i!==null&&!vn?(Xp(i,s,m),ss(i,s,m)):(yt&&A&&Np(s),s.flags|=1,In(i,s,c,m),s.child)}function oT(i,s,l,c,m){if(i===null){var g=l.type;return typeof g=="function"&&!xp(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,lT(i,s,g,c,m)):(i=ff(l.type,null,c,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!vg(i,m)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:Bu,l(b,c)&&i.ref===s.ref)return ss(i,s,m)}return s.flags|=1,i=Zi(g,c),i.ref=s.ref,i.return=s,s.child=i}function lT(i,s,l,c,m){if(i!==null){var g=i.memoizedProps;if(Bu(g,c)&&i.ref===s.ref)if(vn=!1,s.pendingProps=c=g,vg(i,m))(i.flags&131072)!==0&&(vn=!0);else return s.lanes=i.lanes,ss(i,s,m)}return fg(i,s,l,c,m)}function uT(i,s,l){var c=s.pendingProps,m=c.children,g=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|l:l,i!==null){for(m=s.child=i.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return cT(i,s,c,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&yf(s,g!==null?g.cachePool:null),g!==null?lE(s,g):Gp(),XE(s);else return s.lanes=s.childLanes=536870912,cT(i,s,g!==null?g.baseLanes|l:l,l)}else g!==null?(yf(s,g.cachePool),lE(s,g),Us(),s.memoizedState=null):(i!==null&&yf(s,null),Gp(),Us());return In(i,s,m,l),s.child}function cT(i,s,l,c){var m=jp();return m=m===null?null:{parent:hn._currentValue,pool:m},s.memoizedState={baseLanes:l,cachePool:m},i!==null&&yf(s,null),Gp(),XE(s),i!==null&&Gu(i,s,c,!0),null}function Mf(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function fg(i,s,l,c,m){return Za(s),l=Yp(i,s,l,c,void 0,m),c=Qp(),i!==null&&!vn?(Xp(i,s,m),ss(i,s,m)):(yt&&c&&Np(s),s.flags|=1,In(i,s,l,m),s.child)}function hT(i,s,l,c,m,g){return Za(s),s.updateQueue=null,l=cE(s,c,l,m),uE(i),c=Qp(),i!==null&&!vn?(Xp(i,s,g),ss(i,s,g)):(yt&&c&&Np(s),s.flags|=1,In(i,s,l,g),s.child)}function fT(i,s,l,c,m){if(Za(s),s.stateNode===null){var g=hl,b=l.contextType;typeof b=="object"&&b!==null&&(g=Pn(b)),g=new l(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=cg,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},zp(s),b=l.contextType,g.context=typeof b=="object"&&b!==null?Pn(b):hl,g.state=s.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(ug(s,l,b,c),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&cg.enqueueReplaceState(g,g.state,null),Zu(s,c,g,m),Wu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var A=s.memoizedProps,L=to(l,A);g.props=L;var Z=g.context,se=l.contextType;b=hl,typeof se=="object"&&se!==null&&(b=Pn(se));var ce=l.getDerivedStateFromProps;se=typeof ce=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||Z!==b)&&ZE(s,g,c,b),Ps=!1;var J=s.memoizedState;g.state=J,Zu(s,c,g,m),Wu(),Z=s.memoizedState,A||J!==Z||Ps?(typeof ce=="function"&&(ug(s,l,ce,c),Z=s.memoizedState),(L=Ps||WE(s,l,L,c,J,Z,b))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Z),g.props=c,g.state=Z,g.context=b,c=L):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Fp(i,s),b=s.memoizedProps,se=to(l,b),g.props=se,ce=s.pendingProps,J=g.context,Z=l.contextType,L=hl,typeof Z=="object"&&Z!==null&&(L=Pn(Z)),A=l.getDerivedStateFromProps,(Z=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ce||J!==L)&&ZE(s,g,c,L),Ps=!1,J=s.memoizedState,g.state=J,Zu(s,c,g,m),Wu();var ee=s.memoizedState;b!==ce||J!==ee||Ps||i!==null&&i.dependencies!==null&&pf(i.dependencies)?(typeof A=="function"&&(ug(s,l,A,c),ee=s.memoizedState),(se=Ps||WE(s,l,se,c,J,ee,L)||i!==null&&i.dependencies!==null&&pf(i.dependencies))?(Z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ee,L),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ee,L)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ee),g.props=c,g.state=ee,g.context=L,c=se):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,Mf(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=Tl(s,i.child,null,m),s.child=Tl(s,null,l,m)):In(i,s,l,m),s.memoizedState=g.state,i=s.child):i=ss(i,s,m),i}function dT(i,s,l,c){return qu(),s.flags|=256,In(i,s,l,c),s.child}var dg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mg(i){return{baseLanes:i,cachePool:eE()}}function pg(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=jr),i}function mT(i,s,l){var c=s.pendingProps,m=!1,g=(s.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(fn.current&2)!==0),b&&(m=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,i===null){if(yt){if(m?Ls(s):Us(),yt){var A=qt,L;if(L=A){e:{for(L=A,A=Ai;L.nodeType!==8;){if(!A){A=null;break e}if(L=ri(L.nextSibling),L===null){A=null;break e}}A=L}A!==null?(s.memoizedState={dehydrated:A,treeContext:Ka!==null?{id:Ji,overflow:es}:null,retryLane:536870912,hydrationErrors:null},L=hr(18,null,null,0),L.stateNode=A,L.return=s,s.child=L,$n=s,qt=null,L=!0):L=!1}L||Xa(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Zg(A)?s.lanes=32:s.lanes=536870912,null;is(s)}return A=c.children,c=c.fallback,m?(Us(),m=s.mode,A=kf({mode:"hidden",children:A},m),c=$a(c,m,l,null),A.return=s,c.return=s,A.sibling=c,s.child=A,m=s.child,m.memoizedState=mg(l),m.childLanes=pg(i,b,l),s.memoizedState=dg,c):(Ls(s),gg(s,A))}if(L=i.memoizedState,L!==null&&(A=L.dehydrated,A!==null)){if(g)s.flags&256?(Ls(s),s.flags&=-257,s=yg(i,s,l)):s.memoizedState!==null?(Us(),s.child=i.child,s.flags|=128,s=null):(Us(),m=c.fallback,A=s.mode,c=kf({mode:"visible",children:c.children},A),m=$a(m,A,l,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,Tl(s,i.child,null,l),c=s.child,c.memoizedState=mg(l),c.childLanes=pg(i,b,l),s.memoizedState=dg,s=m);else if(Ls(s),Zg(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var Z=b.dgst;b=Z,c=Error(r(419)),c.stack="",c.digest=b,Hu({value:c,source:null,stack:null}),s=yg(i,s,l)}else if(vn||Gu(i,s,l,!1),b=(l&i.childLanes)!==0,vn||b){if(b=Ot,b!==null&&(c=l&-l,c=(c&42)!==0?1:gi(c),c=(c&(b.suspendedLanes|l))!==0?0:c,c!==0&&c!==L.retryLane))throw L.retryLane=c,cl(i,c),gr(b,i,c),sT;A.data==="$?"||kg(),s=yg(i,s,l)}else A.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=L.treeContext,qt=ri(A.nextSibling),$n=s,yt=!0,Qa=null,Ai=!1,i!==null&&(Vr[Lr++]=Ji,Vr[Lr++]=es,Vr[Lr++]=Ka,Ji=i.id,es=i.overflow,Ka=s),s=gg(s,c.children),s.flags|=4096);return s}return m?(Us(),m=c.fallback,A=s.mode,L=i.child,Z=L.sibling,c=Zi(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Z!==null?m=Zi(Z,m):(m=$a(m,A,l,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,A=i.child.memoizedState,A===null?A=mg(l):(L=A.cachePool,L!==null?(Z=hn._currentValue,L=L.parent!==Z?{parent:Z,pool:Z}:L):L=eE(),A={baseLanes:A.baseLanes|l,cachePool:L}),m.memoizedState=A,m.childLanes=pg(i,b,l),s.memoizedState=dg,c):(Ls(s),l=i.child,i=l.sibling,l=Zi(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,i!==null&&(b=s.deletions,b===null?(s.deletions=[i],s.flags|=16):b.push(i)),s.child=l,s.memoizedState=null,l)}function gg(i,s){return s=kf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function kf(i,s){return i=hr(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function yg(i,s,l){return Tl(s,i.child,null,l),i=gg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function pT(i,s,l){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),kp(i.return,s,l)}function _g(i,s,l,c,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=m)}function gT(i,s,l){var c=s.pendingProps,m=c.revealOrder,g=c.tail;if(In(i,s,c.children,l),c=fn.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&pT(i,l,s);else if(i.tag===19)pT(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(he(fn,c),m){case"forwards":for(l=s.child,m=null;l!==null;)i=l.alternate,i!==null&&Nf(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),_g(s,!1,m,l,g);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Nf(i)===null){s.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}_g(s,!0,l,null,g);break;case"together":_g(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ss(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),qs|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(Gu(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,l=Zi(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Zi(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function vg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&pf(i)))}function TD(i,s,l){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),Os(s,hn,i.memoizedState.cache),qu();break;case 27:case 5:Ft(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:Os(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ls(s),s.flags|=128,null):(l&s.child.childLanes)!==0?mT(i,s,l):(Ls(s),i=ss(i,s,l),i!==null?i.sibling:null);Ls(s);break;case 19:var m=(i.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Gu(i,s,l,!1),c=(l&s.childLanes)!==0),m){if(c)return gT(i,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),he(fn,fn.current),c)break;return null;case 22:case 23:return s.lanes=0,uT(i,s,l);case 24:Os(s,hn,i.memoizedState.cache)}return ss(i,s,l)}function yT(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)vn=!0;else{if(!vg(i,l)&&(s.flags&128)===0)return vn=!1,TD(i,s,l);vn=(i.flags&131072)!==0}else vn=!1,yt&&(s.flags&1048576)!==0&&K0(s,mf,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var c=s.elementType,m=c._init;if(c=m(c._payload),s.type=c,typeof c=="function")xp(c)?(i=to(c,i),s.tag=1,s=fT(null,s,c,i,l)):(s.tag=0,s=fg(null,s,c,i,l));else{if(c!=null){if(m=c.$$typeof,m===K){s.tag=11,s=aT(null,s,c,i,l);break e}else if(m===O){s.tag=14,s=oT(null,s,c,i,l);break e}}throw s=Tt(c)||c,Error(r(306,s,""))}}return s;case 0:return fg(i,s,s.type,s.pendingProps,l);case 1:return c=s.type,m=to(c,s.pendingProps),fT(i,s,c,m,l);case 3:e:{if(ht(s,s.stateNode.containerInfo),i===null)throw Error(r(387));c=s.pendingProps;var g=s.memoizedState;m=g.element,Fp(i,s),Zu(s,c,null,l);var b=s.memoizedState;if(c=b.cache,Os(s,hn,c),c!==g.cache&&Vp(s,[hn],l,!0),Wu(),c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=dT(i,s,c,l);break e}else if(c!==m){m=Mr(Error(r(424)),s),Hu(m),s=dT(i,s,c,l);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(qt=ri(i.firstChild),$n=s,yt=!0,Qa=null,Ai=!0,l=QE(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(qu(),c===m){s=ss(i,s,l);break e}In(i,s,c,l)}s=s.child}return s;case 26:return Mf(i,s),i===null?(l=bb(s.type,null,s.pendingProps,null))?s.memoizedState=l:yt||(l=s.type,i=s.pendingProps,c=Qf(ke.current).createElement(l),c[pe]=s,c[Te]=i,Cn(c,l,i),$e(c),s.stateNode=c):s.memoizedState=bb(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ft(s),i===null&&yt&&(c=s.stateNode=vb(s.type,s.pendingProps,ke.current),$n=s,Ai=!0,m=qt,Ks(s.type)?(Jg=m,qt=ri(c.firstChild)):qt=m),In(i,s,s.pendingProps.children,l),Mf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&yt&&((m=c=qt)&&(c=QD(c,s.type,s.pendingProps,Ai),c!==null?(s.stateNode=c,$n=s,qt=ri(c.firstChild),Ai=!1,m=!0):m=!1),m||Xa(s)),Ft(s),m=s.type,g=s.pendingProps,b=i!==null?i.memoizedProps:null,c=g.children,Qg(m,g)?c=null:b!==null&&Qg(m,b)&&(s.flags|=32),s.memoizedState!==null&&(m=Yp(i,s,dD,null,null,l),Ec._currentValue=m),Mf(i,s),In(i,s,c,l),s.child;case 6:return i===null&&yt&&((i=l=qt)&&(l=XD(l,s.pendingProps,Ai),l!==null?(s.stateNode=l,$n=s,qt=null,i=!0):i=!1),i||Xa(s)),null;case 13:return mT(i,s,l);case 4:return ht(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=Tl(s,null,c,l):In(i,s,c,l),s.child;case 11:return aT(i,s,s.type,s.pendingProps,l);case 7:return In(i,s,s.pendingProps,l),s.child;case 8:return In(i,s,s.pendingProps.children,l),s.child;case 12:return In(i,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Os(s,s.type,c.value),In(i,s,c.children,l),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,Za(s),m=Pn(m),c=c(m),s.flags|=1,In(i,s,c,l),s.child;case 14:return oT(i,s,s.type,s.pendingProps,l);case 15:return lT(i,s,s.type,s.pendingProps,l);case 19:return gT(i,s,l);case 31:return c=s.pendingProps,l=s.mode,c={mode:c.mode,children:c.children},i===null?(l=kf(c,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=Zi(i.child,c),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return uT(i,s,l);case 24:return Za(s),c=Pn(hn),i===null?(m=jp(),m===null&&(m=Ot,g=Lp(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),s.memoizedState={parent:c,cache:m},zp(s),Os(s,hn,m)):((i.lanes&l)!==0&&(Fp(i,s),Zu(s,null,null,l),Wu()),m=i.memoizedState,g=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Os(s,hn,c)):(c=g.cache,Os(s,hn,c),c!==m.cache&&Vp(s,[hn],l,!0))),In(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function as(i){i.flags|=4}function _T(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ib(s)){if(s=Ur.current,s!==null&&((ut&4194048)===ut?Ii!==null:(ut&62914560)!==ut&&(ut&536870912)===0||s!==Ii))throw Qu=Bp,tE;i.flags|=8192}}function Vf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?xs():536870912,i.lanes|=s,Rl|=s)}function sc(i,s){if(!yt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function jt(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(s)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=l,s}function bD(i,s,l){var c=s.pendingProps;switch(Op(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return jt(s),null;case 3:return l=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ns(hn),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Fu(s)?as(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,X0())),jt(s),null;case 26:return l=s.memoizedState,i===null?(as(s),l!==null?(jt(s),_T(s,l)):(jt(s),s.flags&=-16777217)):l?l!==i.memoizedState?(as(s),jt(s),_T(s,l)):(jt(s),s.flags&=-16777217):(i.memoizedProps!==c&&as(s),jt(s),s.flags&=-16777217),null;case 27:Sn(s),l=ke.current;var m=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return jt(s),null}i=be.current,Fu(s)?Y0(s):(i=vb(m,c,l),s.stateNode=i,as(s))}return jt(s),null;case 5:if(Sn(s),l=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return jt(s),null}if(i=be.current,Fu(s))Y0(s);else{switch(m=Qf(ke.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(l,{is:c.is}):m.createElement(l)}}i[pe]=s,i[Te]=c;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=i;e:switch(Cn(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&as(s)}}return jt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&as(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(i=ke.current,Fu(s)){if(i=s.stateNode,l=s.memoizedProps,c=null,m=$n,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[pe]=s,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||hb(i.nodeValue,l)),i||Xa(s)}else i=Qf(i).createTextNode(c),i[pe]=s,s.stateNode=i}return jt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Fu(s),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[pe]=s}else qu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),m=!1}else m=X0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(is(s),s):(is(s),null)}if(is(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return l!==i&&l&&(s.child.flags|=8192),Vf(s,s.updateQueue),jt(s),null;case 4:return ft(),i===null&&Hg(s.stateNode.containerInfo),jt(s),null;case 10:return ns(s.type),jt(s),null;case 19:if(de(fn),m=s.memoizedState,m===null)return jt(s),null;if(c=(s.flags&128)!==0,g=m.rendering,g===null)if(c)sc(m,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=Nf(i),g!==null){for(s.flags|=128,sc(m,!1),i=g.updateQueue,s.updateQueue=i,Vf(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)$0(l,i),l=l.sibling;return he(fn,fn.current&1|2),s.child}i=i.sibling}m.tail!==null&&en()>jf&&(s.flags|=128,c=!0,sc(m,!1),s.lanes=4194304)}else{if(!c)if(i=Nf(g),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,Vf(s,i),sc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!yt)return jt(s),null}else 2*en()-m.renderingStartTime>jf&&l!==536870912&&(s.flags|=128,c=!0,sc(m,!1),s.lanes=4194304);m.isBackwards?(g.sibling=s.child,s.child=g):(i=m.last,i!==null?i.sibling=g:s.child=g,m.last=g)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=en(),s.sibling=null,i=fn.current,he(fn,c?i&1|2:i&1),s):(jt(s),null);case 22:case 23:return is(s),$p(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),l=s.updateQueue,l!==null&&Vf(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),i!==null&&de(Ja),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ns(hn),jt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function wD(i,s){switch(Op(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ns(hn),ft(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Sn(s),null;case 13:if(is(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));qu()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return de(fn),null;case 4:return ft(),null;case 10:return ns(s.type),null;case 22:case 23:return is(s),$p(),i!==null&&de(Ja),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ns(hn),null;case 25:return null;default:return null}}function vT(i,s){switch(Op(s),s.tag){case 3:ns(hn),ft();break;case 26:case 27:case 5:Sn(s);break;case 4:ft();break;case 13:is(s);break;case 19:de(fn);break;case 10:ns(s.type);break;case 22:case 23:is(s),$p(),i!==null&&de(Ja);break;case 24:ns(hn)}}function ac(i,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&i)===i){c=void 0;var g=l.create,b=l.inst;c=g(),b.destroy=c}l=l.next}while(l!==m)}}catch(A){Nt(s,s.return,A)}}function js(i,s,l){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&i)===i){var b=c.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,m=s;var L=l,Z=A;try{Z()}catch(se){Nt(m,L,se)}}}c=c.next}while(c!==g)}}catch(se){Nt(s,s.return,se)}}function ET(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{oE(s,l)}catch(c){Nt(i,i.return,c)}}}function TT(i,s,l){l.props=to(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){Nt(i,s,c)}}function oc(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(m){Nt(i,s,m)}}function xi(i,s){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){Nt(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Nt(i,s,m)}else l.current=null}function bT(i){var s=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){Nt(i,i.return,m)}}function Eg(i,s,l){try{var c=i.stateNode;HD(c,i.type,l,s),c[Te]=s}catch(m){Nt(i,i.return,m)}}function wT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ks(i.type)||i.tag===4}function Tg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||wT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ks(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bg(i,s,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Yf));else if(c!==4&&(c===27&&Ks(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(bg(i,s,l),i=i.sibling;i!==null;)bg(i,s,l),i=i.sibling}function Lf(i,s,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(c!==4&&(c===27&&Ks(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Lf(i,s,l),i=i.sibling;i!==null;)Lf(i,s,l),i=i.sibling}function ST(i){var s=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Cn(s,c,l),s[pe]=i,s[Te]=l}catch(g){Nt(i,i.return,g)}}var os=!1,Zt=!1,wg=!1,RT=typeof WeakSet=="function"?WeakSet:Set,En=null;function SD(i,s){if(i=i.containerInfo,Kg=td,i=V0(i),Tp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,A=-1,L=-1,Z=0,se=0,ce=i,J=null;t:for(;;){for(var ee;ce!==l||m!==0&&ce.nodeType!==3||(A=b+m),ce!==g||c!==0&&ce.nodeType!==3||(L=b+c),ce.nodeType===3&&(b+=ce.nodeValue.length),(ee=ce.firstChild)!==null;)J=ce,ce=ee;for(;;){if(ce===i)break t;if(J===l&&++Z===m&&(A=b),J===g&&++se===c&&(L=b),(ee=ce.nextSibling)!==null)break;ce=J,J=ce.parentNode}ce=ee}l=A===-1||L===-1?null:{start:A,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Yg={focusedElem:i,selectionRange:l},td=!1,En=s;En!==null;)if(s=En,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,En=i;else for(;En!==null;){switch(s=En,g=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=s,m=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var Be=to(l.type,m,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(Be,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ve){Nt(l,l.return,Ve)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)Wg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,En=i;break}En=s.return}}function AT(i,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Bs(i,l),c&4&&ac(5,l);break;case 1:if(Bs(i,l),c&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(b){Nt(l,l.return,b)}else{var m=to(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){Nt(l,l.return,b)}}c&64&&ET(l),c&512&&oc(l,l.return);break;case 3:if(Bs(i,l),c&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{oE(i,s)}catch(b){Nt(l,l.return,b)}}break;case 27:s===null&&c&4&&ST(l);case 26:case 5:Bs(i,l),s===null&&c&4&&bT(l),c&512&&oc(l,l.return);break;case 12:Bs(i,l);break;case 13:Bs(i,l),c&4&&CT(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=PD.bind(null,l),WD(i,l))));break;case 22:if(c=l.memoizedState!==null||os,!c){s=s!==null&&s.memoizedState!==null||Zt,m=os;var g=Zt;os=c,(Zt=s)&&!g?zs(i,l,(l.subtreeFlags&8772)!==0):Bs(i,l),os=m,Zt=g}break;case 30:break;default:Bs(i,l)}}function IT(i){var s=i.alternate;s!==null&&(i.alternate=null,IT(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ge(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Vt=null,er=!1;function ls(i,s,l){for(l=l.child;l!==null;)xT(i,s,l),l=l.sibling}function xT(i,s,l){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Se,l)}catch{}switch(l.tag){case 26:Zt||xi(l,s),ls(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Zt||xi(l,s);var c=Vt,m=er;Ks(l.type)&&(Vt=l.stateNode,er=!1),ls(i,s,l),gc(l.stateNode),Vt=c,er=m;break;case 5:Zt||xi(l,s);case 6:if(c=Vt,m=er,Vt=null,ls(i,s,l),Vt=c,er=m,Vt!==null)if(er)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(l.stateNode)}catch(g){Nt(l,s,g)}else try{Vt.removeChild(l.stateNode)}catch(g){Nt(l,s,g)}break;case 18:Vt!==null&&(er?(i=Vt,yb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Sc(i)):yb(Vt,l.stateNode));break;case 4:c=Vt,m=er,Vt=l.stateNode.containerInfo,er=!0,ls(i,s,l),Vt=c,er=m;break;case 0:case 11:case 14:case 15:Zt||js(2,l,s),Zt||js(4,l,s),ls(i,s,l);break;case 1:Zt||(xi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&TT(l,s,c)),ls(i,s,l);break;case 21:ls(i,s,l);break;case 22:Zt=(c=Zt)||l.memoizedState!==null,ls(i,s,l),Zt=c;break;default:ls(i,s,l)}}function CT(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Sc(i)}catch(l){Nt(s,s.return,l)}}function RD(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new RT),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new RT),s;default:throw Error(r(435,i.tag))}}function Sg(i,s){var l=RD(i);s.forEach(function(c){var m=MD.bind(null,i,c);l.has(c)||(l.add(c),c.then(m,m))})}function fr(i,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],g=i,b=s,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Ks(A.type)){Vt=A.stateNode,er=!1;break e}break;case 5:Vt=A.stateNode,er=!1;break e;case 3:case 4:Vt=A.stateNode.containerInfo,er=!0;break e}A=A.return}if(Vt===null)throw Error(r(160));xT(g,b,m),Vt=null,er=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)DT(s,i),s=s.sibling}var ni=null;function DT(i,s){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:fr(s,i),dr(i),c&4&&(js(3,i,i.return),ac(3,i),js(5,i,i.return));break;case 1:fr(s,i),dr(i),c&512&&(Zt||l===null||xi(l,l.return)),c&64&&os&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=ni;if(fr(s,i),dr(i),c&512&&(Zt||l===null||xi(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Oe]||g[pe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),Cn(g,c,l),g[pe]=i,$e(g),c=g;break e;case"link":var b=Rb("link","href",m).get(c+(l.href||""));if(b){for(var A=0;A<b.length;A++)if(g=b[A],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(A,1);break t}}g=m.createElement(c),Cn(g,c,l),m.head.appendChild(g);break;case"meta":if(b=Rb("meta","content",m).get(c+(l.content||""))){for(A=0;A<b.length;A++)if(g=b[A],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(A,1);break t}}g=m.createElement(c),Cn(g,c,l),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[pe]=i,$e(g),c=g}i.stateNode=c}else Ab(m,i.type,i.stateNode);else i.stateNode=Sb(m,c,i.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?Ab(m,i.type,i.stateNode):Sb(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Eg(i,i.memoizedProps,l.memoizedProps)}break;case 27:fr(s,i),dr(i),c&512&&(Zt||l===null||xi(l,l.return)),l!==null&&c&4&&Eg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(fr(s,i),dr(i),c&512&&(Zt||l===null||xi(l,l.return)),i.flags&32){m=i.stateNode;try{Dr(m,"")}catch(ee){Nt(i,i.return,ee)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,Eg(i,m,l!==null?l.memoizedProps:m)),c&1024&&(wg=!0);break;case 6:if(fr(s,i),dr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(ee){Nt(i,i.return,ee)}}break;case 3:if(Zf=null,m=ni,ni=Xf(s.containerInfo),fr(s,i),ni=m,dr(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Sc(s.containerInfo)}catch(ee){Nt(i,i.return,ee)}wg&&(wg=!1,NT(i));break;case 4:c=ni,ni=Xf(i.stateNode.containerInfo),fr(s,i),dr(i),ni=c;break;case 12:fr(s,i),dr(i);break;case 13:fr(s,i),dr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Dg=en()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Sg(i,c)));break;case 22:m=i.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Z=os,se=Zt;if(os=Z||m,Zt=se||L,fr(s,i),Zt=se,os=Z,dr(i),c&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||L||os||Zt||no(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){L=l=s;try{if(g=L.stateNode,m)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=L.stateNode;var ce=L.memoizedProps.style,J=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){Nt(L,L.return,ee)}}}else if(s.tag===6){if(l===null){L=s;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(ee){Nt(L,L.return,ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Sg(i,l))));break;case 19:fr(s,i),dr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Sg(i,c)));break;case 30:break;case 21:break;default:fr(s,i),dr(i)}}function dr(i){var s=i.flags;if(s&2){try{for(var l,c=i.return;c!==null;){if(wT(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var m=l.stateNode,g=Tg(i);Lf(i,g,m);break;case 5:var b=l.stateNode;l.flags&32&&(Dr(b,""),l.flags&=-33);var A=Tg(i);Lf(i,A,b);break;case 3:case 4:var L=l.stateNode.containerInfo,Z=Tg(i);bg(i,Z,L);break;default:throw Error(r(161))}}catch(se){Nt(i,i.return,se)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function NT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;NT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Bs(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)AT(i,s.alternate,s),s=s.sibling}function no(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:js(4,s,s.return),no(s);break;case 1:xi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&TT(s,s.return,l),no(s);break;case 27:gc(s.stateNode);case 26:case 5:xi(s,s.return),no(s);break;case 22:s.memoizedState===null&&no(s);break;case 30:no(s);break;default:no(s)}i=i.sibling}}function zs(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=i,g=s,b=g.flags;switch(g.tag){case 0:case 11:case 15:zs(m,g,l),ac(4,g);break;case 1:if(zs(m,g,l),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Z){Nt(c,c.return,Z)}if(c=g,m=c.updateQueue,m!==null){var A=c.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)aE(L[m],A)}catch(Z){Nt(c,c.return,Z)}}l&&b&64&&ET(g),oc(g,g.return);break;case 27:ST(g);case 26:case 5:zs(m,g,l),l&&c===null&&b&4&&bT(g),oc(g,g.return);break;case 12:zs(m,g,l);break;case 13:zs(m,g,l),l&&b&4&&CT(m,g);break;case 22:g.memoizedState===null&&zs(m,g,l),oc(g,g.return);break;case 30:break;default:zs(m,g,l)}s=s.sibling}}function Rg(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&$u(l))}function Ag(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&$u(i))}function Ci(i,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)OT(i,s,l,c),s=s.sibling}function OT(i,s,l,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:Ci(i,s,l,c),m&2048&&ac(9,s);break;case 1:Ci(i,s,l,c);break;case 3:Ci(i,s,l,c),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&$u(i)));break;case 12:if(m&2048){Ci(i,s,l,c),i=s.stateNode;try{var g=s.memoizedProps,b=g.id,A=g.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){Nt(s,s.return,L)}}else Ci(i,s,l,c);break;case 13:Ci(i,s,l,c);break;case 23:break;case 22:g=s.stateNode,b=s.alternate,s.memoizedState!==null?g._visibility&2?Ci(i,s,l,c):lc(i,s):g._visibility&2?Ci(i,s,l,c):(g._visibility|=2,bl(i,s,l,c,(s.subtreeFlags&10256)!==0)),m&2048&&Rg(b,s);break;case 24:Ci(i,s,l,c),m&2048&&Ag(s.alternate,s);break;default:Ci(i,s,l,c)}}function bl(i,s,l,c,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=i,b=s,A=l,L=c,Z=b.flags;switch(b.tag){case 0:case 11:case 15:bl(g,b,A,L,m),ac(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&2?bl(g,b,A,L,m):lc(g,b):(se._visibility|=2,bl(g,b,A,L,m)),m&&Z&2048&&Rg(b.alternate,b);break;case 24:bl(g,b,A,L,m),m&&Z&2048&&Ag(b.alternate,b);break;default:bl(g,b,A,L,m)}s=s.sibling}}function lc(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,c=s,m=c.flags;switch(c.tag){case 22:lc(l,c),m&2048&&Rg(c.alternate,c);break;case 24:lc(l,c),m&2048&&Ag(c.alternate,c);break;default:lc(l,c)}s=s.sibling}}var uc=8192;function wl(i){if(i.subtreeFlags&uc)for(i=i.child;i!==null;)PT(i),i=i.sibling}function PT(i){switch(i.tag){case 26:wl(i),i.flags&uc&&i.memoizedState!==null&&cN(ni,i.memoizedState,i.memoizedProps);break;case 5:wl(i);break;case 3:case 4:var s=ni;ni=Xf(i.stateNode.containerInfo),wl(i),ni=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=uc,uc=16777216,wl(i),uc=s):wl(i));break;default:wl(i)}}function MT(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function cc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];En=c,VT(c,i)}MT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)kT(i),i=i.sibling}function kT(i){switch(i.tag){case 0:case 11:case 15:cc(i),i.flags&2048&&js(9,i,i.return);break;case 3:cc(i);break;case 12:cc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Uf(i)):cc(i);break;default:cc(i)}}function Uf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];En=c,VT(c,i)}MT(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:js(8,s,s.return),Uf(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Uf(s));break;default:Uf(s)}i=i.sibling}}function VT(i,s){for(;En!==null;){var l=En;switch(l.tag){case 0:case 11:case 15:js(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$u(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,En=c;else e:for(l=i;En!==null;){c=En;var m=c.sibling,g=c.return;if(IT(c),c===l){En=null;break e}if(m!==null){m.return=g,En=m;break e}En=g}}}var AD={getCacheForType:function(i){var s=Pn(hn),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l}},ID=typeof WeakMap=="function"?WeakMap:Map,bt=0,Ot=null,nt=null,ut=0,wt=0,mr=null,Fs=!1,Sl=!1,Ig=!1,us=0,Ht=0,qs=0,ro=0,xg=0,jr=0,Rl=0,hc=null,tr=null,Cg=!1,Dg=0,jf=1/0,Bf=null,Hs=null,xn=0,Gs=null,Al=null,Il=0,Ng=0,Og=null,LT=null,fc=0,Pg=null;function pr(){if((bt&2)!==0&&ut!==0)return ut&-ut;if(ne.T!==null){var i=ml;return i!==0?i:Bg()}return Y()}function UT(){jr===0&&(jr=(ut&536870912)===0||yt?Da():536870912);var i=Ur.current;return i!==null&&(i.flags|=32),jr}function gr(i,s,l){(i===Ot&&(wt===2||wt===9)||i.cancelPendingCommit!==null)&&(xl(i,0),$s(i,ut,jr,!1)),Ar(i,l),((bt&2)===0||i!==Ot)&&(i===Ot&&((bt&2)===0&&(ro|=l),Ht===4&&$s(i,ut,jr,!1)),Di(i))}function jT(i,s,l){if((bt&6)!==0)throw Error(r(327));var c=!l&&(s&124)===0&&(s&i.expiredLanes)===0||mi(i,s),m=c?DD(i,s):Vg(i,s,!0),g=c;do{if(m===0){Sl&&!c&&$s(i,s,0,!1);break}else{if(l=i.current.alternate,g&&!xD(l)){m=Vg(i,s,!1),g=!1;continue}if(m===2){if(g=s,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var A=i;m=hc;var L=A.current.memoizedState.isDehydrated;if(L&&(xl(A,b).flags|=256),b=Vg(A,b,!1),b!==2){if(Ig&&!L){A.errorRecoveryDisabledLanes|=g,ro|=g,m=4;break e}g=tr,tr=m,g!==null&&(tr===null?tr=g:tr.push.apply(tr,g))}m=b}if(g=!1,m!==2)continue}}if(m===1){xl(i,0),$s(i,s,0,!0);break}e:{switch(c=i,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:$s(c,s,jr,!Fs);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Dg+300-en(),10<m)){if($s(c,s,jr,!Fs),Zr(c,0,!0)!==0)break e;c.timeoutHandle=pb(BT.bind(null,c,l,tr,Bf,Cg,s,jr,ro,Rl,Fs,g,2,-0,0),m);break e}BT(c,l,tr,Bf,Cg,s,jr,ro,Rl,Fs,g,0,-0,0)}}break}while(!0);Di(i)}function BT(i,s,l,c,m,g,b,A,L,Z,se,ce,J,ee){if(i.timeoutHandle=-1,ce=s.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(vc={stylesheets:null,count:0,unsuspend:uN},PT(s),ce=hN(),ce!==null)){i.cancelPendingCommit=ce(KT.bind(null,i,s,g,l,c,m,b,A,L,se,1,J,ee)),$s(i,g,b,!Z);return}KT(i,s,g,l,c,m,b,A,L)}function xD(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],g=m.getSnapshot;m=m.value;try{if(!cr(g(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $s(i,s,l,c){s&=~xg,s&=~ro,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var m=s;0<m;){var g=31-gn(m),b=1<<g;c[g]=-1,m&=~b}l!==0&&Fn(i,l,s)}function zf(){return(bt&6)===0?(dc(0),!1):!0}function Mg(){if(nt!==null){if(wt===0)var i=nt.return;else i=nt,ts=Wa=null,Wp(i),El=null,rc=0,i=nt;for(;i!==null;)vT(i.alternate,i),i=i.return;nt=null}}function xl(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,$D(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Mg(),Ot=i,nt=l=Zi(i.current,null),ut=s,wt=0,mr=null,Fs=!1,Sl=mi(i,s),Ig=!1,Rl=jr=xg=ro=qs=Ht=0,tr=hc=null,Cg=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var m=31-gn(c),g=1<<m;s|=i[m],c&=~g}return us=s,uf(),l}function zT(i,s){Qe=null,ne.H=xf,s===Yu||s===_f?(s=iE(),wt=3):s===tE?(s=iE(),wt=4):wt=s===sT?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mr=s,nt===null&&(Ht=1,Pf(i,Mr(s,i.current)))}function FT(){var i=ne.H;return ne.H=xf,i===null?xf:i}function qT(){var i=ne.A;return ne.A=AD,i}function kg(){Ht=4,Fs||(ut&4194048)!==ut&&Ur.current!==null||(Sl=!0),(qs&134217727)===0&&(ro&134217727)===0||Ot===null||$s(Ot,ut,jr,!1)}function Vg(i,s,l){var c=bt;bt|=2;var m=FT(),g=qT();(Ot!==i||ut!==s)&&(Bf=null,xl(i,s)),s=!1;var b=Ht;e:do try{if(wt!==0&&nt!==null){var A=nt,L=mr;switch(wt){case 8:Mg(),b=6;break e;case 3:case 2:case 9:case 6:Ur.current===null&&(s=!0);var Z=wt;if(wt=0,mr=null,Cl(i,A,L,Z),l&&Sl){b=0;break e}break;default:Z=wt,wt=0,mr=null,Cl(i,A,L,Z)}}CD(),b=Ht;break}catch(se){zT(i,se)}while(!0);return s&&i.shellSuspendCounter++,ts=Wa=null,bt=c,ne.H=m,ne.A=g,nt===null&&(Ot=null,ut=0,uf()),b}function CD(){for(;nt!==null;)HT(nt)}function DD(i,s){var l=bt;bt|=2;var c=FT(),m=qT();Ot!==i||ut!==s?(Bf=null,jf=en()+500,xl(i,s)):Sl=mi(i,s);e:do try{if(wt!==0&&nt!==null){s=nt;var g=mr;t:switch(wt){case 1:wt=0,mr=null,Cl(i,s,g,1);break;case 2:case 9:if(nE(g)){wt=0,mr=null,GT(s);break}s=function(){wt!==2&&wt!==9||Ot!==i||(wt=7),Di(i)},g.then(s,s);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:nE(g)?(wt=0,mr=null,GT(s)):(wt=0,mr=null,Cl(i,s,g,7));break;case 5:var b=null;switch(nt.tag){case 26:b=nt.memoizedState;case 5:case 27:var A=nt;if(!b||Ib(b)){wt=0,mr=null;var L=A.sibling;if(L!==null)nt=L;else{var Z=A.return;Z!==null?(nt=Z,Ff(Z)):nt=null}break t}}wt=0,mr=null,Cl(i,s,g,5);break;case 6:wt=0,mr=null,Cl(i,s,g,6);break;case 8:Mg(),Ht=6;break e;default:throw Error(r(462))}}ND();break}catch(se){zT(i,se)}while(!0);return ts=Wa=null,ne.H=c,ne.A=m,bt=l,nt!==null?0:(Ot=null,ut=0,uf(),Ht)}function ND(){for(;nt!==null&&!dt();)HT(nt)}function HT(i){var s=yT(i.alternate,i,us);i.memoizedProps=i.pendingProps,s===null?Ff(i):nt=s}function GT(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=hT(l,s,s.pendingProps,s.type,void 0,ut);break;case 11:s=hT(l,s,s.pendingProps,s.type.render,s.ref,ut);break;case 5:Wp(s);default:vT(l,s),s=nt=$0(s,us),s=yT(l,s,us)}i.memoizedProps=i.pendingProps,s===null?Ff(i):nt=s}function Cl(i,s,l,c){ts=Wa=null,Wp(s),El=null,rc=0;var m=s.return;try{if(ED(i,m,s,l,ut)){Ht=1,Pf(i,Mr(l,i.current)),nt=null;return}}catch(g){if(m!==null)throw nt=m,g;Ht=1,Pf(i,Mr(l,i.current)),nt=null;return}s.flags&32768?(yt||c===1?i=!0:Sl||(ut&536870912)!==0?i=!1:(Fs=i=!0,(c===2||c===9||c===3||c===6)&&(c=Ur.current,c!==null&&c.tag===13&&(c.flags|=16384))),$T(s,i)):Ff(s)}function Ff(i){var s=i;do{if((s.flags&32768)!==0){$T(s,Fs);return}i=s.return;var l=bD(s.alternate,s,us);if(l!==null){nt=l;return}if(s=s.sibling,s!==null){nt=s;return}nt=s=i}while(s!==null);Ht===0&&(Ht=5)}function $T(i,s){do{var l=wD(i.alternate,i);if(l!==null){l.flags&=32767,nt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){nt=i;return}nt=i=l}while(i!==null);Ht=6,nt=null}function KT(i,s,l,c,m,g,b,A,L){i.cancelPendingCommit=null;do qf();while(xn!==0);if((bt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=Ap,pi(i,l,g,b,A,L),i===Ot&&(nt=Ot=null,ut=0),Al=s,Gs=i,Il=l,Ng=g,Og=m,LT=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,kD(Rn,function(){return ZT(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null,m=fe.p,fe.p=2,b=bt,bt|=4;try{SD(i,s,l)}finally{bt=b,fe.p=m,ne.T=c}}xn=1,YT(),QT(),XT()}}function YT(){if(xn===1){xn=0;var i=Gs,s=Al,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var c=fe.p;fe.p=2;var m=bt;bt|=4;try{DT(s,i);var g=Yg,b=V0(i.containerInfo),A=g.focusedElem,L=g.selectionRange;if(b!==A&&A&&A.ownerDocument&&k0(A.ownerDocument.documentElement,A)){if(L!==null&&Tp(A)){var Z=L.start,se=L.end;if(se===void 0&&(se=Z),"selectionStart"in A)A.selectionStart=Z,A.selectionEnd=Math.min(se,A.value.length);else{var ce=A.ownerDocument||document,J=ce&&ce.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Be=A.textContent.length,Ve=Math.min(L.start,Be),Ct=L.end===void 0?Ve:Math.min(L.end,Be);!ee.extend&&Ve>Ct&&(b=Ct,Ct=Ve,Ve=b);var $=M0(A,Ve),H=M0(A,Ct);if($&&H&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==H.node||ee.focusOffset!==H.offset)){var W=ce.createRange();W.setStart($.node,$.offset),ee.removeAllRanges(),Ve>Ct?(ee.addRange(W),ee.extend(H.node,H.offset)):(W.setEnd(H.node,H.offset),ee.addRange(W))}}}}for(ce=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&ce.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var ue=ce[A];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}td=!!Kg,Yg=Kg=null}finally{bt=m,fe.p=c,ne.T=l}}i.current=s,xn=2}}function QT(){if(xn===2){xn=0;var i=Gs,s=Al,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var c=fe.p;fe.p=2;var m=bt;bt|=4;try{AT(i,s.alternate,s)}finally{bt=m,fe.p=c,ne.T=l}}xn=3}}function XT(){if(xn===4||xn===3){xn=0,Sr();var i=Gs,s=Al,l=Il,c=LT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?xn=5:(xn=0,Al=Gs=null,WT(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Hs=null),q(l),s=s.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Se,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=ne.T,m=fe.p,fe.p=2,ne.T=null;try{for(var g=i.onRecoverableError,b=0;b<c.length;b++){var A=c[b];g(A.value,{componentStack:A.stack})}}finally{ne.T=s,fe.p=m}}(Il&3)!==0&&qf(),Di(i),m=i.pendingLanes,(l&4194090)!==0&&(m&42)!==0?i===Pg?fc++:(fc=0,Pg=i):fc=0,dc(0)}}function WT(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,$u(s)))}function qf(i){return YT(),QT(),XT(),ZT()}function ZT(){if(xn!==5)return!1;var i=Gs,s=Ng;Ng=0;var l=q(Il),c=ne.T,m=fe.p;try{fe.p=32>l?32:l,ne.T=null,l=Og,Og=null;var g=Gs,b=Il;if(xn=0,Al=Gs=null,Il=0,(bt&6)!==0)throw Error(r(331));var A=bt;if(bt|=4,kT(g.current),OT(g,g.current,b,l),bt=A,dc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Se,g)}catch{}return!0}finally{fe.p=m,ne.T=c,WT(i,s)}}function JT(i,s,l){s=Mr(l,s),s=hg(i.stateNode,s,2),i=ks(i,s,2),i!==null&&(Ar(i,2),Di(i))}function Nt(i,s,l){if(i.tag===3)JT(i,i,l);else for(;s!==null;){if(s.tag===3){JT(s,i,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hs===null||!Hs.has(c))){i=Mr(l,i),l=rT(2),c=ks(s,l,2),c!==null&&(iT(l,c,s,i),Ar(c,2),Di(c));break}}s=s.return}}function Lg(i,s,l){var c=i.pingCache;if(c===null){c=i.pingCache=new ID;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(l)||(Ig=!0,m.add(l),i=OD.bind(null,i,s,l),s.then(i,i))}function OD(i,s,l){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ot===i&&(ut&l)===l&&(Ht===4||Ht===3&&(ut&62914560)===ut&&300>en()-Dg?(bt&2)===0&&xl(i,0):xg|=l,Rl===ut&&(Rl=0)),Di(i)}function eb(i,s){s===0&&(s=xs()),i=cl(i,s),i!==null&&(Ar(i,s),Di(i))}function PD(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),eb(i,l)}function MD(i,s){var l=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),eb(i,l)}function kD(i,s){return Qt(i,s)}var Hf=null,Dl=null,Ug=!1,Gf=!1,jg=!1,io=0;function Di(i){i!==Dl&&i.next===null&&(Dl===null?Hf=Dl=i:Dl=Dl.next=i),Gf=!0,Ug||(Ug=!0,LD())}function dc(i,s){if(!jg&&Gf){jg=!0;do for(var l=!1,c=Hf;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var b=c.suspendedLanes,A=c.pingedLanes;g=(1<<31-gn(42|i)+1)-1,g&=m&~(b&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,ib(c,g))}else g=ut,g=Zr(c,c===Ot?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||mi(c,g)||(l=!0,ib(c,g));c=c.next}while(l);jg=!1}}function VD(){tb()}function tb(){Gf=Ug=!1;var i=0;io!==0&&(GD()&&(i=io),io=0);for(var s=en(),l=null,c=Hf;c!==null;){var m=c.next,g=nb(c,s);g===0?(c.next=null,l===null?Hf=m:l.next=m,m===null&&(Dl=l)):(l=c,(i!==0||(g&3)!==0)&&(Gf=!0)),c=m}dc(i)}function nb(i,s){for(var l=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-gn(g),A=1<<b,L=m[b];L===-1?((A&l)===0||(A&c)!==0)&&(m[b]=Fi(A,s)):L<=s&&(i.expiredLanes|=A),g&=~A}if(s=Ot,l=ut,l=Zr(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===s&&(wt===2||wt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&On(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||mi(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(c!==null&&On(c),q(l)){case 2:case 8:l=hi;break;case 32:l=Rn;break;case 268435456:l=Wr;break;default:l=Rn}return c=rb.bind(null,i),l=Qt(l,c),i.callbackPriority=s,i.callbackNode=l,s}return c!==null&&c!==null&&On(c),i.callbackPriority=2,i.callbackNode=null,2}function rb(i,s){if(xn!==0&&xn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(qf()&&i.callbackNode!==l)return null;var c=ut;return c=Zr(i,i===Ot?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(jT(i,c,s),nb(i,en()),i.callbackNode!=null&&i.callbackNode===l?rb.bind(null,i):null)}function ib(i,s){if(qf())return null;jT(i,s,!0)}function LD(){KD(function(){(bt&6)!==0?Qt(Bi,VD):tb()})}function Bg(){return io===0&&(io=Da()),io}function sb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Zo(""+i)}function ab(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function UD(i,s,l,c,m){if(s==="submit"&&l&&l.stateNode===m){var g=sb((m[Te]||null).action),b=c.submitter;b&&(s=(s=b[Te]||null)?sb(s.formAction):b.getAttribute("formAction"),s!==null&&(g=s,b=null));var A=new Jo("action","action",null,c,m);i.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(io!==0){var L=b?ab(m,b):new FormData(m);ag(l,{pending:!0,data:L,method:m.method,action:g},null,L)}}else typeof g=="function"&&(A.preventDefault(),L=b?ab(m,b):new FormData(m),ag(l,{pending:!0,data:L,method:m.method,action:g},g,L))},currentTarget:m}]})}}for(var zg=0;zg<Rp.length;zg++){var Fg=Rp[zg],jD=Fg.toLowerCase(),BD=Fg[0].toUpperCase()+Fg.slice(1);ti(jD,"on"+BD)}ti(j0,"onAnimationEnd"),ti(B0,"onAnimationIteration"),ti(z0,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(rD,"onTransitionRun"),ti(iD,"onTransitionStart"),ti(sD,"onTransitionCancel"),ti(F0,"onTransitionEnd"),nn("onMouseEnter",["mouseout","mouseover"]),nn("onMouseLeave",["mouseout","mouseover"]),nn("onPointerEnter",["pointerout","pointerover"]),nn("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function ob(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],m=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var b=c.length-1;0<=b;b--){var A=c[b],L=A.instance,Z=A.currentTarget;if(A=A.listener,L!==g&&m.isPropagationStopped())break e;g=A,m.currentTarget=Z;try{g(m)}catch(se){Of(se)}m.currentTarget=null,g=L}else for(b=0;b<c.length;b++){if(A=c[b],L=A.instance,Z=A.currentTarget,A=A.listener,L!==g&&m.isPropagationStopped())break e;g=A,m.currentTarget=Z;try{g(m)}catch(se){Of(se)}m.currentTarget=null,g=L}}}}function rt(i,s){var l=s[Ie];l===void 0&&(l=s[Ie]=new Set);var c=i+"__bubble";l.has(c)||(lb(s,i,2,!1),l.add(c))}function qg(i,s,l){var c=0;s&&(c|=4),lb(l,i,c,s)}var $f="_reactListening"+Math.random().toString(36).slice(2);function Hg(i){if(!i[$f]){i[$f]=!0,Ir.forEach(function(l){l!=="selectionchange"&&(zD.has(l)||qg(l,!1,i),qg(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[$f]||(s[$f]=!0,qg("selectionchange",!1,s))}}function lb(i,s,l,c){switch(Pb(s)){case 2:var m=mN;break;case 8:m=pN;break;default:m=iy}l=m.bind(null,s,l,i),m=void 0,!Or||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(s,l,{capture:!0,passive:m}):i.addEventListener(s,l,!0):m!==void 0?i.addEventListener(s,l,{passive:m}):i.addEventListener(s,l,!1)}function Gg(i,s,l,c,m){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var A=c.stateNode.containerInfo;if(A===m)break;if(b===4)for(b=c.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;A!==null;){if(b=mt(A),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){c=g=b;continue e}A=A.parentNode}}c=c.return}Kh(function(){var Z=g,se=Nr(l),ce=[];e:{var J=q0.get(i);if(J!==void 0){var ee=Jo,Be=i;switch(i){case"keypress":if(Ti(l)===0)break e;case"keydown":case"keyup":ee=sl;break;case"focusin":Be="focus",ee=nl;break;case"focusout":Be="blur",ee=nl;break;case"beforeblur":case"afterblur":ee=nl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=tf;break;case j0:case B0:case z0:ee=rl;break;case F0:ee=rf;break;case"scroll":case"scrollend":ee=Yh;break;case"wheel":ee=al;break;case"copy":case"cut":case"paste":ee=il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Uu;break;case"toggle":case"beforetoggle":ee=af}var Ve=(s&4)!==0,Ct=!Ve&&(i==="scroll"||i==="scrollend"),$=Ve?J!==null?J+"Capture":null:J;Ve=[];for(var H=Z,W;H!==null;){var ue=H;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||$===null||(ue=La(H,$),ue!=null&&Ve.push(pc(H,ue,W))),Ct)break;H=H.return}0<Ve.length&&(J=new ee(J,Be,null,l,se),ce.push({event:J,listeners:Ve}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",J&&l!==$i&&(Be=l.relatedTarget||l.fromElement)&&(mt(Be)||Be[Ae]))break e;if((ee||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Be=l.relatedTarget||l.toElement,ee=Z,Be=Be?mt(Be):null,Be!==null&&(Ct=o(Be),Ve=Be.tag,Be!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Be=null)):(ee=null,Be=Z),ee!==Be)){if(Ve=Pr,ue="onMouseLeave",$="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ve=Uu,ue="onPointerLeave",$="onPointerEnter",H="pointer"),Ct=ee==null?J:gt(ee),W=Be==null?J:gt(Be),J=new Ve(ue,H+"leave",ee,l,se),J.target=Ct,J.relatedTarget=W,ue=null,mt(se)===Z&&(Ve=new Ve($,H+"enter",Be,l,se),Ve.target=W,Ve.relatedTarget=Ct,ue=Ve),Ct=ue,ee&&Be)t:{for(Ve=ee,$=Be,H=0,W=Ve;W;W=Nl(W))H++;for(W=0,ue=$;ue;ue=Nl(ue))W++;for(;0<H-W;)Ve=Nl(Ve),H--;for(;0<W-H;)$=Nl($),W--;for(;H--;){if(Ve===$||$!==null&&Ve===$.alternate)break t;Ve=Nl(Ve),$=Nl($)}Ve=null}else Ve=null;ee!==null&&ub(ce,J,ee,Ve,!1),Be!==null&&Ct!==null&&ub(ce,Ct,Be,Ve,!0)}}e:{if(J=Z?gt(Z):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var we=x0;else if(cn(J))if(C0)we=eD;else{we=ZC;var Je=WC}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&Nu(Z.elementType)&&(we=x0):we=JC;if(we&&(we=we(i,Z))){Wi(ce,we,l,se);break e}Je&&Je(i,J,Z),i==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&Ds(J,"number",J.value)}switch(Je=Z?gt(Z):window,i){case"focusin":(cn(Je)||Je.contentEditable==="true")&&(ol=Je,bp=Z,zu=null);break;case"focusout":zu=bp=ol=null;break;case"mousedown":wp=!0;break;case"contextmenu":case"mouseup":case"dragend":wp=!1,L0(ce,l,se);break;case"selectionchange":if(nD)break;case"keydown":case"keyup":L0(ce,l,se)}var Ne;if(Si)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ot?re(i,l)&&(Le="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(E&&l.locale!=="ko"&&(ot||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ot&&(Ne=Pu()):(Ei=se,Ns="value"in Ei?Ei.value:Ei.textContent,ot=!0)),Je=Kf(Z,Le),0<Je.length&&(Le=new Vu(Le,i,null,l,se),ce.push({event:Le,listeners:Je}),Ne?Le.data=Ne:(Ne=ye(l),Ne!==null&&(Le.data=Ne)))),(Ne=_?un(i,l):lt(i,l))&&(Le=Kf(Z,"onBeforeInput"),0<Le.length&&(Je=new Vu("onBeforeInput","beforeinput",null,l,se),ce.push({event:Je,listeners:Le}),Je.data=Ne)),UD(ce,i,Z,l,se)}ob(ce,s)})}function pc(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Kf(i,s){for(var l=s+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=La(i,l),m!=null&&c.unshift(pc(i,m,g)),m=La(i,s),m!=null&&c.push(pc(i,m,g))),i.tag===3)return c;i=i.return}return[]}function Nl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ub(i,s,l,c,m){for(var g=s._reactName,b=[];l!==null&&l!==c;){var A=l,L=A.alternate,Z=A.stateNode;if(A=A.tag,L!==null&&L===c)break;A!==5&&A!==26&&A!==27||Z===null||(L=Z,m?(Z=La(l,g),Z!=null&&b.unshift(pc(l,Z,L))):m||(Z=La(l,g),Z!=null&&b.push(pc(l,Z,L)))),l=l.return}b.length!==0&&i.push({event:s,listeners:b})}var FD=/\r\n?/g,qD=/\u0000|\uFFFD/g;function cb(i){return(typeof i=="string"?i:""+i).replace(FD,`
`).replace(qD,"")}function hb(i,s){return s=cb(s),cb(i)===s}function Yf(){}function xt(i,s,l,c,m,g){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Dr(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Dr(i,""+c);break;case"className":tt(i,"class",c);break;case"tabIndex":tt(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":tt(i,l,c);break;case"style":Du(i,c,g);break;case"data":if(s!=="object"){tt(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Zo(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&xt(i,s,"name",m.name,m,null),xt(i,s,"formEncType",m.formEncType,m,null),xt(i,s,"formMethod",m.formMethod,m,null),xt(i,s,"formTarget",m.formTarget,m,null)):(xt(i,s,"encType",m.encType,m,null),xt(i,s,"method",m.method,m,null),xt(i,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Zo(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Yf);break;case"onScroll":c!=null&&rt("scroll",i);break;case"onScrollEnd":c!=null&&rt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Zo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":rt("beforetoggle",i),rt("toggle",i),or(i,"popover",c);break;case"xlinkActuate":at(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":at(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":at(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":at(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":at(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":at(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":at(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":at(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":at(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":or(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=pp.get(l)||l,or(i,l,c))}}function $g(i,s,l,c,m,g){switch(l){case"style":Du(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?Dr(i,c):(typeof c=="number"||typeof c=="bigint")&&Dr(i,""+c);break;case"onScroll":c!=null&&rt("scroll",i);break;case"onScrollEnd":c!=null&&rt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Yf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),g=i[Te]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(s,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,c,m);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):or(i,l,c)}}}function Cn(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",i),rt("load",i);var c=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(i,s,g,b,l,null)}}m&&xt(i,s,"srcSet",l.srcSet,l,null),c&&xt(i,s,"src",l.src,l,null);return;case"input":rt("invalid",i);var A=g=b=m=null,L=null,Z=null;for(c in l)if(l.hasOwnProperty(c)){var se=l[c];if(se!=null)switch(c){case"name":m=se;break;case"type":b=se;break;case"checked":L=se;break;case"defaultChecked":Z=se;break;case"value":g=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:xt(i,s,c,se,l,null)}}Ma(i,g,A,L,Z,b,m,!1),Wo(i);return;case"select":rt("invalid",i),c=b=g=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":g=A;break;case"defaultValue":b=A;break;case"multiple":c=A;default:xt(i,s,m,A,l,null)}s=g,l=b,i.multiple=!!c,s!=null?Gi(i,!!c,s,!1):l!=null&&Gi(i,!!c,l,!0);return;case"textarea":rt("invalid",i),g=m=c=null;for(b in l)if(l.hasOwnProperty(b)&&(A=l[b],A!=null))switch(b){case"value":c=A;break;case"defaultValue":m=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:xt(i,s,b,A,l,null)}ka(i,c,m,g),Wo(i);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:xt(i,s,L,c,l,null)}return;case"dialog":rt("beforetoggle",i),rt("toggle",i),rt("cancel",i),rt("close",i);break;case"iframe":case"object":rt("load",i);break;case"video":case"audio":for(c=0;c<mc.length;c++)rt(mc[c],i);break;case"image":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"embed":case"source":case"link":rt("error",i),rt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(c=l[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:xt(i,s,Z,c,l,null)}return;default:if(Nu(s)){for(se in l)l.hasOwnProperty(se)&&(c=l[se],c!==void 0&&$g(i,s,se,c,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(c=l[A],c!=null&&xt(i,s,A,c,l,null))}function HD(i,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,b=null,A=null,L=null,Z=null,se=null;for(ee in l){var ce=l[ee];if(l.hasOwnProperty(ee)&&ce!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=ce;default:c.hasOwnProperty(ee)||xt(i,s,ee,null,c,ce)}}for(var J in c){var ee=c[J];if(ce=l[J],c.hasOwnProperty(J)&&(ee!=null||ce!=null))switch(J){case"type":g=ee;break;case"name":m=ee;break;case"checked":Z=ee;break;case"defaultChecked":se=ee;break;case"value":b=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:ee!==ce&&xt(i,s,J,ee,c,ce)}}ur(i,b,A,L,Z,se,g,m);return;case"select":ee=b=A=J=null;for(g in l)if(L=l[g],l.hasOwnProperty(g)&&L!=null)switch(g){case"value":break;case"multiple":ee=L;default:c.hasOwnProperty(g)||xt(i,s,g,null,c,L)}for(m in c)if(g=c[m],L=l[m],c.hasOwnProperty(m)&&(g!=null||L!=null))switch(m){case"value":J=g;break;case"defaultValue":A=g;break;case"multiple":b=g;default:g!==L&&xt(i,s,m,g,c,L)}s=A,l=b,c=ee,J!=null?Gi(i,!!l,J,!1):!!c!=!!l&&(s!=null?Gi(i,!!l,s,!0):Gi(i,!!l,l?[]:"",!1));return;case"textarea":ee=J=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:xt(i,s,A,null,c,m)}for(b in c)if(m=c[b],g=l[b],c.hasOwnProperty(b)&&(m!=null||g!=null))switch(b){case"value":J=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&xt(i,s,b,m,c,g)}At(i,J,ee);return;case"option":for(var Be in l)if(J=l[Be],l.hasOwnProperty(Be)&&J!=null&&!c.hasOwnProperty(Be))switch(Be){case"selected":i.selected=!1;break;default:xt(i,s,Be,null,c,J)}for(L in c)if(J=c[L],ee=l[L],c.hasOwnProperty(L)&&J!==ee&&(J!=null||ee!=null))switch(L){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:xt(i,s,L,J,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in l)J=l[Ve],l.hasOwnProperty(Ve)&&J!=null&&!c.hasOwnProperty(Ve)&&xt(i,s,Ve,null,c,J);for(Z in c)if(J=c[Z],ee=l[Z],c.hasOwnProperty(Z)&&J!==ee&&(J!=null||ee!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:xt(i,s,Z,J,c,ee)}return;default:if(Nu(s)){for(var Ct in l)J=l[Ct],l.hasOwnProperty(Ct)&&J!==void 0&&!c.hasOwnProperty(Ct)&&$g(i,s,Ct,void 0,c,J);for(se in c)J=c[se],ee=l[se],!c.hasOwnProperty(se)||J===ee||J===void 0&&ee===void 0||$g(i,s,se,J,c,ee);return}}for(var $ in l)J=l[$],l.hasOwnProperty($)&&J!=null&&!c.hasOwnProperty($)&&xt(i,s,$,null,c,J);for(ce in c)J=c[ce],ee=l[ce],!c.hasOwnProperty(ce)||J===ee||J==null&&ee==null||xt(i,s,ce,J,c,ee)}var Kg=null,Yg=null;function Qf(i){return i.nodeType===9?i:i.ownerDocument}function fb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mb(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Qg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xg=null;function GD(){var i=window.event;return i&&i.type==="popstate"?i===Xg?!1:(Xg=i,!0):(Xg=null,!1)}var pb=typeof setTimeout=="function"?setTimeout:void 0,$D=typeof clearTimeout=="function"?clearTimeout:void 0,gb=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof gb<"u"?function(i){return gb.resolve(null).then(i).catch(YD)}:pb;function YD(i){setTimeout(function(){throw i})}function Ks(i){return i==="head"}function yb(i,s){var l=s,c=0,m=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<c&&8>c){l=c;var b=i.ownerDocument;if(l&1&&gc(b.documentElement),l&2&&gc(b.body),l&4)for(l=b.head,gc(l),b=l.firstChild;b;){var A=b.nextSibling,L=b.nodeName;b[Oe]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=A}}if(m===0){i.removeChild(g),Sc(s);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:c=l.charCodeAt(0)-48;else c=0;l=g}while(l);Sc(s)}function Wg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Wg(l),Ge(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function QD(i,s,l,c){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Oe])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=ri(i.nextSibling),i===null)break}return null}function XD(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ri(i.nextSibling),i===null))return null;return i}function Zg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function WD(i,s){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function ri(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Jg=null;function _b(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}function vb(i,s,l){switch(s=Qf(l),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function gc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ge(i)}var Br=new Map,Eb=new Set;function Xf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=fe.d;fe.d={f:ZD,r:JD,D:eN,C:tN,L:nN,m:rN,X:sN,S:iN,M:aN};function ZD(){var i=cs.f(),s=zf();return i||s}function JD(i){var s=Dt(i);s!==null&&s.tag===5&&s.type==="form"?jE(s):cs.r(i)}var Ol=typeof document>"u"?null:document;function Tb(i,s,l){var c=Ol;if(c&&typeof s=="string"&&s){var m=rn(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Eb.has(m)||(Eb.add(m),i={rel:i,crossOrigin:l,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),Cn(s,"link",i),$e(s),c.head.appendChild(s)))}}function eN(i){cs.D(i),Tb("dns-prefetch",i,null)}function tN(i,s){cs.C(i,s),Tb("preconnect",i,s)}function nN(i,s,l){cs.L(i,s,l);var c=Ol;if(c&&i&&s){var m='link[rel="preload"][as="'+rn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+rn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+rn(l.imageSizes)+'"]')):m+='[href="'+rn(i)+'"]';var g=m;switch(s){case"style":g=Pl(i);break;case"script":g=Ml(i)}Br.has(g)||(i=y({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),Br.set(g,i),c.querySelector(m)!==null||s==="style"&&c.querySelector(yc(g))||s==="script"&&c.querySelector(_c(g))||(s=c.createElement("link"),Cn(s,"link",i),$e(s),c.head.appendChild(s)))}}function rN(i,s){cs.m(i,s);var l=Ol;if(l&&i){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+rn(c)+'"][href="'+rn(i)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ml(i)}if(!Br.has(g)&&(i=y({rel:"modulepreload",href:i},s),Br.set(g,i),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_c(g)))return}c=l.createElement("link"),Cn(c,"link",i),$e(c),l.head.appendChild(c)}}}function iN(i,s,l){cs.S(i,s,l);var c=Ol;if(c&&i){var m=Ze(c).hoistableStyles,g=Pl(i);s=s||"default";var b=m.get(g);if(!b){var A={loading:0,preload:null};if(b=c.querySelector(yc(g)))A.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},l),(l=Br.get(g))&&ey(i,l);var L=b=c.createElement("link");$e(L),Cn(L,"link",i),L._p=new Promise(function(Z,se){L.onload=Z,L.onerror=se}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Wf(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:A},m.set(g,b)}}}function sN(i,s){cs.X(i,s);var l=Ol;if(l&&i){var c=Ze(l).hoistableScripts,m=Ml(i),g=c.get(m);g||(g=l.querySelector(_c(m)),g||(i=y({src:i,async:!0},s),(s=Br.get(m))&&ty(i,s),g=l.createElement("script"),$e(g),Cn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function aN(i,s){cs.M(i,s);var l=Ol;if(l&&i){var c=Ze(l).hoistableScripts,m=Ml(i),g=c.get(m);g||(g=l.querySelector(_c(m)),g||(i=y({src:i,async:!0,type:"module"},s),(s=Br.get(m))&&ty(i,s),g=l.createElement("script"),$e(g),Cn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function bb(i,s,l,c){var m=(m=ke.current)?Xf(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Pl(l.href),l=Ze(m).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Pl(l.href);var g=Ze(m).hoistableStyles,b=g.get(i);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=m.querySelector(yc(i)))&&!g._p&&(b.instance=g,b.state.loading=5),Br.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Br.set(i,l),g||oN(m,i,l,b.state))),s&&c===null)throw Error(r(528,""));return b}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ml(l),l=Ze(m).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Pl(i){return'href="'+rn(i)+'"'}function yc(i){return'link[rel="stylesheet"]['+i+"]"}function wb(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function oN(i,s,l,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Cn(s,"link",l),$e(s),i.head.appendChild(s))}function Ml(i){return'[src="'+rn(i)+'"]'}function _c(i){return"script[async]"+i}function Sb(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+rn(l.href)+'"]');if(c)return s.instance=c,$e(c),c;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),$e(c),Cn(c,"style",m),Wf(c,l.precedence,i),s.instance=c;case"stylesheet":m=Pl(l.href);var g=i.querySelector(yc(m));if(g)return s.state.loading|=4,s.instance=g,$e(g),g;c=wb(l),(m=Br.get(m))&&ey(c,m),g=(i.ownerDocument||i).createElement("link"),$e(g);var b=g;return b._p=new Promise(function(A,L){b.onload=A,b.onerror=L}),Cn(g,"link",c),s.state.loading|=4,Wf(g,l.precedence,i),s.instance=g;case"script":return g=Ml(l.src),(m=i.querySelector(_c(g)))?(s.instance=m,$e(m),m):(c=l,(m=Br.get(g))&&(c=y({},l),ty(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),$e(m),Cn(m,"link",c),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Wf(c,l.precedence,i));return s.instance}function Wf(i,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,b=0;b<c.length;b++){var A=c[b];if(A.dataset.precedence===s)g=A;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function ey(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ty(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Zf=null;function Rb(i,s,l){if(Zf===null){var c=new Map,m=Zf=new Map;m.set(l,c)}else m=Zf,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var g=l[m];if(!(g[Oe]||g[pe]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(s)||"";b=i+b;var A=c.get(b);A?A.push(g):c.set(b,[g])}}return c}function Ab(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function lN(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ib(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var vc=null;function uN(){}function cN(i,s,l){if(vc===null)throw Error(r(475));var c=vc;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=Pl(l.href),g=i.querySelector(yc(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=Jf.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=g,$e(g);return}g=i.ownerDocument||i,l=wb(l),(m=Br.get(m))&&ey(l,m),g=g.createElement("link"),$e(g);var b=g;b._p=new Promise(function(A,L){b.onload=A,b.onerror=L}),Cn(g,"link",l),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Jf.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function hN(){if(vc===null)throw Error(r(475));var i=vc;return i.stylesheets&&i.count===0&&ny(i,i.stylesheets),0<i.count?function(s){var l=setTimeout(function(){if(i.stylesheets&&ny(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Jf(){if(this.count--,this.count===0){if(this.stylesheets)ny(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ed=null;function ny(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ed=new Map,s.forEach(fN,i),ed=null,Jf.call(i))}function fN(i,s){if(!(s.state.loading&4)){var l=ed.get(i);if(l)var c=l.get(null);else{l=new Map,ed.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var b=m[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),c=b)}c&&l.set(null,c)}m=s.instance,b=m.getAttribute("data-precedence"),g=l.get(b)||c,g===c&&l.set(null,m),l.set(b,m),this.count++,c=Jf.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var Ec={$$typeof:k,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function dN(i,s,l,c,m,g,b,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function xb(i,s,l,c,m,g,b,A,L,Z,se,ce){return i=new dN(i,s,l,b,A,L,Z,ce),s=1,g===!0&&(s|=24),g=hr(3,null,null,s),i.current=g,g.stateNode=i,s=Lp(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:s},zp(g),i}function Cb(i){return i?(i=hl,i):hl}function Db(i,s,l,c,m,g){m=Cb(m),c.context===null?c.context=m:c.pendingContext=m,c=Ms(s),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=ks(i,c,s),l!==null&&(gr(l,i,s),Xu(l,i,s))}function Nb(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function ry(i,s){Nb(i,s),(i=i.alternate)&&Nb(i,s)}function Ob(i){if(i.tag===13){var s=cl(i,67108864);s!==null&&gr(s,i,67108864),ry(i,67108864)}}var td=!0;function mN(i,s,l,c){var m=ne.T;ne.T=null;var g=fe.p;try{fe.p=2,iy(i,s,l,c)}finally{fe.p=g,ne.T=m}}function pN(i,s,l,c){var m=ne.T;ne.T=null;var g=fe.p;try{fe.p=8,iy(i,s,l,c)}finally{fe.p=g,ne.T=m}}function iy(i,s,l,c){if(td){var m=sy(c);if(m===null)Gg(i,s,c,nd,l),Mb(i,c);else if(yN(m,i,s,l,c))c.stopPropagation();else if(Mb(i,c),s&4&&-1<gN.indexOf(i)){for(;m!==null;){var g=Dt(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Zn(g.pendingLanes);if(b!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var L=1<<31-gn(b);A.entanglements[1]|=L,b&=~L}Di(g),(bt&6)===0&&(jf=en()+500,dc(0))}}break;case 13:A=cl(g,2),A!==null&&gr(A,g,2),zf(),ry(g,2)}if(g=sy(c),g===null&&Gg(i,s,c,nd,l),g===m)break;m=g}m!==null&&c.stopPropagation()}else Gg(i,s,c,null,l)}}function sy(i){return i=Nr(i),ay(i)}var nd=null;function ay(i){if(nd=null,i=mt(i),i!==null){var s=o(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=u(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return nd=i,null}function Pb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case Bi:return 2;case hi:return 8;case Rn:case Xr:return 32;case Wr:return 268435456;default:return 32}default:return 32}}var oy=!1,Ys=null,Qs=null,Xs=null,Tc=new Map,bc=new Map,Ws=[],gN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mb(i,s){switch(i){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Tc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(s.pointerId)}}function wc(i,s,l,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},s!==null&&(s=Dt(s),s!==null&&Ob(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function yN(i,s,l,c,m){switch(s){case"focusin":return Ys=wc(Ys,i,s,l,c,m),!0;case"dragenter":return Qs=wc(Qs,i,s,l,c,m),!0;case"mouseover":return Xs=wc(Xs,i,s,l,c,m),!0;case"pointerover":var g=m.pointerId;return Tc.set(g,wc(Tc.get(g)||null,i,s,l,c,m)),!0;case"gotpointercapture":return g=m.pointerId,bc.set(g,wc(bc.get(g)||null,i,s,l,c,m)),!0}return!1}function kb(i){var s=mt(i.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){i.blockedOn=s,te(i.priority,function(){if(l.tag===13){var c=pr();c=gi(c);var m=cl(l,c);m!==null&&gr(m,l,c),ry(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function rd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=sy(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);$i=c,l.target.dispatchEvent(c),$i=null}else return s=Dt(l),s!==null&&Ob(s),i.blockedOn=l,!1;s.shift()}return!0}function Vb(i,s,l){rd(i)&&l.delete(s)}function _N(){oy=!1,Ys!==null&&rd(Ys)&&(Ys=null),Qs!==null&&rd(Qs)&&(Qs=null),Xs!==null&&rd(Xs)&&(Xs=null),Tc.forEach(Vb),bc.forEach(Vb)}function id(i,s){i.blockedOn===s&&(i.blockedOn=null,oy||(oy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_N)))}var sd=null;function Lb(i){sd!==i&&(sd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sd===i&&(sd=null);for(var s=0;s<i.length;s+=3){var l=i[s],c=i[s+1],m=i[s+2];if(typeof c!="function"){if(ay(c||l)===null)continue;break}var g=Dt(l);g!==null&&(i.splice(s,3),s-=3,ag(g,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function Sc(i){function s(L){return id(L,i)}Ys!==null&&id(Ys,i),Qs!==null&&id(Qs,i),Xs!==null&&id(Xs,i),Tc.forEach(s),bc.forEach(s);for(var l=0;l<Ws.length;l++){var c=Ws[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Ws.length&&(l=Ws[0],l.blockedOn===null);)kb(l),l.blockedOn===null&&Ws.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],g=l[c+1],b=m[Te]||null;if(typeof g=="function")b||Lb(l);else if(b){var A=null;if(g&&g.hasAttribute("formAction")){if(m=g,b=g[Te]||null)A=b.formAction;else if(ay(m)!==null)continue}else A=b.action;typeof A=="function"?l[c+1]=A:(l.splice(c,3),c-=3),Lb(l)}}}function ly(i){this._internalRoot=i}ad.prototype.render=ly.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var l=s.current,c=pr();Db(l,c,i,s,null,null)},ad.prototype.unmount=ly.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Db(i.current,2,null,i,null,null),zf(),s[Ae]=null}};function ad(i){this._internalRoot=i}ad.prototype.unstable_scheduleHydration=function(i){if(i){var s=Y();i={blockedOn:null,target:i,priority:s};for(var l=0;l<Ws.length&&s!==0&&s<Ws[l].priority;l++);Ws.splice(l,0,i),l===0&&kb(i)}};var Ub=e.version;if(Ub!=="19.1.0")throw Error(r(527,Ub,"19.1.0"));fe.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var vN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Se=od.inject(vN),Ye=od}catch{}}return Ac.createRoot=function(i,s){if(!a(i))throw Error(r(299));var l=!1,c="",m=JE,g=eT,b=tT,A=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=xb(i,1,!1,null,null,l,c,m,g,b,A,null),i[Ae]=s.current,Hg(i),new ly(s)},Ac.hydrateRoot=function(i,s,l){if(!a(i))throw Error(r(299));var c=!1,m="",g=JE,b=eT,A=tT,L=null,Z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks),l.formState!==void 0&&(Z=l.formState)),s=xb(i,1,!0,s,l??null,c,m,g,b,A,L,Z),s.context=Cb(null),l=s.current,c=pr(),c=gi(c),m=Ms(c),m.callback=null,ks(l,m,c),l=c,s.current.lanes=l,Ar(s,l),Di(s),i[Ae]=s.current,Hg(i),new ad(s)},Ac.version="19.1.0",Ac}var Yb;function xN(){if(Yb)return cy.exports;Yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cy.exports=IN(),cy.exports}var CN=xN(),R=q_();const We=Sm(R);var QR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qb=We.createContext&&We.createContext(QR),DN=["attr","size","title"];function NN(n,e){if(n==null)return{};var t=ON(n,e),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)r=o[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ON(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Bd(){return Bd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bd.apply(this,arguments)}function Xb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function zd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xb(Object(t),!0).forEach(function(r){PN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PN(n,e,t){return e=MN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MN(n){var e=kN(n,"string");return typeof e=="symbol"?e:e+""}function kN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XR(n){return n&&n.map((e,t)=>We.createElement(e.tag,zd({key:t},e.attr),XR(e.child)))}function vu(n){return e=>We.createElement(VN,Bd({attr:zd({},n.attr)},e),XR(n.child))}function VN(n){var e=t=>{var{attr:r,size:a,title:o}=n,u=NN(n,DN),h=a||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),We.createElement("svg",Bd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:f,style:zd(zd({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&We.createElement("title",null,o),n.children)};return Qb!==void 0?We.createElement(Qb.Consumer,null,t=>e(t)):e(QR)}function LN(n){return vu({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 1a2 2 0 0 1 2 2v2H6V3a2 2 0 0 1 2-2m3 4V3a3 3 0 1 0-6 0v2H3.36a1.5 1.5 0 0 0-1.483 1.277L.85 13.13A2.5 2.5 0 0 0 3.322 16h9.355a2.5 2.5 0 0 0 2.473-2.87l-1.028-6.853A1.5 1.5 0 0 0 12.64 5zm-1 1v1.5a.5.5 0 0 0 1 0V6h1.639a.5.5 0 0 1 .494.426l1.028 6.851A1.5 1.5 0 0 1 12.678 15H3.322a1.5 1.5 0 0 1-1.483-1.723l1.028-6.851A.5.5 0 0 1 3.36 6H5v1.5a.5.5 0 1 0 1 0V6z"},child:[]}]})(n)}function UN(n){return vu({attr:{version:"1.1",id:"search",x:"0px",y:"0px",viewBox:"0 0 24 24",style:"enable-background:new 0 0 24 24;"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:`M20.031,20.79c0.46,0.46,1.17-0.25,0.71-0.7l-3.75-3.76c1.27-1.41,2.04-3.27,2.04-5.31
		c0-4.39-3.57-7.96-7.96-7.96s-7.96,3.57-7.96,7.96c0,4.39,3.57,7.96,7.96,7.96c1.98,0,3.81-0.73,5.21-1.94L20.031,20.79z
		 M4.11,11.02c0-3.84,3.13-6.96,6.96-6.96c3.84,0,6.96,3.12,6.96,6.96c0,3.84-3.12,6.96-6.96,6.96C7.24,17.98,4.11,14.86,4.11,11.02
		z`},child:[]}]}]})(n)}function jN(n){return vu({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(n)}function WR(n){return vu({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFCDD2",d:"M34,9c-4.2,0-7.9,2.1-10,5.4C21.9,11.1,18.2,9,14,9C7.4,9,2,14.4,2,21c0,11.9,22,24,22,24s22-12,22-24 C46,14.4,40.6,9,34,9z"},child:[]}]})(n)}function BN(n){return vu({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#F44336",d:"M34,9c-4.2,0-7.9,2.1-10,5.4C21.9,11.1,18.2,9,14,9C7.4,9,2,14.4,2,21c0,11.9,22,24,22,24s22-12,22-24 C46,14.4,40.6,9,34,9z"},child:[]}]})(n)}function zN(n){return vu({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.703 0c-4.99 0-5.927 7.111-3.12 7.111 2.81 0 8.113-7.111 3.12-7.111M11.99.872q-.119-.001-.25.016c-2.811.364-1.82 5.25-.324 5.34 1.449.09 3.032-5.347.574-5.356M7.123 2.803a1.4 1.4 0 0 0-.488.114c-2.259.933-.344 4.776.921 4.519 1.168-.24 1.319-4.671-.433-4.632Zm-3.6 3.016a1.05 1.05 0 0 0-.634.215c-1.807 1.248.607 4.269 1.671 3.799.93-.41.338-3.967-1.037-4.014m10.032 2.309c-3.835.033-8.716 1.978-9.567 5.784C3.044 18.14 7.875 24 12.915 24c2.48 0 5.34-2.24 5.875-5.077.409-2.163-4.81-1.295-4.623.137.225 1.715-1.258 2.561-2.711 1.454-4.623-3.52 7.658-5.276 6.847-10.086-.263-1.56-2.29-2.322-4.748-2.301Z"},child:[]}]})(n)}const FN=()=>{};var Wb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},qN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[r++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],u=n[t++],h=n[t++],f=((a&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},JR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const o=n[a],u=a+1<n.length,h=u?n[a+1]:0,f=a+2<n.length,p=f?n[a+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,S=p&63;f||(S=64,u||(T=64)),r.push(t[y],t[v],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||p==null||v==null)throw new HN;const T=o<<2|h>>4;if(r.push(T),p!==64){const S=h<<4&240|p>>2;if(r.push(S),v!==64){const C=p<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GN=function(n){const e=ZR(n);return JR.encodeByteArray(e,!0)},Fd=function(n){return GN(n).replace(/\./g,"")},eA=function(n){try{return JR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=()=>$N().__FIREBASE_DEFAULTS__,YN=()=>{if(typeof process>"u"||typeof Wb>"u")return;const n=Wb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eA(n[1]);return e&&JSON.parse(e)},Rm=()=>{try{return FN()||KN()||YN()||QN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tA=n=>{var e,t;return(t=(e=Rm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},XN=n=>{const e=tA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nA=()=>{var n;return(n=Rm())===null||n===void 0?void 0:n.config},rA=n=>{var e;return(e=Rm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WN=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fd(JSON.stringify(t)),Fd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function e2(){var n;const e=(n=Rm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function n2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r2(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sA(){return!e2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H_(){try{return typeof indexedDB=="object"}catch{return!1}}function aA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function i2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="FirebaseError";class Yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=s2,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qo.prototype.create)}}class qo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?a2(o,r):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Yr(a,h,r)}}function a2(n,e){return n.replace(o2,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const o2=/\{\$([^}]+)}/g;function l2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ya(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const o=n[a],u=e[a];if(Zb(o)&&Zb(u)){if(!ya(o,u))return!1}else if(o!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Zb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,o]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Bc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function u2(n,e){const t=new c2(n,e);return t.subscribe.bind(t)}class c2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");h2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=py),a.error===void 0&&(a.error=py),a.complete===void 0&&(a.complete=py);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function py(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1e3,d2=2,m2=4*60*60*1e3,p2=.5;function Jb(n,e=f2,t=d2){const r=e*Math.pow(t,n),a=Math.round(p2*r*(Math.random()-.5)*2);return Math.min(m2,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n){return n&&n._delegate?n._delegate:n}class Hr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g2=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new WN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_2(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});r.resolve(o)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function y2(n){return n===ao?void 0:n}function _2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new g2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const E2={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},T2=it.INFO,b2={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},w2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=b2[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=T2,this._logHandler=w2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const S2=(n,e)=>e.some(t=>n instanceof t);let ew,tw;function R2(){return ew||(ew=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A2(){return tw||(tw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oA=new WeakMap,Ky=new WeakMap,lA=new WeakMap,gy=new WeakMap,G_=new WeakMap;function I2(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(fa(n.result)),a()},u=()=>{r(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&oA.set(t,n)}).catch(()=>{}),G_.set(e,n),e}function x2(n){if(Ky.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),a()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});Ky.set(n,e)}let Yy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ky.get(n);if(e==="objectStoreNames")return n.objectStoreNames||lA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function C2(n){Yy=n(Yy)}function D2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(yy(this),e,...t);return lA.set(r,e.sort?e.sort():[e]),fa(r)}:A2().includes(n)?function(...e){return n.apply(yy(this),e),fa(oA.get(this))}:function(...e){return fa(n.apply(yy(this),e))}}function N2(n){return typeof n=="function"?D2(n):(n instanceof IDBTransaction&&x2(n),S2(n,R2())?new Proxy(n,Yy):n)}function fa(n){if(n instanceof IDBRequest)return I2(n);if(gy.has(n))return gy.get(n);const e=N2(n);return e!==n&&(gy.set(n,e),G_.set(e,n)),e}const yy=n=>G_.get(n);function uA(n,e,{blocked:t,upgrade:r,blocking:a,terminated:o}={}){const u=indexedDB.open(n,e),h=fa(u);return r&&u.addEventListener("upgradeneeded",f=>{r(fa(u.result),f.oldVersion,f.newVersion,fa(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const O2=["get","getKey","getAll","getAllKeys","count"],P2=["put","add","delete","clear"],_y=new Map;function nw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=P2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||O2.includes(t)))return;const o=async function(u,...h){const f=this.transaction(u,a?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&f.done]))[0]};return _y.set(e,o),o}C2(n=>({...n,get:(e,t,r)=>nw(e,t)||n.get(e,t,r),has:(e,t)=>!!nw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(k2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function k2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qy="@firebase/app",rw="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Am("@firebase/app"),V2="@firebase/app-compat",L2="@firebase/analytics-compat",U2="@firebase/analytics",j2="@firebase/app-check-compat",B2="@firebase/app-check",z2="@firebase/auth",F2="@firebase/auth-compat",q2="@firebase/database",H2="@firebase/data-connect",G2="@firebase/database-compat",$2="@firebase/functions",K2="@firebase/functions-compat",Y2="@firebase/installations",Q2="@firebase/installations-compat",X2="@firebase/messaging",W2="@firebase/messaging-compat",Z2="@firebase/performance",J2="@firebase/performance-compat",eO="@firebase/remote-config",tO="@firebase/remote-config-compat",nO="@firebase/storage",rO="@firebase/storage-compat",iO="@firebase/firestore",sO="@firebase/vertexai",aO="@firebase/firestore-compat",oO="firebase",lO="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="[DEFAULT]",uO={[Qy]:"fire-core",[V2]:"fire-core-compat",[U2]:"fire-analytics",[L2]:"fire-analytics-compat",[B2]:"fire-app-check",[j2]:"fire-app-check-compat",[z2]:"fire-auth",[F2]:"fire-auth-compat",[q2]:"fire-rtdb",[H2]:"fire-data-connect",[G2]:"fire-rtdb-compat",[$2]:"fire-fn",[K2]:"fire-fn-compat",[Y2]:"fire-iid",[Q2]:"fire-iid-compat",[X2]:"fire-fcm",[W2]:"fire-fcm-compat",[Z2]:"fire-perf",[J2]:"fire-perf-compat",[eO]:"fire-rc",[tO]:"fire-rc-compat",[nO]:"fire-gcs",[rO]:"fire-gcs-compat",[iO]:"fire-fst",[aO]:"fire-fst-compat",[sO]:"fire-vertex","fire-js":"fire-js",[oO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Map,cO=new Map,Wy=new Map;function iw(n,e){try{n.container.addComponent(e)}catch(t){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ui(n){const e=n.name;if(Wy.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;Wy.set(e,n);for(const t of qd.values())iw(t,n);for(const t of cO.values())iw(t,n);return!0}function wa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},da=new qo("app","Firebase",hO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=lO;function cA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xy,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw da.create("bad-app-name",{appName:String(a)});if(t||(t=nA()),!t)throw da.create("no-options");const o=qd.get(a);if(o){if(ya(t,o.options)&&ya(r,o.config))return o;throw da.create("duplicate-app",{appName:a})}const u=new v2(a);for(const f of Wy.values())u.addComponent(f);const h=new fO(t,r,u);return qd.set(a,h),h}function $_(n=Xy){const e=qd.get(n);if(!e&&n===Xy&&nA())return cA();if(!e)throw da.create("no-app",{appName:n});return e}function ir(n,e,t){var r;let a=(r=uO[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(h.join(" "));return}ui(new Hr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="firebase-heartbeat-database",mO=1,ah="firebase-heartbeat-store";let vy=null;function hA(){return vy||(vy=uA(dO,mO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ah)}catch(t){console.warn(t)}}}}).catch(n=>{throw da.create("idb-open",{originalErrorMessage:n.message})})),vy}async function pO(n){try{const t=(await hA()).transaction(ah),r=await t.objectStore(ah).get(fA(n));return await t.done,r}catch(e){if(e instanceof Yr)ys.warn(e.message);else{const t=da.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(t.message)}}}async function sw(n,e){try{const r=(await hA()).transaction(ah,"readwrite");await r.objectStore(ah).put(e,fA(n)),await r.done}catch(t){if(t instanceof Yr)ys.warn(t.message);else{const r=da.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ys.warn(r.message)}}}function fA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=1024,yO=30;class _O{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=aw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>yO){const u=TO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=aw(),{heartbeatsToSend:r,unsentEntries:a}=vO(this._heartbeatsCache.heartbeats),o=Fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ys.warn(t),""}}}function aw(){return new Date().toISOString().substring(0,10)}function vO(n,e=gO){const t=[];let r=n.slice();for(const a of n){const o=t.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),ow(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ow(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class EO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H_()?aA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return sw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return sw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ow(n){return Fd(JSON.stringify({version:2,heartbeats:n})).length}function TO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(n){ui(new Hr("platform-logger",e=>new M2(e),"PRIVATE")),ui(new Hr("heartbeat",e=>new _O(e),"PRIVATE")),ir(Qy,rw,n),ir(Qy,rw,"esm2017"),ir("fire-js","")}bO("");function K_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wO=dA,mA=new qo("auth","Firebase",dA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new Am("@firebase/auth");function SO(n,...e){Hd.logLevel<=it.WARN&&Hd.warn(`Auth (${Ho}): ${n}`,...e)}function bd(n,...e){Hd.logLevel<=it.ERROR&&Hd.error(`Auth (${Ho}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,...e){throw Q_(n,...e)}function oi(n,...e){return Q_(n,...e)}function Y_(n,e,t){const r=Object.assign(Object.assign({},wO()),{[e]:t});return new qo("auth","Firebase",r).create(e,{appName:n.name})}function ps(n){return Y_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RO(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gr(n,"argument-error"),Y_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Q_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return mA.create(n,...e)}function Ue(n,e,...t){if(!n)throw Q_(e,...t)}function fs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bd(e),new Error(e)}function _s(n,e){n||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function AO(){return lw()==="http:"||lw()==="https:"}function lw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AO()||iA()||"connection"in navigator)?navigator.onLine:!0}function xO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=JN()||n2()}get(){return IO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(n,e){_s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NO=new Rh(3e4,6e4);function Sa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ss(n,e,t,r,a={}){return gA(n,a,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=Sh(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},o);return t2()||(p.referrerPolicy="no-referrer"),pA.fetch()(await yA(n,n.config.apiHost,t,h),p)})}async function gA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},CO),e);try{const a=new PO(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw ld(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw ld(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw ld(n,"user-disabled",u);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Y_(n,y,p);Gr(n,y)}}catch(a){if(a instanceof Yr)throw a;Gr(n,"network-request-failed",{message:String(a)})}}async function Ah(n,e,t,r,a={}){const o=await Ss(n,e,t,r,a);return"mfaPendingCredential"in o&&Gr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function yA(n,e,t,r){const a=`${e}${t}?${r}`,o=n,u=o.config.emulator?X_(n.config,a):`${n.config.apiScheme}://${a}`;return DO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function OO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),NO.get())})}}function ld(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=oi(n,e,r);return a.customData._tokenResponse=t,a}function uw(n){return n!==void 0&&n.enterprise!==void 0}class MO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kO(n,e){return Ss(n,"GET","/v2/recaptchaConfig",Sa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(n,e){return Ss(n,"POST","/v1/accounts:delete",e)}async function Gd(n,e){return Ss(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LO(n,e=!1){const t=Pt(n),r=await t.getIdToken(e),a=W_(r);Ue(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:a,token:r,authTime:Wc(Ey(a.auth_time)),issuedAtTime:Wc(Ey(a.iat)),expirationTime:Wc(Ey(a.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ey(n){return Number(n)*1e3}function W_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bd("JWT malformed, contained fewer than 3 sections"),null;try{const a=eA(t);return a?JSON.parse(a):(bd("Failed to decode base64 JWT payload"),null)}catch(a){return bd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function cw(n){const e=W_(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Yr&&UO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function UO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(n){var e;const t=n.auth,r=await n.getIdToken(),a=await tu(n,Gd(t,{idToken:r}));Ue(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_A(o.providerUserInfo):[],h=zO(n.providerData,u),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Jy(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function BO(n){const e=Pt(n);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zO(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function _A(n){return n.map(e=>{var{providerId:t}=e,r=K_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n,e){const t=await gA(n,{},async()=>{const r=Sh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,u=await yA(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",pA.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qO(n,e){return Ss(n,"POST","/v2/accounts:revokeToken",Sa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=cw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:o}=await FO(e,t);this.updateTokensAndExpiration(r,a,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:o}=t,u=new Wl;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(Ue(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(Ue(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,o=K_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await tu(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LO(this,e)}reload(){return BO(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $d(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await tu(this,VO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,o,u,h,f,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(h=t.tenantId)!==null&&h!==void 0?h:void 0,D=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,F=(p=t.createdAt)!==null&&p!==void 0?p:void 0,B=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:k,emailVerified:K,isAnonymous:P,providerData:ie,stsTokenManager:O}=t;Ue(k&&O,e,"internal-error");const I=Wl.fromJSON(this.name,O);Ue(typeof k=="string",e,"internal-error"),Js(v,e.name),Js(T,e.name),Ue(typeof K=="boolean",e,"internal-error"),Ue(typeof P=="boolean",e,"internal-error"),Js(S,e.name),Js(C,e.name),Js(M,e.name),Js(D,e.name),Js(F,e.name),Js(B,e.name);const N=new ai({uid:k,auth:e,email:T,emailVerified:K,displayName:v,isAnonymous:P,photoURL:C,phoneNumber:S,tenantId:M,stsTokenManager:I,createdAt:F,lastLoginAt:B});return ie&&Array.isArray(ie)&&(N.providerData=ie.map(U=>Object.assign({},U))),D&&(N._redirectEventId=D),N}static async _fromIdTokenResponse(e,t,r=!1){const a=new Wl;a.updateFromServerResponse(t);const o=new ai({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await $d(o),o}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ue(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?_A(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new Wl;h.updateFromIdToken(r);const f=new ai({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Jy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;function ds(n){_s(n instanceof Function,"Expected a class definition");let e=hw.get(n);return e?(_s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vA.type="NONE";const fw=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(n,e,t){return`firebase:${n}:${e}:${t}`}class Zl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:o}=this.auth;this.fullUserKey=wd(this.userKey,a.apiKey,o),this.fullPersistenceKey=wd("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gd(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zl(ds(fw),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||ds(fw);const u=wd(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(u);if(y){let v;if(typeof y=="string"){const T=await Gd(e,{idToken:y}).catch(()=>{});if(!T)break;v=await ai._fromGetAccountInfoResponse(e,T,y)}else v=ai._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Zl(o,e,r):(o=f[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Zl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RA(e))return"Blackberry";if(AA(e))return"Webos";if(TA(e))return"Safari";if((e.includes("chrome/")||bA(e))&&!e.includes("edge/"))return"Chrome";if(SA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EA(n=dn()){return/firefox\//i.test(n)}function TA(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bA(n=dn()){return/crios\//i.test(n)}function wA(n=dn()){return/iemobile/i.test(n)}function SA(n=dn()){return/android/i.test(n)}function RA(n=dn()){return/blackberry/i.test(n)}function AA(n=dn()){return/webos/i.test(n)}function Z_(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HO(n=dn()){var e;return Z_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GO(){return r2()&&document.documentMode===10}function IA(n=dn()){return Z_(n)||SA(n)||AA(n)||RA(n)||/windows phone/i.test(n)||wA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n,e=[]){let t;switch(n){case"Browser":t=dw(dn());break;case"Worker":t=`${dw(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,h)=>{try{const f=e(o);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(n,e={}){return Ss(n,"GET","/v2/passwordPolicy",Sa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=6;class QO{constructor(e){var t,r,a,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:YO,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,o,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mw(this),this.idTokenSubscription=new mw(this),this.beforeStateQueue=new $O(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var r,a,o;if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gd(this,{idToken:e}),r=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(a=f.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ps(this));const t=e?Pt(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KO(this),t=new QO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await qO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,a);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&SO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ra(n){return Pt(n)}class mw{constructor(e){this.auth=e,this.observer=null,this.addObserver=u2(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WO(n){Im=n}function CA(n){return Im.loadJS(n)}function ZO(){return Im.recaptchaEnterpriseScript}function JO(){return Im.gapiScript}function eP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class tP{constructor(){this.enterprise=new nP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rP="recaptcha-enterprise",DA="NO_RECAPTCHA";class iP{constructor(e){this.type=rP,this.auth=Ra(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{kO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new MO(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(f=>{h(f)})})}function a(o,u,h){const f=window.grecaptcha;uw(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(DA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tP().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!t&&uw(window.grecaptcha))a(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=ZO();f.length!==0&&(f+=h),CA(f).then(()=>{a(h,o,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function pw(n,e,t,r=!1,a=!1){const o=new iP(n);let u;if(a)u=DA;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function e_(n,e,t,r,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await pw(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await pw(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n,e){const t=wa(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(ya(o,e??{}))return a;Gr(a,"already-initialized")}return t.initialize({options:e})}function aP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oP(n,e,t){const r=Ra(n);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,o=NA(e),{host:u,port:h}=lP(e),f=h===null?"":`:${h}`,p={url:`${o}//${u}${f}/`},y=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(ya(p,r.config.emulator)&&ya(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,uP()}function NA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lP(n){const e=NA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const o=a[1];return{host:o,port:gw(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:gw(u)}}}function gw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,t){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function cP(n,e){return Ss(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n,e){return Ah(n,"POST","/v1/accounts:signInWithPassword",Sa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(n,e){return Ah(n,"POST","/v1/accounts:signInWithEmailLink",Sa(n,e))}async function dP(n,e){return Ah(n,"POST","/v1/accounts:signInWithEmailLink",Sa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends J_{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new oh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new oh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e_(e,t,"signInWithPassword",hP);case"emailLink":return fP(e,{email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e_(e,r,"signUpPassword",cP);case"emailLink":return dP(e,{idToken:t,email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(n,e){return Ah(n,"POST","/v1/accounts:signInWithIdp",Sa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="http://localhost";class Co extends J_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,o=K_(t,["providerId","signInMethod"]);if(!r||!a)return null;const u=new Co(r,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Jl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jl(e,t)}buildRequest(){const e={requestUri:mP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gP(n){const e=jc(Bc(n)).link,t=e?jc(Bc(e)).deep_link_id:null,r=jc(Bc(n)).deep_link_id;return(r?jc(Bc(r)).link:null)||r||t||e||n}class ev{constructor(e){var t,r,a,o,u,h;const f=jc(Bc(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,y=(r=f.oobCode)!==null&&r!==void 0?r:null,v=pP((a=f.mode)!==null&&a!==void 0?a:null);Ue(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=gP(e);try{return new ev(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.providerId=Eu.PROVIDER_ID}static credential(e,t){return oh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ev.parseLink(t);return Ue(r,"argument-error"),oh._fromEmailAndCode(e,r.code,r.tenantId)}}Eu.PROVIDER_ID="password";Eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends tv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Ih{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.FACEBOOK_SIGN_IN_METHOD="facebook.com";sa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Ih{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends Ih{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return oa.credential(t,r)}catch{return null}}}oa.TWITTER_SIGN_IN_METHOD="twitter.com";oa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(n,e){return Ah(n,"POST","/v1/accounts:signUp",Sa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const o=await ai._fromIdTokenResponse(e,r,a),u=yw(r);return new Do({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=yw(r);return new Do({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function yw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends Yr{constructor(e,t,r,a){var o;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Kd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Kd(e,t,r,a)}}function OA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Kd._fromErrorAndOperation(n,o,e,r):o})}async function _P(n,e,t=!1){const r=await tu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Do._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(n,e,t=!1){const{auth:r}=n;if(nr(r.app))return Promise.reject(ps(r));const a="reauthenticate";try{const o=await tu(n,OA(r,a,e,n),t);Ue(o.idToken,r,"internal-error");const u=W_(o.idToken);Ue(u,r,"internal-error");const{sub:h}=u;return Ue(n.uid===h,r,"user-mismatch"),Do._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Gr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e,t=!1){if(nr(n.app))return Promise.reject(ps(n));const r="signIn",a=await OA(n,r,e),o=await Do._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(o.user),o}async function EP(n,e){return PA(Ra(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(n){const e=Ra(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TP(n,e,t){if(nr(n.app))return Promise.reject(ps(n));const r=Ra(n),u=await e_(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yP).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&MA(n),f}),h=await Do._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function bP(n,e,t){return nr(n.app)?Promise.reject(ps(n)):EP(Pt(n),Eu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MA(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n,e){return Ss(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Pt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await tu(r,wP(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function RP(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function AP(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function xh(n,e,t,r){return Pt(n).onAuthStateChanged(e,t,r)}function IP(n){return Pt(n).signOut()}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=1e3,CP=10;class VA extends kA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);GO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,CP):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},xP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}VA.type="LOCAL";const DP=VA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends kA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LA.type="SESSION";const UA=LA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new xm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:o}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(u).map(async p=>p(t.origin,o)),f=await NP(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((h,f)=>{const p=nv("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function PP(n){ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function MP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function VP(){return jA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebaseLocalStorageDb",LP=1,Qd="firebaseLocalStorage",zA="fbase_key";class Ch{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Cm(n,e){return n.transaction([Qd],e?"readwrite":"readonly").objectStore(Qd)}function UP(){const n=indexedDB.deleteDatabase(BA);return new Ch(n).toPromise()}function t_(){const n=indexedDB.open(BA,LP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Qd,{keyPath:zA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Qd)?e(r):(r.close(),await UP(),e(await t_()))})})}async function _w(n,e,t){const r=Cm(n,!0).put({[zA]:e,value:t});return new Ch(r).toPromise()}async function jP(n,e){const t=Cm(n,!1).get(e),r=await new Ch(t).toPromise();return r===void 0?null:r.value}function vw(n,e){const t=Cm(n,!0).delete(e);return new Ch(t).toPromise()}const BP=800,zP=3;class FA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await t_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xm._getInstance(VP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await MP(),!this.activeServiceWorker)return;this.sender=new OP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await t_();return await _w(e,Yd,"1"),await vw(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_w(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Cm(a,!1).getAll();return new Ch(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FA.type="LOCAL";const FP=FA;new Rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n,e){return e?ds(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends J_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qP(n){return PA(n.auth,new rv(n),n.bypassAuthState)}function HP(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),vP(t,new rv(n),n.bypassAuthState)}async function GP(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),_P(t,new rv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t,r,a,o=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qP;case"linkViaPopup":case"linkViaRedirect":return GP;case"reauthViaPopup":case"reauthViaRedirect":return HP;default:Gr(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=new Rh(2e3,1e4);async function KP(n,e,t){if(nr(n.app))return Promise.reject(oi(n,"operation-not-supported-in-this-environment"));const r=Ra(n);RO(n,e,tv);const a=qA(r,t);return new _o(r,"signInViaPopup",e,a).executeNotNull()}class _o extends HA{constructor(e,t,r,a,o){super(e,t,a,o),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$P.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="pendingRedirect",Sd=new Map;class QP extends HA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Sd.get(this.auth._key());if(!e){try{const r=await XP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Sd.set(this.auth._key(),e)}return this.bypassAuthState||Sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XP(n,e){const t=JP(e),r=ZP(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function WP(n,e){Sd.set(n._key(),e)}function ZP(n){return ds(n._redirectPersistence)}function JP(n){return wd(YP,n.config.apiKey,n.name)}async function eM(n,e,t=!1){if(nr(n.app))return Promise.reject(ps(n));const r=Ra(n),a=qA(r,e),u=await new QP(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=10*60*1e3;class nM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GA(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(oi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ew(e))}saveEventToCache(e){this.cachedEventUids.add(Ew(e)),this.lastProcessedEventTime=Date.now()}}function Ew(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(n,e={}){return Ss(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aM=/^https?/;async function oM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iM(n);for(const t of e)try{if(lM(t))return}catch{}Gr(n,"unauthorized-domain")}function lM(n){const e=Zy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!aM.test(t))return!1;if(sM.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new Rh(3e4,6e4);function Tw(){const n=ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cM(n){return new Promise((e,t)=>{var r,a,o;function u(){Tw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tw(),t(oi(n,"network-request-failed"))},timeout:uM.get()})}if(!((a=(r=ki().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=ki().gapi)===null||o===void 0)&&o.load)u();else{const h=eP("iframefcb");return ki()[h]=()=>{gapi.load?u():t(oi(n,"network-request-failed"))},CA(`${JO()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Rd=null,e})}let Rd=null;function hM(n){return Rd=Rd||cM(n),Rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new Rh(5e3,15e3),dM="__/auth/iframe",mM="emulator/auth/iframe",pM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yM(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?X_(e,mM):`https://${n.config.authDomain}/${dM}`,r={apiKey:e.apiKey,appName:n.name,v:Ho},a=gM.get(n.config.apiHost);a&&(r.eid=a);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Sh(r).slice(1)}`}async function _M(n){const e=await hM(n),t=ki().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:yM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pM,dontclear:!0},r=>new Promise(async(a,o)=>{await r.restyle({setHideOnLeave:!1});const u=oi(n,"network-request-failed"),h=ki().setTimeout(()=>{o(u)},fM.get());function f(){ki().clearTimeout(h),a(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EM=500,TM=600,bM="_blank",wM="http://localhost";class bw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SM(n,e,t,r=EM,a=TM){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},vM),{width:r.toString(),height:a.toString(),top:o,left:u}),p=dn().toLowerCase();t&&(h=bA(p)?bM:t),EA(p)&&(e=e||wM,f.scrollbars="yes");const y=Object.entries(f).reduce((T,[S,C])=>`${T}${S}=${C},`,"");if(HO(p)&&h!=="_self")return RM(e||"",h),new bw(null);const v=window.open(e||"",h,y);Ue(v,n,"popup-blocked");try{v.focus()}catch{}return new bw(v)}function RM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="__/auth/handler",IM="emulator/auth/handler",xM=encodeURIComponent("fac");async function ww(n,e,t,r,a,o){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ho,eventId:a};if(e instanceof tv){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",l2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof Ih){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),p=f?`#${xM}=${encodeURIComponent(f)}`:"";return`${CM(n)}?${Sh(h).slice(1)}${p}`}function CM({config:n}){return n.emulator?X_(n,IM):`https://${n.authDomain}/${AM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="webStorageSupport";class DM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UA,this._completeRedirectFn=eM,this._overrideRedirectResult=WP}async _openPopup(e,t,r,a){var o;_s((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await ww(e,t,r,Zy(),a);return SM(e,u,nv())}async _openRedirect(e,t,r,a){await this._originValidation(e);const o=await ww(e,t,r,Zy(),a);return PP(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(_s(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _M(e),r=new nM(e);return t.register("authEvent",a=>(Ue(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ty,{type:Ty},a=>{var o;const u=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Ty];u!==void 0&&t(!!u),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IA()||TA()||Z_()}}const NM=DM;var Sw="@firebase/auth",Rw="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MM(n){ui(new Hr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xA(n)},p=new XO(r,a,o,f);return aP(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ui(new Hr("auth-internal",e=>{const t=Ra(e.getProvider("auth").getImmediate());return(r=>new OM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Sw,Rw,PM(n)),ir(Sw,Rw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,VM=rA("authIdTokenMaxAge")||kM;let Aw=null;const LM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VM)return;const a=t==null?void 0:t.token;Aw!==a&&(Aw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function UM(n=$_()){const e=wa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sP(n,{popupRedirectResolver:NM,persistence:[FP,DP,UA]}),r=rA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=LM(o.toString());AP(t,u,()=>u(t.currentUser)),RP(t,h=>u(h))}}const a=tA("auth");return a&&oP(t,`http://${a}`),t}function jM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}WO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const o=oi("internal-error");o.customData=a,t(o)},r.type="text/javascript",r.charset="UTF-8",jM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MM("Browser");var BM="firebase",zM="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(BM,zM,"app");const $A="@firebase/installations",iv="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1e4,YA=`w:${iv}`,QA="FIS_v2",FM="https://firebaseinstallations.googleapis.com/v1",qM=60*60*1e3,HM="installations",GM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},No=new qo(HM,GM,$M);function XA(n){return n instanceof Yr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA({projectId:n}){return`${FM}/projects/${n}/installations`}function ZA(n){return{token:n.token,requestStatus:2,expiresIn:YM(n.expiresIn),creationTime:Date.now()}}async function JA(n,e){const r=(await e.json()).error;return No.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function eI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function KM(n,{refreshToken:e}){const t=eI(n);return t.append("Authorization",QM(e)),t}async function tI(n){const e=await n();return e.status>=500&&e.status<600?n():e}function YM(n){return Number(n.replace("s","000"))}function QM(n){return`${QA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=WA(n),a=eI(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:t,authVersion:QA,appId:n.appId,sdkVersion:YA},h={method:"POST",headers:a,body:JSON.stringify(u)},f=await tI(()=>fetch(r,h));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:ZA(p.authToken)}}else throw await JA("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=/^[cdef][\w-]{21}$/,n_="";function JM(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=ek(n);return ZM.test(t)?t:n_}catch{return n_}}function ek(n){return WM(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Map;function iI(n,e){const t=Dm(n);sI(t,e),tk(t,e)}function sI(n,e){const t=rI.get(n);if(t)for(const r of t)r(e)}function tk(n,e){const t=nk();t&&t.postMessage({key:n,fid:e}),rk()}let vo=null;function nk(){return!vo&&"BroadcastChannel"in self&&(vo=new BroadcastChannel("[Firebase] FID Change"),vo.onmessage=n=>{sI(n.data.key,n.data.fid)}),vo}function rk(){rI.size===0&&vo&&(vo.close(),vo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firebase-installations-database",sk=1,Oo="firebase-installations-store";let by=null;function sv(){return by||(by=uA(ik,sk,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Oo)}}})),by}async function Xd(n,e){const t=Dm(n),a=(await sv()).transaction(Oo,"readwrite"),o=a.objectStore(Oo),u=await o.get(t);return await o.put(e,t),await a.done,(!u||u.fid!==e.fid)&&iI(n,e.fid),e}async function aI(n){const e=Dm(n),r=(await sv()).transaction(Oo,"readwrite");await r.objectStore(Oo).delete(e),await r.done}async function Nm(n,e){const t=Dm(n),a=(await sv()).transaction(Oo,"readwrite"),o=a.objectStore(Oo),u=await o.get(t),h=e(u);return h===void 0?await o.delete(t):await o.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&iI(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function av(n){let e;const t=await Nm(n.appConfig,r=>{const a=ak(r),o=ok(n,a);return e=o.registrationPromise,o.installationEntry});return t.fid===n_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function ak(n){const e=n||{fid:JM(),registrationStatus:0};return oI(e)}function ok(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(No.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lk(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uk(n)}:{installationEntry:e}}async function lk(n,e){try{const t=await XM(n,e);return Xd(n.appConfig,t)}catch(t){throw XA(t)&&t.customData.serverCode===409?await aI(n.appConfig):await Xd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function uk(n){let e=await Iw(n.appConfig);for(;e.registrationStatus===1;)await nI(100),e=await Iw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await av(n);return r||t}return e}function Iw(n){return Nm(n,e=>{if(!e)throw No.create("installation-not-found");return oI(e)})}function oI(n){return ck(n)?{fid:n.fid,registrationStatus:0}:n}function ck(n){return n.registrationStatus===1&&n.registrationTime+KA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk({appConfig:n,heartbeatServiceProvider:e},t){const r=fk(n,t),a=KM(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:YA,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},f=await tI(()=>fetch(r,h));if(f.ok){const p=await f.json();return ZA(p)}else throw await JA("Generate Auth Token",f)}function fk(n,{fid:e}){return`${WA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(n,e=!1){let t;const r=await Nm(n.appConfig,o=>{if(!lI(o))throw No.create("not-registered");const u=o.authToken;if(!e&&pk(u))return o;if(u.requestStatus===1)return t=dk(n,e),o;{if(!navigator.onLine)throw No.create("app-offline");const h=yk(o);return t=mk(n,h),h}});return t?await t:r.authToken}async function dk(n,e){let t=await xw(n.appConfig);for(;t.authToken.requestStatus===1;)await nI(100),t=await xw(n.appConfig);const r=t.authToken;return r.requestStatus===0?ov(n,e):r}function xw(n){return Nm(n,e=>{if(!lI(e))throw No.create("not-registered");const t=e.authToken;return _k(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mk(n,e){try{const t=await hk(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Xd(n.appConfig,r),t}catch(t){if(XA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await aI(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Xd(n.appConfig,r)}throw t}}function lI(n){return n!==void 0&&n.registrationStatus===2}function pk(n){return n.requestStatus===2&&!gk(n)}function gk(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+qM}function yk(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function _k(n){return n.requestStatus===1&&n.requestTime+KA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(n){const e=n,{installationEntry:t,registrationPromise:r}=await av(e);return r?r.catch(console.error):ov(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(n,e=!1){const t=n;return await Tk(t),(await ov(t,e)).token}async function Tk(n){const{registrationPromise:e}=await av(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){if(!n||!n.options)throw wy("App Configuration");if(!n.name)throw wy("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw wy(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function wy(n){return No.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="installations",wk="installations-internal",Sk=n=>{const e=n.getProvider("app").getImmediate(),t=bk(e),r=wa(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Rk=n=>{const e=n.getProvider("app").getImmediate(),t=wa(e,uI).getImmediate();return{getId:()=>vk(t),getToken:a=>Ek(t,a)}};function Ak(){ui(new Hr(uI,Sk,"PUBLIC")),ui(new Hr(wk,Rk,"PRIVATE"))}Ak();ir($A,iv);ir($A,iv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="analytics",Ik="firebase_id",xk="origin",Ck=60*1e3,Dk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Am("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tr=new qo("analytics","Analytics",Nk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n){if(!n.startsWith(lv)){const e=Tr.create("invalid-gtag-resource",{gtagURL:n});return sr.warn(e.message),""}return n}function cI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Pk(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Mk(n,e){const t=Pk("firebase-js-sdk-policy",{createScriptURL:Ok}),r=document.createElement("script"),a=`${lv}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function kk(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Vk(n,e,t,r,a,o){const u=r[a];try{if(u)await e[u];else{const f=(await cI(t)).find(p=>p.measurementId===a);f&&await e[f.appId]}}catch(h){sr.error(h)}n("config",a,o)}async function Lk(n,e,t,r,a){try{let o=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await cI(t);for(const f of u){const p=h.find(v=>v.measurementId===f),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,a||{})}catch(o){sr.error(o)}}function Uk(n,e,t,r){async function a(o,...u){try{if(o==="event"){const[h,f]=u;await Lk(n,e,t,h,f)}else if(o==="config"){const[h,f]=u;await Vk(n,e,t,r,h,f)}else if(o==="consent"){const[h,f]=u;n("consent",h,f)}else if(o==="get"){const[h,f,p]=u;n("get",h,f,p)}else if(o==="set"){const[h]=u;n("set",h)}else n(o,...u)}catch(h){sr.error(h)}}return a}function jk(n,e,t,r,a){let o=function(...u){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(o=window[a]),window[a]=Uk(o,n,e,t),{gtagCore:o,wrappedGtag:window[a]}}function Bk(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(lv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=30,Fk=1e3;class qk{constructor(e={},t=Fk){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const hI=new qk;function Hk(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Gk(n){var e;const{appId:t,apiKey:r}=n,a={method:"GET",headers:Hk(r)},o=Dk.replace("{app-id}",t),u=await fetch(o,a);if(u.status!==200&&u.status!==304){let h="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(h=f.error.message)}catch{}throw Tr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function $k(n,e=hI,t){const{appId:r,apiKey:a,measurementId:o}=n.options;if(!r)throw Tr.create("no-app-id");if(!a){if(o)return{measurementId:o,appId:r};throw Tr.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new Qk;return setTimeout(async()=>{h.abort()},Ck),fI({appId:r,apiKey:a,measurementId:o},u,h,e)}async function fI(n,{throttleEndTimeMillis:e,backoffCount:t},r,a=hI){var o;const{appId:u,measurementId:h}=n;try{await Kk(r,e)}catch(f){if(h)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:u,measurementId:h};throw f}try{const f=await Gk(n);return a.deleteThrottleMetadata(u),f}catch(f){const p=f;if(!Yk(p)){if(a.deleteThrottleMetadata(u),h)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:h};throw f}const y=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?Jb(t,a.intervalMillis,zk):Jb(t,a.intervalMillis),v={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return a.setThrottleMetadata(u,v),sr.debug(`Calling attemptFetch again in ${y} millis`),fI(n,v,r,a)}}function Kk(n,e){return new Promise((t,r)=>{const a=Math.max(e-Date.now(),0),o=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(o),r(Tr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Yk(n){if(!(n instanceof Yr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Qk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Xk(n,e,t,r,a){if(a&&a.global){n("event",t,r);return}else{const o=await e,u=Object.assign(Object.assign({},r),{send_to:o});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(){if(H_())try{await aA()}catch(n){return sr.warn(Tr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return sr.warn(Tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Zk(n,e,t,r,a,o,u){var h;const f=$k(n);f.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>sr.error(S)),e.push(f);const p=Wk().then(S=>{if(S)return r.getId()}),[y,v]=await Promise.all([f,p]);Bk(o)||Mk(o,y.measurementId),a("js",new Date);const T=(h=u==null?void 0:u.config)!==null&&h!==void 0?h:{};return T[xk]="firebase",T.update=!0,v!=null&&(T[Ik]=v),a("config",y.measurementId,T),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.app=e}_delete(){return delete Zc[this.app.options.appId],Promise.resolve()}}let Zc={},Cw=[];const Dw={};let Sy="dataLayer",eV="gtag",Nw,dI,Ow=!1;function tV(){const n=[];if(iA()&&n.push("This is a browser extension environment."),i2()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,a)=>`(${a+1}) ${r}`).join(" "),t=Tr.create("invalid-analytics-context",{errorInfo:e});sr.warn(t.message)}}function nV(n,e,t){tV();const r=n.options.appId;if(!r)throw Tr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tr.create("no-api-key");if(Zc[r]!=null)throw Tr.create("already-exists",{id:r});if(!Ow){kk(Sy);const{wrappedGtag:o,gtagCore:u}=jk(Zc,Cw,Dw,Sy,eV);dI=o,Nw=u,Ow=!0}return Zc[r]=Zk(n,Cw,Dw,e,Nw,Sy,t),new Jk(n)}function rV(n=$_()){n=Pt(n);const e=wa(n,Wd);return e.isInitialized()?e.getImmediate():iV(n)}function iV(n,e={}){const t=wa(n,Wd);if(t.isInitialized()){const a=t.getImmediate();if(ya(e,t.getOptions()))return a;throw Tr.create("already-initialized")}return t.initialize({options:e})}function sV(n,e,t,r){n=Pt(n),Xk(dI,Zc[n.app.options.appId],e,t,r).catch(a=>sr.error(a))}const Pw="@firebase/analytics",Mw="0.10.12";function aV(){ui(new Hr(Wd,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return nV(r,a,t)},"PUBLIC")),ui(new Hr("analytics-internal",n,"PRIVATE")),ir(Pw,Mw),ir(Pw,Mw,"esm2017");function n(e){try{const t=e.getProvider(Wd).getImmediate();return{logEvent:(r,a,o)=>sV(t,r,a,o)}}catch(t){throw Tr.create("interop-component-reg-failed",{reason:t})}}}aV();var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ma,mI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,I){function N(){}N.prototype=I.prototype,O.D=I.prototype,O.prototype=new N,O.prototype.constructor=O,O.C=function(U,z,G){for(var V=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)V[Tt-2]=arguments[Tt];return I.prototype[z].apply(U,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,I,N){N||(N=0);var U=Array(16);if(typeof I=="string")for(var z=0;16>z;++z)U[z]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(z=0;16>z;++z)U[z]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=O.g[0],N=O.g[1],z=O.g[2];var G=O.g[3],V=I+(G^N&(z^G))+U[0]+3614090360&4294967295;I=N+(V<<7&4294967295|V>>>25),V=G+(z^I&(N^z))+U[1]+3905402710&4294967295,G=I+(V<<12&4294967295|V>>>20),V=z+(N^G&(I^N))+U[2]+606105819&4294967295,z=G+(V<<17&4294967295|V>>>15),V=N+(I^z&(G^I))+U[3]+3250441966&4294967295,N=z+(V<<22&4294967295|V>>>10),V=I+(G^N&(z^G))+U[4]+4118548399&4294967295,I=N+(V<<7&4294967295|V>>>25),V=G+(z^I&(N^z))+U[5]+1200080426&4294967295,G=I+(V<<12&4294967295|V>>>20),V=z+(N^G&(I^N))+U[6]+2821735955&4294967295,z=G+(V<<17&4294967295|V>>>15),V=N+(I^z&(G^I))+U[7]+4249261313&4294967295,N=z+(V<<22&4294967295|V>>>10),V=I+(G^N&(z^G))+U[8]+1770035416&4294967295,I=N+(V<<7&4294967295|V>>>25),V=G+(z^I&(N^z))+U[9]+2336552879&4294967295,G=I+(V<<12&4294967295|V>>>20),V=z+(N^G&(I^N))+U[10]+4294925233&4294967295,z=G+(V<<17&4294967295|V>>>15),V=N+(I^z&(G^I))+U[11]+2304563134&4294967295,N=z+(V<<22&4294967295|V>>>10),V=I+(G^N&(z^G))+U[12]+1804603682&4294967295,I=N+(V<<7&4294967295|V>>>25),V=G+(z^I&(N^z))+U[13]+4254626195&4294967295,G=I+(V<<12&4294967295|V>>>20),V=z+(N^G&(I^N))+U[14]+2792965006&4294967295,z=G+(V<<17&4294967295|V>>>15),V=N+(I^z&(G^I))+U[15]+1236535329&4294967295,N=z+(V<<22&4294967295|V>>>10),V=I+(z^G&(N^z))+U[1]+4129170786&4294967295,I=N+(V<<5&4294967295|V>>>27),V=G+(N^z&(I^N))+U[6]+3225465664&4294967295,G=I+(V<<9&4294967295|V>>>23),V=z+(I^N&(G^I))+U[11]+643717713&4294967295,z=G+(V<<14&4294967295|V>>>18),V=N+(G^I&(z^G))+U[0]+3921069994&4294967295,N=z+(V<<20&4294967295|V>>>12),V=I+(z^G&(N^z))+U[5]+3593408605&4294967295,I=N+(V<<5&4294967295|V>>>27),V=G+(N^z&(I^N))+U[10]+38016083&4294967295,G=I+(V<<9&4294967295|V>>>23),V=z+(I^N&(G^I))+U[15]+3634488961&4294967295,z=G+(V<<14&4294967295|V>>>18),V=N+(G^I&(z^G))+U[4]+3889429448&4294967295,N=z+(V<<20&4294967295|V>>>12),V=I+(z^G&(N^z))+U[9]+568446438&4294967295,I=N+(V<<5&4294967295|V>>>27),V=G+(N^z&(I^N))+U[14]+3275163606&4294967295,G=I+(V<<9&4294967295|V>>>23),V=z+(I^N&(G^I))+U[3]+4107603335&4294967295,z=G+(V<<14&4294967295|V>>>18),V=N+(G^I&(z^G))+U[8]+1163531501&4294967295,N=z+(V<<20&4294967295|V>>>12),V=I+(z^G&(N^z))+U[13]+2850285829&4294967295,I=N+(V<<5&4294967295|V>>>27),V=G+(N^z&(I^N))+U[2]+4243563512&4294967295,G=I+(V<<9&4294967295|V>>>23),V=z+(I^N&(G^I))+U[7]+1735328473&4294967295,z=G+(V<<14&4294967295|V>>>18),V=N+(G^I&(z^G))+U[12]+2368359562&4294967295,N=z+(V<<20&4294967295|V>>>12),V=I+(N^z^G)+U[5]+4294588738&4294967295,I=N+(V<<4&4294967295|V>>>28),V=G+(I^N^z)+U[8]+2272392833&4294967295,G=I+(V<<11&4294967295|V>>>21),V=z+(G^I^N)+U[11]+1839030562&4294967295,z=G+(V<<16&4294967295|V>>>16),V=N+(z^G^I)+U[14]+4259657740&4294967295,N=z+(V<<23&4294967295|V>>>9),V=I+(N^z^G)+U[1]+2763975236&4294967295,I=N+(V<<4&4294967295|V>>>28),V=G+(I^N^z)+U[4]+1272893353&4294967295,G=I+(V<<11&4294967295|V>>>21),V=z+(G^I^N)+U[7]+4139469664&4294967295,z=G+(V<<16&4294967295|V>>>16),V=N+(z^G^I)+U[10]+3200236656&4294967295,N=z+(V<<23&4294967295|V>>>9),V=I+(N^z^G)+U[13]+681279174&4294967295,I=N+(V<<4&4294967295|V>>>28),V=G+(I^N^z)+U[0]+3936430074&4294967295,G=I+(V<<11&4294967295|V>>>21),V=z+(G^I^N)+U[3]+3572445317&4294967295,z=G+(V<<16&4294967295|V>>>16),V=N+(z^G^I)+U[6]+76029189&4294967295,N=z+(V<<23&4294967295|V>>>9),V=I+(N^z^G)+U[9]+3654602809&4294967295,I=N+(V<<4&4294967295|V>>>28),V=G+(I^N^z)+U[12]+3873151461&4294967295,G=I+(V<<11&4294967295|V>>>21),V=z+(G^I^N)+U[15]+530742520&4294967295,z=G+(V<<16&4294967295|V>>>16),V=N+(z^G^I)+U[2]+3299628645&4294967295,N=z+(V<<23&4294967295|V>>>9),V=I+(z^(N|~G))+U[0]+4096336452&4294967295,I=N+(V<<6&4294967295|V>>>26),V=G+(N^(I|~z))+U[7]+1126891415&4294967295,G=I+(V<<10&4294967295|V>>>22),V=z+(I^(G|~N))+U[14]+2878612391&4294967295,z=G+(V<<15&4294967295|V>>>17),V=N+(G^(z|~I))+U[5]+4237533241&4294967295,N=z+(V<<21&4294967295|V>>>11),V=I+(z^(N|~G))+U[12]+1700485571&4294967295,I=N+(V<<6&4294967295|V>>>26),V=G+(N^(I|~z))+U[3]+2399980690&4294967295,G=I+(V<<10&4294967295|V>>>22),V=z+(I^(G|~N))+U[10]+4293915773&4294967295,z=G+(V<<15&4294967295|V>>>17),V=N+(G^(z|~I))+U[1]+2240044497&4294967295,N=z+(V<<21&4294967295|V>>>11),V=I+(z^(N|~G))+U[8]+1873313359&4294967295,I=N+(V<<6&4294967295|V>>>26),V=G+(N^(I|~z))+U[15]+4264355552&4294967295,G=I+(V<<10&4294967295|V>>>22),V=z+(I^(G|~N))+U[6]+2734768916&4294967295,z=G+(V<<15&4294967295|V>>>17),V=N+(G^(z|~I))+U[13]+1309151649&4294967295,N=z+(V<<21&4294967295|V>>>11),V=I+(z^(N|~G))+U[4]+4149444226&4294967295,I=N+(V<<6&4294967295|V>>>26),V=G+(N^(I|~z))+U[11]+3174756917&4294967295,G=I+(V<<10&4294967295|V>>>22),V=z+(I^(G|~N))+U[2]+718787259&4294967295,z=G+(V<<15&4294967295|V>>>17),V=N+(G^(z|~I))+U[9]+3951481745&4294967295,O.g[0]=O.g[0]+I&4294967295,O.g[1]=O.g[1]+(z+(V<<21&4294967295|V>>>11))&4294967295,O.g[2]=O.g[2]+z&4294967295,O.g[3]=O.g[3]+G&4294967295}r.prototype.u=function(O,I){I===void 0&&(I=O.length);for(var N=I-this.blockSize,U=this.B,z=this.h,G=0;G<I;){if(z==0)for(;G<=N;)a(this,O,G),G+=this.blockSize;if(typeof O=="string"){for(;G<I;)if(U[z++]=O.charCodeAt(G++),z==this.blockSize){a(this,U),z=0;break}}else for(;G<I;)if(U[z++]=O[G++],z==this.blockSize){a(this,U),z=0;break}}this.h=z,this.o+=I},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var I=1;I<O.length-8;++I)O[I]=0;var N=8*this.o;for(I=O.length-8;I<O.length;++I)O[I]=N&255,N/=256;for(this.u(O),O=Array(16),I=N=0;4>I;++I)for(var U=0;32>U;U+=8)O[N++]=this.g[I]>>>U&255;return O};function o(O,I){var N=h;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=I(O)}function u(O,I){this.h=I;for(var N=[],U=!0,z=O.length-1;0<=z;z--){var G=O[z]|0;U&&G==I||(N[z]=G,U=!1)}this.g=N}var h={};function f(O){return-128<=O&&128>O?o(O,function(I){return new u([I|0],0>I?-1:0)}):new u([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return D(p(-O));for(var I=[],N=1,U=0;O>=N;U++)I[U]=O/N|0,N*=4294967296;return new u(I,0)}function y(O,I){if(O.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O.charAt(0)=="-")return D(y(O.substring(1),I));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(I,8)),U=v,z=0;z<O.length;z+=8){var G=Math.min(8,O.length-z),V=parseInt(O.substring(z,z+G),I);8>G?(G=p(Math.pow(I,G)),U=U.j(G).add(p(V))):(U=U.j(N),U=U.add(p(V)))}return U}var v=f(0),T=f(1),S=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-D(this).m();for(var O=0,I=1,N=0;N<this.g.length;N++){var U=this.i(N);O+=(0<=U?U:4294967296+U)*I,I*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(M(this))return"-"+D(this).toString(O);for(var I=p(Math.pow(O,6)),N=this,U="";;){var z=K(N,I).g;N=F(N,z.j(I));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(O);if(N=z,C(N))return G+U;for(;6>G.length;)G="0"+G;U=G+U}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var I=0;I<O.g.length;I++)if(O.g[I]!=0)return!1;return!0}function M(O){return O.h==-1}n.l=function(O){return O=F(this,O),M(O)?-1:C(O)?0:1};function D(O){for(var I=O.g.length,N=[],U=0;U<I;U++)N[U]=~O.g[U];return new u(N,~O.h).add(T)}n.abs=function(){return M(this)?D(this):this},n.add=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],U=0,z=0;z<=I;z++){var G=U+(this.i(z)&65535)+(O.i(z)&65535),V=(G>>>16)+(this.i(z)>>>16)+(O.i(z)>>>16);U=V>>>16,G&=65535,V&=65535,N[z]=V<<16|G}return new u(N,N[N.length-1]&-2147483648?-1:0)};function F(O,I){return O.add(D(I))}n.j=function(O){if(C(this)||C(O))return v;if(M(this))return M(O)?D(this).j(D(O)):D(D(this).j(O));if(M(O))return D(this.j(D(O)));if(0>this.l(S)&&0>O.l(S))return p(this.m()*O.m());for(var I=this.g.length+O.g.length,N=[],U=0;U<2*I;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var z=0;z<O.g.length;z++){var G=this.i(U)>>>16,V=this.i(U)&65535,Tt=O.i(z)>>>16,je=O.i(z)&65535;N[2*U+2*z]+=V*je,B(N,2*U+2*z),N[2*U+2*z+1]+=G*je,B(N,2*U+2*z+1),N[2*U+2*z+1]+=V*Tt,B(N,2*U+2*z+1),N[2*U+2*z+2]+=G*Tt,B(N,2*U+2*z+2)}for(U=0;U<I;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=I;U<2*I;U++)N[U]=0;return new u(N,0)};function B(O,I){for(;(O[I]&65535)!=O[I];)O[I+1]+=O[I]>>>16,O[I]&=65535,I++}function k(O,I){this.g=O,this.h=I}function K(O,I){if(C(I))throw Error("division by zero");if(C(O))return new k(v,v);if(M(O))return I=K(D(O),I),new k(D(I.g),D(I.h));if(M(I))return I=K(O,D(I)),new k(D(I.g),I.h);if(30<O.g.length){if(M(O)||M(I))throw Error("slowDivide_ only works with positive integers.");for(var N=T,U=I;0>=U.l(O);)N=P(N),U=P(U);var z=ie(N,1),G=ie(U,1);for(U=ie(U,2),N=ie(N,2);!C(U);){var V=G.add(U);0>=V.l(O)&&(z=z.add(N),G=V),U=ie(U,1),N=ie(N,1)}return I=F(O,z.j(I)),new k(z,I)}for(z=v;0<=O.l(I);){for(N=Math.max(1,Math.floor(O.m()/I.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),G=p(N),V=G.j(I);M(V)||0<V.l(O);)N-=U,G=p(N),V=G.j(I);C(G)&&(G=T),z=z.add(G),O=F(O,V)}return new k(z,O)}n.A=function(O){return K(this,O).h},n.and=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],U=0;U<I;U++)N[U]=this.i(U)&O.i(U);return new u(N,this.h&O.h)},n.or=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],U=0;U<I;U++)N[U]=this.i(U)|O.i(U);return new u(N,this.h|O.h)},n.xor=function(O){for(var I=Math.max(this.g.length,O.g.length),N=[],U=0;U<I;U++)N[U]=this.i(U)^O.i(U);return new u(N,this.h^O.h)};function P(O){for(var I=O.g.length+1,N=[],U=0;U<I;U++)N[U]=O.i(U)<<1|O.i(U-1)>>>31;return new u(N,O.h)}function ie(O,I){var N=I>>5;I%=32;for(var U=O.g.length-N,z=[],G=0;G<U;G++)z[G]=0<I?O.i(G+N)>>>I|O.i(G+N+1)<<32-I:O.i(G+N);return new u(z,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,ma=u}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pI,zc,gI,Ad,r_,yI,_I,vI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function a(d,_){if(_)e:{var E=r;d=d.split(".");for(var x=0;x<d.length-1;x++){var Q=d[x];if(!(Q in E))break e;E=E[Q]}d=d[d.length-1],x=E[d],_=_(x),_!=x&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var E=0,x=!1,Q={next:function(){if(!x&&E<d.length){var re=E++;return{value:_(re,d[re]),done:!1}}return x=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}a("Array.prototype.values",function(d){return d||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function p(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function y(d,_,E){return d.call.apply(d.bind,arguments)}function v(d,_,E){if(!d)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,x),d.apply(_,Q)}}return function(){return d.apply(_,arguments)}}function T(d,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,T.apply(null,arguments)}function S(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function C(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(x,Q,re){for(var ye=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ye[ot-2]=arguments[ot];return _.prototype[Q].apply(x,ye)}}function M(d){const _=d.length;if(0<_){const E=Array(_);for(let x=0;x<_;x++)E[x]=d[x];return E}return[]}function D(d,_){for(let E=1;E<arguments.length;E++){const x=arguments[E];if(f(x)){const Q=d.length||0,re=x.length||0;d.length=Q+re;for(let ye=0;ye<re;ye++)d[Q+ye]=x[ye]}else d.push(x)}}class F{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function B(d){return/^[\s\xa0]*$/.test(d)}function k(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function K(d){return K[" "](d),d}K[" "]=function(){};var P=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function ie(d,_,E){for(const x in d)_.call(E,d[x],x,d)}function O(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function I(d){const _={};for(const E in d)_[E]=d[E];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(d,_){let E,x;for(let Q=1;Q<arguments.length;Q++){x=arguments[Q];for(E in x)d[E]=x[E];for(let re=0;re<N.length;re++)E=N[re],Object.prototype.hasOwnProperty.call(x,E)&&(d[E]=x[E])}}function z(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function G(d){h.setTimeout(()=>{throw d},0)}function V(){var d=qe;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class Tt{constructor(){this.h=this.g=null}add(_,E){const x=je.get();x.set(_,E),this.h?this.h.next=x:this.g=x,this.h=x}}var je=new F(()=>new ne,d=>d.reset());class ne{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ge=!1,qe=new Tt,j=()=>{const d=h.Promise.resolve(void 0);fe=()=>{d.then(oe)}};var oe=()=>{for(var d;d=V();){try{d.h.call(d.g)}catch(E){G(E)}var _=je;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ge=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};h.addEventListener("test",E,_),h.removeEventListener("test",E,_)}catch{}return d}();function Me(d,_){if(he.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(P){e:{try{K(_.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ke[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Me.aa.h.call(this)}}C(Me,he);var ke={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ft(d,_,E,x,Q){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!x,this.ha=Q,this.key=++ht,this.da=this.fa=!1}function Ft(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Sn(d){this.src=d,this.g={},this.h=0}Sn.prototype.add=function(d,_,E,x,Q){var re=d.toString();d=this.g[re],d||(d=this.g[re]=[],this.h++);var ye=Qt(d,_,x,Q);return-1<ye?(_=d[ye],E||(_.fa=!1)):(_=new ft(_,this.src,re,!!x,Q),_.fa=E,d.push(_)),_};function Nn(d,_){var E=_.type;if(E in d.g){var x=d.g[E],Q=Array.prototype.indexOf.call(x,_,void 0),re;(re=0<=Q)&&Array.prototype.splice.call(x,Q,1),re&&(Ft(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Qt(d,_,E,x){for(var Q=0;Q<d.length;++Q){var re=d[Q];if(!re.da&&re.listener==_&&re.capture==!!E&&re.ha==x)return Q}return-1}var On="closure_lm_"+(1e6*Math.random()|0),dt={};function Sr(d,_,E,x,Q){if(Array.isArray(_)){for(var re=0;re<_.length;re++)Sr(d,_[re],E,x,Q);return null}return E=zn(E),d&&d[kt]?d.K(_,E,p(x)?!!x.capture:!1,Q):en(d,_,E,!1,x,Q)}function en(d,_,E,x,Q,re){if(!_)throw Error("Invalid event type");var ye=p(Q)?!!Q.capture:!!Q,ot=Wr(d);if(ot||(d[On]=ot=new Sn(d)),E=ot.add(_,E,x,ye,re),E.proxy)return E;if(x=Ca(),E.proxy=x,x.src=d,x.listener=E,d.addEventListener)be||(Q=ye),Q===void 0&&(Q=!1),d.addEventListener(_.toString(),x,Q);else if(d.attachEvent)d.attachEvent(Rn(_.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ca(){function d(E){return _.call(d.src,d.listener,E)}const _=Xr;return d}function Bi(d,_,E,x,Q){if(Array.isArray(_))for(var re=0;re<_.length;re++)Bi(d,_[re],E,x,Q);else x=p(x)?!!x.capture:!!x,E=zn(E),d&&d[kt]?(d=d.i,_=String(_).toString(),_ in d.g&&(re=d.g[_],E=Qt(re,E,x,Q),-1<E&&(Ft(re[E]),Array.prototype.splice.call(re,E,1),re.length==0&&(delete d.g[_],d.h--)))):d&&(d=Wr(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Qt(_,E,x,Q)),(E=-1<d?_[d]:null)&&hi(E))}function hi(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[kt])Nn(_.i,d);else{var E=d.type,x=d.proxy;_.removeEventListener?_.removeEventListener(E,x,d.capture):_.detachEvent?_.detachEvent(Rn(E),x):_.addListener&&_.removeListener&&_.removeListener(x),(E=Wr(_))?(Nn(E,d),E.h==0&&(E.src=null,_[On]=null)):Ft(d)}}}function Rn(d){return d in dt?dt[d]:dt[d]="on"+d}function Xr(d,_){if(d.da)d=!0;else{_=new Me(_,this);var E=d.listener,x=d.ha||d.src;d.fa&&hi(d),d=E.call(x,_)}return d}function Wr(d){return d=d[On],d instanceof Sn?d:null}var Rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(d){return typeof d=="function"?d:(d[Rr]||(d[Rr]=function(_){return d.handleEvent(_)}),d[Rr])}function Se(){de.call(this),this.i=new Sn(this),this.M=this,this.F=null}C(Se,de),Se.prototype[kt]=!0,Se.prototype.removeEventListener=function(d,_,E,x){Bi(this,d,_,E,x)};function Ye(d,_){var E,x=d.F;if(x)for(E=[];x;x=x.F)E.push(x);if(d=d.M,x=_.type||_,typeof _=="string")_=new he(_,d);else if(_ instanceof he)_.target=_.target||d;else{var Q=_;_=new he(x,d),U(_,Q)}if(Q=!0,E)for(var re=E.length-1;0<=re;re--){var ye=_.g=E[re];Q=tn(ye,x,!0,_)&&Q}if(ye=_.g=d,Q=tn(ye,x,!0,_)&&Q,Q=tn(ye,x,!1,_)&&Q,E)for(re=0;re<E.length;re++)ye=_.g=E[re],Q=tn(ye,x,!1,_)&&Q}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],x=0;x<E.length;x++)Ft(E[x]);delete d.g[_],d.h--}}this.F=null},Se.prototype.K=function(d,_,E,x){return this.i.add(String(d),_,!1,E,x)},Se.prototype.L=function(d,_,E,x){return this.i.add(String(d),_,!0,E,x)};function tn(d,_,E,x){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var Q=!0,re=0;re<_.length;++re){var ye=_[re];if(ye&&!ye.da&&ye.capture==E){var ot=ye.listener,un=ye.ha||ye.src;ye.fa&&Nn(d.i,ye),Q=ot.call(un,x)!==!1&&Q}}return Q&&!x.defaultPrevented}function gn(d,_,E){if(typeof d=="function")E&&(d=T(d,E));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(d,_||0)}function ar(d){d.g=gn(()=>{d.g=null,d.i&&(d.i=!1,ar(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Qo extends de{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ar(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(d){de.call(this),this.h=d,this.g={}}C(fi,de);var di=[];function zi(d){ie(d.g,function(_,E){this.g.hasOwnProperty(E)&&hi(_)},d),d.g={}}fi.prototype.N=function(){fi.aa.N.call(this),zi(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zn=h.JSON.stringify,Zr=h.JSON.parse,mi=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Fi(){}Fi.prototype.h=null;function Da(d){return d.h||(d.h=d.i())}function xs(){}var Jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ar(){he.call(this,"d")}C(Ar,he);function pi(){he.call(this,"c")}C(pi,he);var Fn={},Na=null;function gi(){return Na=Na||new Se}Fn.La="serverreachability";function q(d){he.call(this,Fn.La,d)}C(q,he);function Y(d){const _=gi();Ye(_,new q(_))}Fn.STAT_EVENT="statevent";function te(d,_){he.call(this,Fn.STAT_EVENT,d),this.stat=_}C(te,he);function le(d){const _=gi();Ye(_,new te(_,d))}Fn.Ma="timingevent";function pe(d,_){he.call(this,Fn.Ma,d),this.size=_}C(pe,he);function Te(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},_)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function Ie(d,_,E,x,Q,re){d.info(function(){if(d.g)if(re)for(var ye="",ot=re.split("&"),un=0;un<ot.length;un++){var lt=ot[un].split("=");if(1<lt.length){var _n=lt[0];lt=lt[1];var cn=_n.split("_");ye=2<=cn.length&&cn[1]=="type"?ye+(_n+"="+lt+"&"):ye+(_n+"=redacted&")}}else ye=null;else ye=re;return"XMLHTTP REQ ("+x+") [attempt "+Q+"]: "+_+`
`+E+`
`+ye})}function Ce(d,_,E,x,Q,re,ye){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Q+"]: "+_+`
`+E+`
`+re+" "+ye})}function ve(d,_,E,x){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Oe(d,E)+(x?" "+x:"")})}function xe(d,_){d.info(function(){return"TIMEOUT: "+_})}Ae.prototype.info=function(){};function Oe(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var x=E[d];if(!(2>x.length)){var Q=x[1];if(Array.isArray(Q)&&!(1>Q.length)){var re=Q[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ye=1;ye<Q.length;ye++)Q[ye]=""}}}}return Zn(E)}catch{return _}}var Ge={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dt;function gt(){}C(gt,Fi),gt.prototype.g=function(){return new XMLHttpRequest},gt.prototype.i=function(){return{}},Dt=new gt;function Ze(d,_,E,x){this.j=d,this.i=_,this.l=E,this.R=x||1,this.U=new fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var Ir={},xr={};function Xt(d,_,E){d.L=1,d.v=ka(ur(_)),d.m=E,d.P=!0,nn(d,null)}function nn(d,_){d.F=Date.now(),qn(d),d.A=ur(d.v);var E=d.A,x=d.R;Array.isArray(x)||(x=[String(x)]),Ou(E.i,"t",x),d.C=0,E=d.j.J,d.h=new $e,d.g=rf(d.j,E?_:null,!d.m),0<d.O&&(d.M=new Qo(T(d.Y,d,d.g),d.O)),_=d.U,E=d.g,x=d.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(di[0]=Q.toString()),Q=di);for(var re=0;re<Q.length;re++){var ye=Sr(E,Q[re],x||_.handleEvent,!1,_.h||_);if(!ye)break;_.g[ye.key]=ye}_=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Y(),Ie(d.i,d.u,d.A,d.l,d.R,d.m)}Ze.prototype.ca=function(d){d=d.target;const _=this.M;_&&Pr(d)==3?_.j():this.Y(d)},Ze.prototype.Y=function(d){try{if(d==this.g)e:{const cn=Pr(this.g);var _=this.g.Ba();const Wi=this.g.Z();if(!(3>cn)&&(cn!=3||this.g&&(this.h.h||this.g.oa()||Qh(this.g)))){this.J||cn!=4||_==7||(_==8||0>=Wi?Y(3):Y(2)),or(this);var E=this.g.Z();this.X=E;t:if(Cs(this)){var x=Qh(this.g);d="";var Q=x.length,re=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){at(this),tt(this);var ye="";break t}this.h.i=new h.TextDecoder}for(_=0;_<Q;_++)this.h.h=!0,d+=this.h.i.decode(x[_],{stream:!(re&&_==Q-1)});x.length=0,this.h.g+=d,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=E==200,Ce(this.i,this.u,this.A,this.l,this.R,cn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,un=this.g;if((ot=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ot)){var lt=ot;break t}}lt=null}if(E=lt)ve(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,E);else{this.o=!1,this.s=3,le(12),at(this),tt(this);break e}}if(this.P){E=!0;let An;for(;!this.J&&this.C<ye.length;)if(An=yi(this,ye),An==xr){cn==4&&(this.s=4,le(14),E=!1),ve(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Ir){this.s=4,le(15),ve(this.i,this.l,ye,"[Invalid Chunk]"),E=!1;break}else ve(this.i,this.l,An,null),Cr(this,An);if(Cs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||ye.length!=0||this.h.h||(this.s=1,le(16),E=!1),this.o=this.o&&E,!E)ve(this.i,this.l,ye,"[Invalid Chunked Response]"),at(this),tt(this);else if(0<ye.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),qa(_n),_n.M=!0,le(11))}}else ve(this.i,this.l,ye,null),Cr(this,ye);cn==4&&at(this),this.o&&!this.J&&(cn==4?ef(this.j,this):(this.o=!1,qn(this)))}else yp(this.g),E==400&&0<ye.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),at(this),tt(this)}}}catch{}finally{}};function Cs(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function yi(d,_){var E=d.C,x=_.indexOf(`
`,E);return x==-1?xr:(E=Number(_.substring(E,x)),isNaN(E)?Ir:(x+=1,x+E>_.length?xr:(_=_.slice(x,x+E),d.C=x+E,_)))}Ze.prototype.cancel=function(){this.J=!0,at(this)};function qn(d){d.S=Date.now()+d.I,qi(d,d.I)}function qi(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Te(T(d.ba,d),_)}function or(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Ze.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(xe(this.i,this.A),this.L!=2&&(Y(),le(17)),at(this),this.s=2,tt(this)):qi(this,this.S-d)};function tt(d){d.j.G==0||d.J||ef(d.j,d)}function at(d){or(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,zi(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Cr(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||Oa(E.h,d))){if(!d.K&&Oa(E.h,d)&&E.G==3){try{var x=E.Da.g.parse(_)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Q=x;if(Q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)sl(E),rl(E);else break e;Lu(E),le(18)}}else E.za=Q[1],0<E.za-E.T&&37500>Q[2]&&E.F&&E.v==0&&!E.C&&(E.C=Te(T(E.Za,E),6e3));if(1>=Hi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Xi(E,11)}else if((d.K||E.g==d)&&sl(E),!B(_))for(Q=E.Da.g.parse(_),_=0;_<Q.length;_++){let lt=Q[_];if(E.T=lt[0],lt=lt[1],E.G==2)if(lt[0]=="c"){E.K=lt[1],E.ia=lt[2];const _n=lt[3];_n!=null&&(E.la=_n,E.j.info("VER="+E.la));const cn=lt[4];cn!=null&&(E.Aa=cn,E.j.info("SVER="+E.Aa));const Wi=lt[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(x=1.5*Wi,E.L=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const An=d.g;if(An){const Ri=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var re=x.h;re.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Xo(re,re.h),re.h=null))}if(x.D){const ju=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;ju&&(x.ya=ju,At(x.I,x.D,ju))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),x=E;var ye=d;if(x.qa=nf(x,x.J?x.ia:null,x.W),ye.K){Hn(x.h,ye);var ot=ye,un=x.L;un&&(ot.I=un),ot.B&&(or(ot),qn(ot)),x.g=ye}else Zh(x);0<E.i.length&&il(E)}else lt[0]!="stop"&&lt[0]!="close"||Xi(E,7);else E.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Xi(E,7):ku(E):lt[0]!="noop"&&E.l&&E.l.ta(lt),E.v=0)}}Y(4)}catch{}}var _i=class{constructor(d,_){this.g=d,this.map=_}};function _t(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lr(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hi(d){return d.h?1:d.g?d.g.size:0}function Oa(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Xo(d,_){d.g?d.g.add(_):d.h=_}function Hn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}_t.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function xu(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return M(d.i)}function dp(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var _=[],E=d.length,x=0;x<E;x++)_.push(d[x]);return _}_=[],E=0;for(x in d)_[E++]=d[x];return _}function Wo(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const x in d)_[E++]=x;return _}}}function Cu(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=Wo(d),x=dp(d),Q=x.length,re=0;re<Q;re++)_.call(void 0,x[re],E&&E[re],d)}var Pa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mp(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var x=d[E].indexOf("="),Q=null;if(0<=x){var re=d[E].substring(0,x);Q=d[E].substring(x+1)}else re=d[E];_(re,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function rn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof rn){this.h=d.h,Ma(this,d.j),this.o=d.o,this.g=d.g,Ds(this,d.s),this.l=d.l;var _=d.i,E=new $i;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Gi(this,E),this.m=d.m}else d&&(_=String(d).match(Pa))?(this.h=!1,Ma(this,_[1]||"",!0),this.o=Dr(_[2]||""),this.g=Dr(_[3]||"",!0),Ds(this,_[4]),this.l=Dr(_[5]||"",!0),Gi(this,_[6]||"",!0),this.m=Dr(_[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}rn.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Va(_,Du,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Va(_,Du,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Va(E,E.charAt(0)=="/"?pp:Nu,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Va(E,Zo)),d.join("")};function ur(d){return new rn(d)}function Ma(d,_,E){d.j=E?Dr(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Ds(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Gi(d,_,E){_ instanceof $i?(d.i=_,Kh(d.i,d.h)):(E||(_=Va(_,gp)),d.i=new $i(_,d.h))}function At(d,_,E){d.i.set(_,E)}function ka(d){return At(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Dr(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Va(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,$h),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function $h(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Du=/[#\/\?@]/g,Nu=/[#\?:]/g,pp=/[#\?]/g,gp=/[#\?@]/g,Zo=/#/g;function $i(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Nr(d){d.g||(d.g=new Map,d.h=0,d.i&&mp(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=$i.prototype,n.add=function(d,_){Nr(this),this.i=null,d=vi(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function Ki(d,_){Nr(d),_=vi(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Yi(d,_){return Nr(d),_=vi(d,_),d.g.has(_)}n.forEach=function(d,_){Nr(this),this.g.forEach(function(E,x){E.forEach(function(Q){d.call(_,Q,x,this)},this)},this)},n.na=function(){Nr(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let x=0;x<_.length;x++){const Q=d[x];for(let re=0;re<Q.length;re++)E.push(_[x])}return E},n.V=function(d){Nr(this);let _=[];if(typeof d=="string")Yi(this,d)&&(_=_.concat(this.g.get(vi(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return Nr(this),this.i=null,d=vi(this,d),Yi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Ou(d,_,E){Ki(d,_),0<E.length&&(d.i=null,d.g.set(vi(d,_),M(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var x=_[E];const re=encodeURIComponent(String(x)),ye=this.V(x);for(x=0;x<ye.length;x++){var Q=re;ye[x]!==""&&(Q+="="+encodeURIComponent(String(ye[x]))),d.push(Q)}}return this.i=d.join("&")};function vi(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Kh(d,_){_&&!d.j&&(Nr(d),d.i=null,d.g.forEach(function(E,x){var Q=x.toLowerCase();x!=Q&&(Ki(this,x),Ou(this,Q,E))},d)),d.j=_}function La(d,_){const E=new Ae;if(h.Image){const x=new Image;x.onload=S(Or,E,"TestLoadImage: loaded",!0,_,x),x.onerror=S(Or,E,"TestLoadImage: error",!1,_,x),x.onabort=S(Or,E,"TestLoadImage: abort",!1,_,x),x.ontimeout=S(Or,E,"TestLoadImage: timeout",!1,_,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else _(!1)}function ei(d,_){const E=new Ae,x=new AbortController,Q=setTimeout(()=>{x.abort(),Or(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:x.signal}).then(re=>{clearTimeout(Q),re.ok?Or(E,"TestPingServer: ok",!0,_):Or(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),Or(E,"TestPingServer: error",!1,_)})}function Or(d,_,E,x,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),x(E)}catch{}}function Ua(){this.g=new mi}function Ei(d,_,E){const x=E||"";try{Cu(d,function(Q,re){let ye=Q;p(Q)&&(ye=Zn(Q)),_.push(x+re+"="+encodeURIComponent(ye))})}catch(Q){throw _.push(x+"type="+encodeURIComponent("_badmap")),Q}}function Ns(d){this.l=d.Ub||null,this.j=d.eb||!1}C(Ns,Fi),Ns.prototype.g=function(){return new Qi(this.l,this.j)},Ns.prototype.i=function(d){return function(){return d}}({});function Qi(d,_){Se.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Qi,Se),n=Qi.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,bi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ti(this):bi(this),this.readyState==3&&Pu(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Ti(this))},n.Qa=function(d){this.g&&(this.response=d,Ti(this))},n.ga=function(){this.g&&Ti(this)};function Ti(d){d.readyState=4,d.l=null,d.j=null,d.v=null,bi(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function bi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Mu(d){let _="";return ie(d,function(E,x){_+=x,_+=":",_+=E,_+=`\r
`}),_}function yn(d,_,E){e:{for(x in E){var x=!1;break e}x=!0}x||(E=Mu(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):At(d,_,E))}function vt(d){Se.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(vt,Se);var Jo=/^https?$/i,ja=["POST","PUT"];n=vt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dt.g(),this.v=this.o?Da(this.o):Da(Dt),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(re){Yh(this,re);return}if(d=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Q in x)E.set(Q,x[Q]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const re of x.keys())E.set(re,x.get(re));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(re=>re.toLowerCase()=="content-type"),Q=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ja,_,void 0))||x||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ye]of E)this.g.setRequestHeader(re,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ba(this),this.u=!0,this.g.send(d),this.u=!1}catch(re){Yh(this,re)}};function Yh(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,el(d),wi(d)}function el(d){d.A||(d.A=!0,Ye(d,"complete"),Ye(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ye(this,"complete"),Ye(this,"abort"),wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tl(this):this.bb())},n.bb=function(){tl(this)};function tl(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Pr(d)!=4||d.Z()!=2)){if(d.u&&Pr(d)==4)gn(d.Ea,0,d);else if(Ye(d,"readystatechange"),Pr(d)==4){d.h=!1;try{const ye=d.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var x;if(x=ye===0){var Q=String(d.D).match(Pa)[1]||null;!Q&&h.self&&h.self.location&&(Q=h.self.location.protocol.slice(0,-1)),x=!Jo.test(Q?Q.toLowerCase():"")}E=x}if(E)Ye(d,"complete"),Ye(d,"success");else{d.m=6;try{var re=2<Pr(d)?d.g.statusText:""}catch{re=""}d.l=re+" ["+d.Z()+"]",el(d)}}finally{wi(d)}}}}function wi(d,_){if(d.g){Ba(d);const E=d.g,x=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Ye(d,"ready");try{E.onreadystatechange=x}catch{}}}function Ba(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Pr(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Pr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Zr(_)}};function Qh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function yp(d){const _={};d=(d.g&&2<=Pr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(B(d[x]))continue;var E=z(d[x]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const re=_[Q]||[];_[Q]=re,re.push(E)}O(_,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function nl(d){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,d),this.cb=za("retryDelaySeedMs",1e4,d),this.Wa=za("forwardChannelMaxRetries",2,d),this.wa=za("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new _t(d&&d.concurrentRequestLimit),this.Da=new Ua,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nl.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,x){le(0),this.W=d,this.H=_||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.I=nf(this,null,this.W),il(this)};function ku(d){if(Xh(d),d.G==3){var _=d.U++,E=ur(d.I);if(At(E,"SID",d.K),At(E,"RID",_),At(E,"TYPE","terminate"),Fa(d,E),_=new Ze(d,d.j,_),_.L=2,_.v=ka(ur(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=_.v,E=!0),E||(_.g=rf(_.j,null),_.g.ea(_.v)),_.F=Date.now(),qn(_)}tf(d)}function rl(d){d.g&&(qa(d),d.g.cancel(),d.g=null)}function Xh(d){rl(d),d.u&&(h.clearTimeout(d.u),d.u=null),sl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function il(d){if(!lr(d.h)&&!d.s){d.s=!0;var _=d.Ga;fe||j(),ge||(fe(),ge=!0),qe.add(_,d),d.B=0}}function _p(d,_){return Hi(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Te(T(d.Ga,d,_),Uu(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const Q=new Ze(this,this.j,d);let re=this.o;if(this.S&&(re?(re=I(re),U(re,this.S)):re=this.S),this.m!==null||this.O||(Q.H=re,re=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(_+=x,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Wh(this,Q,_),E=ur(this.I),At(E,"RID",d),At(E,"CVER",22),this.D&&At(E,"X-HTTP-Session-Id",this.D),Fa(this,E),re&&(this.O?_="headers="+encodeURIComponent(String(Mu(re)))+"&"+_:this.m&&yn(E,this.m,re)),Xo(this.h,Q),this.Ua&&At(E,"TYPE","init"),this.P?(At(E,"$req",_),At(E,"SID","null"),Q.T=!0,Xt(Q,E,null)):Xt(Q,E,_),this.G=2}}else this.G==3&&(d?Vu(this,d):this.i.length==0||lr(this.h)||Vu(this))};function Vu(d,_){var E;_?E=_.l:E=d.U++;const x=ur(d.I);At(x,"SID",d.K),At(x,"RID",E),At(x,"AID",d.T),Fa(d,x),d.m&&d.o&&yn(x,d.m,d.o),E=new Ze(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Wh(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Xo(d.h,E),Xt(E,x,_)}function Fa(d,_){d.H&&ie(d.H,function(E,x){At(_,x,E)}),d.l&&Cu({},function(E,x){At(_,x,E)})}function Wh(d,_,E){E=Math.min(d.i.length,E);var x=d.l?T(d.l.Na,d.l,d):null;e:{var Q=d.i;let re=-1;for(;;){const ye=["count="+E];re==-1?0<E?(re=Q[0].g,ye.push("ofs="+re)):re=0:ye.push("ofs="+re);let ot=!0;for(let un=0;un<E;un++){let lt=Q[un].g;const _n=Q[un].map;if(lt-=re,0>lt)re=Math.max(0,Q[un].g-100),ot=!1;else try{Ei(_n,ye,"req"+lt+"_")}catch{x&&x(_n)}}if(ot){x=ye.join("&");break e}}}return d=d.i.splice(0,E),_.D=d,x}function Zh(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;fe||j(),ge||(fe(),ge=!0),qe.add(_,d),d.v=0}}function Lu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Te(T(d.Fa,d),Uu(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Jh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Te(T(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),rl(this),Jh(this))};function qa(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function Jh(d){d.g=new Ze(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=ur(d.qa);At(_,"RID","rpc"),At(_,"SID",d.K),At(_,"AID",d.T),At(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&At(_,"TO",d.ja),At(_,"TYPE","xmlhttp"),Fa(d,_),d.m&&d.o&&yn(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=ka(ur(_)),E.m=null,E.P=!0,nn(E,d)}n.Za=function(){this.C!=null&&(this.C=null,rl(this),Lu(this),le(19))};function sl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function ef(d,_){var E=null;if(d.g==_){sl(d),qa(d),d.g=null;var x=2}else if(Oa(d.h,_))E=_.D,Hn(d.h,_),x=1;else return;if(d.G!=0){if(_.o)if(x==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var Q=d.B;x=gi(),Ye(x,new pe(x,E)),il(d)}else Zh(d);else if(Q=_.s,Q==3||Q==0&&0<_.X||!(x==1&&_p(d,_)||x==2&&Lu(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),Q){case 1:Xi(d,5);break;case 4:Xi(d,10);break;case 3:Xi(d,6);break;default:Xi(d,2)}}}function Uu(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function Xi(d,_){if(d.j.info("Error code "+_),_==2){var E=T(d.fb,d),x=d.Xa;const Q=!x;x=new rn(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ma(x,"https"),ka(x),Q?La(x.toString(),E):ei(x.toString(),E)}else le(2);d.G=0,d.l&&d.l.sa(_),tf(d),Xh(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function tf(d){if(d.G=0,d.ka=[],d.l){const _=xu(d.h);(_.length!=0||d.i.length!=0)&&(D(d.ka,_),D(d.ka,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.ra()}}function nf(d,_,E){var x=E instanceof rn?ur(E):new rn(E);if(x.g!="")_&&(x.g=_+"."+x.g),Ds(x,x.s);else{var Q=h.location;x=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;var re=new rn(null);x&&Ma(re,x),_&&(re.g=_),Q&&Ds(re,Q),E&&(re.l=E),x=re}return E=d.D,_=d.ya,E&&_&&At(x,E,_),At(x,"VER",d.la),Fa(d,x),x}function rf(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new vt(new Ns({eb:E})):new vt(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sf(){}n=sf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function al(){}al.prototype.g=function(d,_){return new Gn(d,_)};function Gn(d,_){Se.call(this),this.g=new nl(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!B(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!B(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Si(this)}C(Gn,Se),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){ku(this.g)},Gn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Zn(d),d=E);_.i.push(new _i(_.Ya++,d)),_.G==3&&il(_)},Gn.prototype.N=function(){this.g.l=null,delete this.j,ku(this.g),delete this.g,Gn.aa.N.call(this)};function af(d){Ar.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}C(af,Ar);function of(){pi.call(this),this.status=1}C(of,pi);function Si(d){this.g=d}C(Si,sf),Si.prototype.ua=function(){Ye(this.g,"a")},Si.prototype.ta=function(d){Ye(this.g,new af(d))},Si.prototype.sa=function(d){Ye(this.g,new of)},Si.prototype.ra=function(){Ye(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,vI=function(){return new al},_I=function(){return gi()},yI=Fn,r_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ge.NO_ERROR=0,Ge.TIMEOUT=8,Ge.HTTP_ERROR=6,Ad=Ge,mt.COMPLETE="complete",gI=mt,xs.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",Se.prototype.listen=Se.prototype.K,zc=xs,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,pI=vt}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const Vw="@firebase/firestore",Lw="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Am("@firebase/firestore");function Gl(){return Po.logLevel}function me(n,...e){if(Po.logLevel<=it.DEBUG){const t=e.map(uv);Po.debug(`Firestore (${Tu}): ${n}`,...t)}}function Qn(n,...e){if(Po.logLevel<=it.ERROR){const t=e.map(uv);Po.error(`Firestore (${Tu}): ${n}`,...t)}}function lh(n,...e){if(Po.logLevel<=it.WARN){const t=e.map(uv);Po.warn(`Firestore (${Tu}): ${n}`,...t)}}function uv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function De(n,e){n||Re()}function He(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yn.UNAUTHENTICATED))}shutdown(){}}class uV{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let r=this.i;const a=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let o=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vi,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},h=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new oV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Yn(e)}}class cV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class hV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,nr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){De(this.o===void 0);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const a=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?a(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Uw(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new Uw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=dV(40);for(let o=0;o<a.length;++o)r.length<20&&a[o]<t&&(r+=e.charAt(a[o]%62))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function i_(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return ze(r,a);{const o=EI(),u=mV(o.encode(jw(n,t)),o.encode(jw(e,t)));return u!==0?u:ze(r,a)}}t+=r>65535?2:1}return ze(n.length,e.length)}function jw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ze(n[t],e[t]);return ze(n.length,e.length)}function nu(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function bI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=-62135596800,zw=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*zw);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bw)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zw}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Bw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new zt(0,0))}static max(){return new Pe(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="__name__";class Ni{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(),r===void 0?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const o=Ni.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return ze(e.length,t.length)}static compareSegments(e,t){const r=Ni.isNumericId(e),a=Ni.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):i_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class Et extends Ni{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const pV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Ni{construct(e,t,r){return new Bt(e,t,r)}static isValidIdentifier(e){return pV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fw}static keyField(){return new Bt([Fw])}static fromServerFormat(e){const t=[];let r="",a=0;const o=()=>{if(r.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new _e(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new _e(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(r+=h,a++):(o(),a++)}if(o(),u)throw new _e(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Et.fromString(e))}static fromName(e){return new Ee(Et.fromString(e).popFirst(5))}static empty(){return new Ee(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=-1;class Zd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function s_(n){return n.fields.find(e=>e.kind===2)}function oo(n){return n.fields.filter(e=>e.kind!==2)}Zd.UNKNOWN_ID=-1;class Id{constructor(e,t){this.fieldPath=e,this.kind=t}}class ch{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ch(0,wr.min())}}function gV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new wr(a,Ee.empty(),e)}function wI(n){return new wr(n.readTime,n.key,uh)}class wr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wr(Pe.min(),Ee.empty(),uh)}static max(){return new wr(Pe.max(),Ee.empty(),uh)}}function cv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==SI)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let a=0,o=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++o,u&&o===a&&t()},f=>r(f))}),u=!0,o===a&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(a=>a?X.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,o)=>{r.push(t.call(this,a,o))}),this.waitFor(r)}static mapArray(e,t){return new X((r,a)=>{const o=e.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const p=f;t(e[p]).next(y=>{u[p]=y,++h,h===o&&r(u)},y=>a(y))}})}static doWhile(e,t){return new X((r,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="SimpleDb";class Om{static open(e,t,r,a){try{return new Om(t,e.transaction(a,r))}catch(o){throw new Jc(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Vi,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Jc(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=hv(r.target.error);this.m.reject(new Jc(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(me(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _V(t)}}class pa{static delete(e){return me(yr,"Removing database:",e),co(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!H_())return!1;if(pa.v())return!0;const e=dn(),t=pa.C(e),r=0<t&&t<10,a=AI(e),o=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,pa.C(dn())===12.2&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(me(yr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=o=>{const u=o.target.result;t(u)},a.onblocked=()=>{r(new Jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=o=>{const u=o.target.error;u.name==="VersionError"?r(new _e(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new _e(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Jc(e,u))},a.onupgradeneeded=o=>{me(yr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.O.B(u,a.transaction,o.oldVersion,this.version).next(()=>{me(yr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const h=Om.open(this.db,e,o?"readonly":"readwrite",r),f=a(h).next(p=>(h.S(),p)).catch(p=>(h.abort(p),X.reject(p))).toPromise();return f.catch(()=>{}),await h.p,f}catch(h){const f=h,p=f.name!=="FirebaseError"&&u<3;if(me(yr,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function AI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class yV{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return co(this.q.delete())}}class Jc extends _e{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(n){return n.name==="IndexedDbTransactionError"}class _V{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(me(yr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(me(yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),co(r)}add(e){return me(yr,"ADD",this.store.name,e,e),co(this.store.add(e))}get(e){return co(this.store.get(e)).next(t=>(t===void 0&&(t=null),me(yr,"GET",this.store.name,e,t),t))}delete(e){return me(yr,"DELETE",this.store.name,e),co(this.store.delete(e))}count(){return me(yr,"COUNT",this.store.name),co(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const o=a.getAll(r.range);return new X((u,h)=>{o.onerror=f=>{h(f.target.error)},o.onsuccess=f=>{u(f.target.result)}})}{const o=this.cursor(r),u=[];return this.j(o,(h,f)=>{u.push(f)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new X((a,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{a(u.target.result)}})}J(e,t){me(yr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(o,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new X((r,a)=>{t.onerror=o=>{const u=hv(o.target.error);a(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}j(e,t){const r=[];return new X((a,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void a();const f=new yV(h),p=t(h.primaryKey,h.value,f);if(p instanceof X){const y=p.catch(v=>(f.done(),X.reject(v)));r.push(y)}f.isDone?a():f.K===null?h.continue():h.continue(f.K)}}).next(()=>X.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function co(n){return new X((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=hv(r.target.error);t(a)}})}let qw=!1;function hv(n){const e=pa.C(dn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qw||(qw=!0,setTimeout(()=>{throw r},0)),r}}return n}const eh="IndexBackfiller";class vV{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){me(eh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();me(eh,`Documents written: ${t}`)}catch(t){Aa(t)?me(eh,"Ignoring IndexedDB error during index backfill: ",t):await Go(t)}await this.te(6e4)})}}class EV{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,o=!0;return X.doWhile(()=>o===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return me(eh,`Processing collection: ${u}`),this.ie(e,u,a).next(h=>{a-=h,r.add(u)});o=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(a,o)).next(h=>(me(eh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((a,o)=>{const u=wI(o);cv(u,r)>0&&(r=u)}),new wr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Fr.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=-1;function Pm(n){return n==null}function hh(n){return n===0&&1/n==-1/0}function TV(n){return typeof n=="number"&&Number.isInteger(n)&&!hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="";function jn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hw(e)),e=bV(n.get(t),e);return Hw(e)}function bV(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case Jd:t+="";break;default:t+=o}}return t}function Hw(n){return n+Jd+""}function Oi(n){const e=n.length;if(De(e>=2),e===2)return De(n.charAt(0)===Jd&&n.charAt(1)===""),Et.emptyPath();const t=e-2,r=[];let a="";for(let o=0;o<e;){const u=n.indexOf(Jd,o);switch((u<0||u>t)&&Re(),n.charAt(u+1)){case"":const h=n.substring(o,u);let f;a.length===0?f=h:(a+=h,f=a,a=""),r.push(f);break;case"":a+=n.substring(o,u),a+="\0";break;case"":a+=n.substring(o,u+1);break;default:Re()}o=u+2}return new Et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="remoteDocuments",Dh="owner",kl="owner",fh="mutationQueues",wV="userId",ii="mutations",Gw="batchId",Eo="userMutationsIndex",$w=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n,e){return[n,jn(e)]}function II(n,e,t){return[n,jn(e),t]}const SV={},ru="documentMutations",em="remoteDocumentsV14",RV=["prefixPath","collectionGroup","readTime","documentId"],Cd="documentKeyIndex",AV=["prefixPath","collectionGroup","documentId"],xI="collectionGroupIndex",IV=["collectionGroup","readTime","prefixPath","documentId"],dh="remoteDocumentGlobal",a_="remoteDocumentGlobalKey",iu="targets",CI="queryTargetsIndex",xV=["canonicalId","targetId"],su="targetDocuments",CV=["targetId","path"],fv="documentTargetsIndex",DV=["path","targetId"],tm="targetGlobalKey",wo="targetGlobal",mh="collectionParents",NV=["collectionId","parent"],au="clientMetadata",OV="clientId",Mm="bundles",PV="bundleId",km="namedQueries",MV="name",dv="indexConfiguration",kV="indexId",o_="collectionGroupIndex",VV="collectionGroup",nm="indexState",LV=["indexId","uid"],DI="sequenceNumberIndex",UV=["uid","sequenceNumber"],rm="indexEntries",jV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NI="documentKeyIndex",BV=["indexId","uid","orderedDocumentKey"],Vm="documentOverlays",zV=["userId","collectionPath","documentId"],l_="collectionPathOverlayIndex",FV=["userId","collectionPath","largestBatchId"],OI="collectionGroupOverlayIndex",qV=["userId","collectionGroup","largestBatchId"],mv="globals",HV="name",PI=[fh,ii,ru,lo,iu,Dh,wo,su,au,dh,mh,Mm,km],GV=[...PI,Vm],MI=[fh,ii,ru,em,iu,Dh,wo,su,au,dh,mh,Mm,km,Vm],kI=MI,pv=[...kI,dv,nm,rm],$V=pv,KV=[...pv,mv];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends RI{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function pn(n,e){const t=He(n);return pa.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}}class cd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,a,o){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=a??Dn.EMPTY,this.right=o??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,o){return new Dn(e??this.key,t??this.value,r??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const o=r(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,r),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Dn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,r,a,o){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yw(this.data.getIterator())}getIteratorFrom(e){return new Yw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=r.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rt(this.comparator);return t.data=e,t}}class Yw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new rr([])}unionWith(e){let t=new Rt(Bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LI("Invalid base64 string: "+o):o}}(e);return new ln(t)}static fromUint8Array(e){const t=function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const YV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(n){if(De(!!n),typeof n=="string"){let e=0;const t=YV.exec(n);if(De(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(n.seconds),nanos:Lt(n.nanos)}}function Lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Es(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="server_timestamp",jI="__type__",BI="__previous_value__",zI="__local_write_time__";function gv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[jI])===null||t===void 0?void 0:t.stringValue)===UI}function Lm(n){const e=n.mapValue.fields[BI];return gv(e)?Lm(e):e}function ph(n){const e=vs(n.mapValue.fields[zI].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,t,r,a,o,u,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}const im="(default)";class Mo{constructor(e,t){this.projectId=e,this.database=t||im}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database===im}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="__type__",FI="__max__",ha={mapValue:{fields:{__type__:{stringValue:FI}}}},_v="__vector__",ou="value",Dd={nullValue:"NULL_VALUE"};function _a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gv(n)?4:qI(n)?9007199254740991:Um(n)?10:11:Re()}function Ui(n,e){if(n===e)return!0;const t=_a(n);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ph(n).isEqual(ph(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=vs(a.timestampValue),h=vs(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return Es(a.bytesValue).isEqual(Es(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return Lt(a.geoPointValue.latitude)===Lt(o.geoPointValue.latitude)&&Lt(a.geoPointValue.longitude)===Lt(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return Lt(a.integerValue)===Lt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=Lt(a.doubleValue),h=Lt(o.doubleValue);return u===h?hh(u)===hh(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return nu(n.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return function(a,o){const u=a.mapValue.fields||{},h=o.mapValue.fields||{};if(Kw(u)!==Kw(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ui(u[f],h[f])))return!1;return!0}(n,e);default:return Re()}}function gh(n,e){return(n.values||[]).find(t=>Ui(t,e))!==void 0}function va(n,e){if(n===e)return 0;const t=_a(n),r=_a(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Lt(o.integerValue||o.doubleValue),f=Lt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return Qw(n.timestampValue,e.timestampValue);case 4:return Qw(ph(n),ph(e));case 5:return i_(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Es(o),f=Es(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),f=u.split("/");for(let p=0;p<h.length&&p<f.length;p++){const y=ze(h[p],f[p]);if(y!==0)return y}return ze(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=ze(Lt(o.latitude),Lt(u.latitude));return h!==0?h:ze(Lt(o.longitude),Lt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xw(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,f,p,y;const v=o.fields||{},T=u.fields||{},S=(h=v[ou])===null||h===void 0?void 0:h.arrayValue,C=(f=T[ou])===null||f===void 0?void 0:f.arrayValue,M=ze(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:Xw(S,C)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===ha.mapValue&&u===ha.mapValue)return 0;if(o===ha.mapValue)return 1;if(u===ha.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),p=u.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const T=i_(f[v],y[v]);if(T!==0)return T;const S=va(h[f[v]],p[y[v]]);if(S!==0)return S}return ze(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Re()}}function Qw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=vs(n),r=vs(e),a=ze(t.seconds,r.seconds);return a!==0?a:ze(t.nanos,r.nanos)}function Xw(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const o=va(t[a],r[a]);if(o)return o}return ze(t.length,r.length)}function lu(n){return c_(n)}function c_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=vs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(const o of t.values||[])a?a=!1:r+=",",r+=c_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const u of r)o?o=!1:a+=",",a+=`${u}:${c_(t.fields[u])}`;return a+"}"}(n.mapValue):Re()}function Nd(n){switch(_a(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lm(n);return e?16+Nd(e):16;case 5:return 2*n.stringValue.length;case 6:return Es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,o)=>a+Nd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let a=0;return Ia(r.fields,(o,u)=>{a+=o.length+Nd(u)}),a}(n.mapValue);default:throw Re()}}function yh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function h_(n){return!!n&&"integerValue"in n}function _h(n){return!!n&&"arrayValue"in n}function Ww(n){return!!n&&"nullValue"in n}function Zw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Od(n){return!!n&&"mapValue"in n}function Um(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[yv])===null||t===void 0?void 0:t.stringValue)===_v}function th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ia(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=th(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=th(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FI}const HI={mapValue:{fields:{[yv]:{stringValue:_v},[ou]:{arrayValue:{}}}}};function XV(n){return"nullValue"in n?Dd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yh(Mo.empty(),Ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Um(n)?HI:{mapValue:{}}:Re()}function WV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yh(Mo.empty(),Ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?HI:"mapValue"in n?Um(n)?{mapValue:{}}:ha:Re()}function Jw(n,e){const t=va(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eS(n,e){const t=va(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(t)}setAll(e){let t=Bt.emptyPath(),r={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,a),r={},a=[],t=h.popLast()}u?r[h.lastSegment()]=th(u):a.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,a)}delete(e){const t=this.field(e.popLast());Od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Od(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ia(t,(a,o)=>e[a]=o);for(const a of r)delete e[a]}clone(){return new Ln(th(this.value))}}function GI(n){const e=[];return Ia(n.fields,(t,r)=>{const a=new Bt([t]);if(Od(r)){const o=GI(r.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,r,a,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Gt(e,0,Pe.min(),Pe.min(),Pe.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,a){return new Gt(e,1,t,Pe.min(),r,a,0)}static newNoDocument(e,t){return new Gt(e,2,t,Pe.min(),Pe.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Pe.min(),Pe.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t){this.position=e,this.inclusive=t}}function tS(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const o=e[a],u=n.position[a];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(u.referenceValue),t.key):r=va(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{}class st extends $I{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JV(e,t,r):t==="array-contains"?new nL(e,r):t==="in"?new ZI(e,r):t==="not-in"?new rL(e,r):t==="array-contains-any"?new iL(e,r):new st(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eL(e,r):new tL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(va(t,this.value)):t!==null&&_a(this.value)===_a(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends $I{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new St(e,t)}matches(e){return cu(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function cu(n){return n.op==="and"}function f_(n){return n.op==="or"}function vv(n){return KI(n)&&cu(n)}function KI(n){for(const e of n.filters)if(e instanceof St)return!1;return!0}function d_(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+lu(n.value);if(vv(n))return n.filters.map(e=>d_(e)).join(",");{const e=n.filters.map(t=>d_(t)).join(",");return`${n.op}(${e})`}}function YI(n,e){return n instanceof st?function(r,a){return a instanceof st&&r.op===a.op&&r.field.isEqual(a.field)&&Ui(r.value,a.value)}(n,e):n instanceof St?function(r,a){return a instanceof St&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((o,u,h)=>o&&YI(u,a.filters[h]),!0):!1}(n,e):void Re()}function QI(n,e){const t=n.filters.concat(e);return St.create(t,n.op)}function XI(n){return n instanceof st?function(t){return`${t.field.canonicalString()} ${t.op} ${lu(t.value)}`}(n):n instanceof St?function(t){return t.op.toString()+" {"+t.getFilters().map(XI).join(" ,")+"}"}(n):"Filter"}class JV extends st{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class eL extends st{constructor(e,t){super(e,"in",t),this.keys=WI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tL extends st{constructor(e,t){super(e,"not-in",t),this.keys=WI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class nL extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _h(t)&&gh(t.arrayValue,this.value)}}class ZI extends st{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gh(this.value.arrayValue,t)}}class rL extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!gh(this.value.arrayValue,t)}}class iL extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_h(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,t=null,r=[],a=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function m_(n,e=null,t=[],r=[],a=null,o=null,u=null){return new sL(n,e,t,r,a,o,u)}function ko(n){const e=He(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>d_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lu(r)).join(",")),e.le=t}return e.le}function Nh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!YI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nS(n.startAt,e.startAt)&&nS(n.endAt,e.endAt)}function am(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function om(n,e){return n.filters.filter(t=>t instanceof st&&t.field.isEqual(e))}function rS(n,e,t){let r=Dd,a=!0;for(const o of om(n,e)){let u=Dd,h=!0;switch(o.op){case"<":case"<=":u=XV(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=Dd}Jw({value:r,inclusive:a},{value:u,inclusive:h})<0&&(r=u,a=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];Jw({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function iS(n,e,t){let r=ha,a=!0;for(const o of om(n,e)){let u=ha,h=!0;switch(o.op){case">=":case">":u=WV(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=ha}eS({value:r,inclusive:a},{value:u,inclusive:h})>0&&(r=u,a=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];eS({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t=null,r=[],a=[],o=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function aL(n,e,t,r,a,o,u,h){return new Oh(n,e,t,r,a,o,u,h)}function Ph(n){return new Oh(n)}function sS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JI(n){return n.collectionGroup!==null}function nh(n){const e=He(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Rt(Bt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new sm(o,r))}),t.has(Bt.keyField().canonicalString())||e.he.push(new sm(Bt.keyField(),r))}return e.he}function qr(n){const e=He(n);return e.Pe||(e.Pe=oL(e,nh(n))),e.Pe}function oL(n,e){if(n.limitType==="F")return m_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new sm(a.field,o)});const t=n.endAt?new uu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new uu(n.startAt.position,n.startAt.inclusive):null;return m_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function p_(n,e){const t=n.filters.concat([e]);return new Oh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function g_(n,e,t){return new Oh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jm(n,e){return Nh(qr(n),qr(e))&&n.limitType===e.limitType}function e1(n){return`${ko(qr(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>XI(a)).join(", ")}]`),Pm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>lu(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>lu(a)).join(",")),`Target(${r})`}(qr(n))}; limitType=${n.limitType})`}function Mh(n,e){return e.isFoundDocument()&&function(r,a){const o=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,a){for(const o of nh(r))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,a){for(const o of r.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(u,h,f){const p=tS(u,h,f);return u.inclusive?p<=0:p<0}(r.startAt,nh(r),a)||r.endAt&&!function(u,h,f){const p=tS(u,h,f);return u.inclusive?p>=0:p>0}(r.endAt,nh(r),a))}(n,e)}function lL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t1(n){return(e,t)=>{let r=!1;for(const a of nh(n)){const o=uL(a,e,t);if(o!==0)return o;r=r||a.field.isKeyField()}return 0}}function uL(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(o,u,h){const f=u.data.field(o),p=h.data.field(o);return f!==null&&p!==null?va(f,p):Re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,o]of r)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(t,r)=>{for(const[a,o]of r)e(a,o)})}isEmpty(){return VI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Ut(Ee.comparator);function vr(){return cL}const n1=new Ut(Ee.comparator);function Fc(...n){let e=n1;for(const t of n)e=e.insert(t.key,t);return e}function r1(n){let e=n1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pi(){return rh()}function i1(){return rh()}function rh(){return new Rs(n=>n.toString(),(n,e)=>n.isEqual(e))}const hL=new Ut(Ee.comparator),fL=new Rt(Ee.comparator);function Xe(...n){let e=fL;for(const t of n)e=e.add(t);return e}const dL=new Rt(ze);function mL(){return dL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function s1(n){return{integerValue:""+n}}function pL(n,e){return TV(e)?s1(e):Ev(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._=void 0}}function gL(n,e,t){return n instanceof hu?function(a,o){const u={fields:{[jI]:{stringValue:UI},[zI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&gv(o)&&(o=Lm(o)),o&&(u.fields[BI]=o),{mapValue:u}}(t,e):n instanceof fu?o1(n,e):n instanceof du?l1(n,e):function(a,o){const u=a1(a,o),h=aS(u)+aS(a.Ie);return h_(u)&&h_(a.Ie)?s1(h):Ev(a.serializer,h)}(n,e)}function yL(n,e,t){return n instanceof fu?o1(n,e):n instanceof du?l1(n,e):t}function a1(n,e){return n instanceof vh?function(r){return h_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class hu extends Bm{}class fu extends Bm{constructor(e){super(),this.elements=e}}function o1(n,e){const t=u1(e);for(const r of n.elements)t.some(a=>Ui(a,r))||t.push(r);return{arrayValue:{values:t}}}class du extends Bm{constructor(e){super(),this.elements=e}}function l1(n,e){let t=u1(e);for(const r of n.elements)t=t.filter(a=>!Ui(a,r));return{arrayValue:{values:t}}}class vh extends Bm{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function aS(n){return Lt(n.integerValue||n.doubleValue)}function u1(n){return _h(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t){this.field=e,this.transform=t}}function _L(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof fu&&a instanceof fu||r instanceof du&&a instanceof du?nu(r.elements,a.elements,Ui):r instanceof vh&&a instanceof vh?Ui(r.Ie,a.Ie):r instanceof hu&&a instanceof hu}(n.transform,e.transform)}class vL{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zm{}function h1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fm(n.key,Un.none()):new bu(n.key,n.data,Un.none());{const t=n.data,r=Ln.empty();let a=new Rt(Bt.comparator);for(let o of e.fields)if(!a.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),a=a.add(o)}return new As(n.key,r,new rr(a.toArray()),Un.none())}}function EL(n,e,t){n instanceof bu?function(a,o,u){const h=a.value.clone(),f=lS(a.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof As?function(a,o,u){if(!Pd(a.precondition,o))return void o.convertToUnknownDocument(u.version);const h=lS(a.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(f1(a)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function ih(n,e,t,r){return n instanceof bu?function(o,u,h,f){if(!Pd(o.precondition,u))return h;const p=o.value.clone(),y=uS(o.fieldTransforms,f,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof As?function(o,u,h,f){if(!Pd(o.precondition,u))return h;const p=uS(o.fieldTransforms,f,u),y=u.data;return y.setAll(f1(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,u,h){return Pd(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function TL(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),o=a1(r.transform,a||null);o!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,o))}return t||null}function oS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&nu(r,a,(o,u)=>_L(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bu extends zm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class As extends zm{constructor(e,t,r,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function f1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lS(n,e,t){const r=new Map;De(n.length===t.length);for(let a=0;a<t.length;a++){const o=n[a],u=o.transform,h=e.data.field(o.field);r.set(o.field,yL(u,h,t[a]))}return r}function uS(n,e,t){const r=new Map;for(const a of n){const o=a.transform,u=t.data.field(a.field);r.set(a.field,gL(o,u,e))}return r}class Fm extends zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d1 extends zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&EL(o,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ih(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ih(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=i1();return this.mutations.forEach(a=>{const o=e.get(a.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(a.key)?null:h;const f=h1(u,h);f!==null&&r.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,(t,r)=>oS(t,r))&&nu(this.baseMutations,e.baseMutations,(t,r)=>oS(t,r))}}class bv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){De(e.mutations.length===r.length);let a=function(){return hL}();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,r[u].version);return new bv(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,ct;function wL(n){switch(n){case ae.OK:return Re();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Re()}}function m1(n){if(n===void 0)return Qn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case on.OK:return ae.OK;case on.CANCELLED:return ae.CANCELLED;case on.UNKNOWN:return ae.UNKNOWN;case on.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case on.INTERNAL:return ae.INTERNAL;case on.UNAVAILABLE:return ae.UNAVAILABLE;case on.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case on.NOT_FOUND:return ae.NOT_FOUND;case on.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case on.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case on.ABORTED:return ae.ABORTED;case on.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case on.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case on.DATA_LOSS:return ae.DATA_LOSS;default:return Re()}}(ct=on||(on={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=new ma([4294967295,4294967295],0);function cS(n){const e=EI().encode(n),t=new mI;return t.update(e),new Uint8Array(t.digest())}function hS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ma([t,r],0),new ma([a,o],0)]}class Sv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qc(`Invalid padding: ${t}`);if(r<0)throw new qc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ma.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(ma.fromNumber(r)));return a.compare(SL)===1&&(a=new ma([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=cS(e),[r,a]=hS(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,a,o);if(!this.Re(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Sv(o,a,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=cS(e),[r,a]=hS(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,a,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t,r,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qm(Pe.min(),a,new Ut(ze),vr(),Xe())}}class kh{constructor(e,t,r,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kh(r,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class p1{constructor(e,t){this.targetId=e,this.ge=t}}class g1{constructor(e,t,r=ln.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class fS{constructor(){this.pe=0,this.ye=dS(),this.we=ln.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Xe(),t=Xe(),r=Xe();return this.ye.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Re()}}),new kh(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=dS()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,De(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class RL{constructor(e){this.ke=e,this.qe=new Map,this.Qe=vr(),this.$e=hd(),this.Ue=hd(),this.Ke=new Ut(ze)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const o=a.target;if(am(o))if(r===0){const u=new Ee(o.path);this.ze(t,u,Gt.newNoDocument(u,Pe.min()))}else De(r===1);else{const u=this.et(t);if(u!==r){const h=this.tt(e),f=h?this.nt(h,e,u):1;if(f!==0){this.Ye(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:o=0}=t;let u,h;try{u=Es(r).toUint8Array()}catch(f){if(f instanceof LI)return lh("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Sv(u,a,o)}catch(f){return lh(f instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&am(h.target)){const f=new Ee(h.target.path);this._t(f).has(u)||this.ut(u,f)||this.ze(u,f,Gt.newNoDocument(f,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let r=Xe();this.Ue.forEach((o,u)=>{let h=!0;u.forEachWhile(f=>{const p=this.Xe(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const a=new qm(e,t,this.Ke,this.Qe,r);return this.Qe=vr(),this.$e=hd(),this.Ue=hd(),this.Ke=new Ut(ze),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new fS,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Rt(ze),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Rt(ze),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new fS),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function hd(){return new Ut(Ee.comparator)}function dS(){return new Ut(Ee.comparator)}const AL={asc:"ASCENDING",desc:"DESCENDING"},IL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xL={and:"AND",or:"OR"};class CL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y_(n,e){return n.useProto3Json||Pm(e)?e:{value:e}}function mu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DL(n,e){return mu(n,e.toTimestamp())}function Wn(n){return De(!!n),Pe.fromTimestamp(function(t){const r=vs(t);return new zt(r.seconds,r.nanos)}(n))}function Rv(n,e){return __(n,e).canonicalString()}function __(n,e){const t=function(a){return new Et(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _1(n){const e=Et.fromString(n);return De(I1(e)),e}function lm(n,e){return Rv(n.databaseId,e.path)}function So(n,e){const t=_1(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(T1(t))}function v1(n,e){return Rv(n.databaseId,e)}function E1(n){const e=_1(n);return e.length===4?Et.emptyPath():T1(e)}function v_(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T1(n){return De(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function mS(n,e,t){return{name:lm(n,e),fields:t.value.mapValue.fields}}function NL(n,e,t){const r=So(n,e.name),a=Wn(e.updateTime),o=e.createTime?Wn(e.createTime):Pe.min(),u=new Ln({mapValue:{fields:e.fields}}),h=Gt.newFoundDocument(r,a,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function OL(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(De(y===void 0||typeof y=="string"),ln.fromBase64String(y||"")):(De(y===void 0||y instanceof Buffer||y instanceof Uint8Array),ln.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=p.code===void 0?ae.UNKNOWN:m1(p.code);return new _e(y,p.message||"")}(u);t=new g1(r,a,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=So(n,r.document.name),o=Wn(r.document.updateTime),u=r.document.createTime?Wn(r.document.createTime):Pe.min(),h=new Ln({mapValue:{fields:r.document.fields}}),f=Gt.newFoundDocument(a,o,u,h),p=r.targetIds||[],y=r.removedTargetIds||[];t=new Md(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=So(n,r.document),o=r.readTime?Wn(r.readTime):Pe.min(),u=Gt.newNoDocument(a,o),h=r.removedTargetIds||[];t=new Md([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=So(n,r.document),o=r.removedTargetIds||[];t=new Md([],o,a,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:o}=r,u=new bL(a,o),h=r.targetId;t=new p1(h,u)}}return t}function um(n,e){let t;if(e instanceof bu)t={update:mS(n,e.key,e.value)};else if(e instanceof Fm)t={delete:lm(n,e.key)};else if(e instanceof As)t={update:mS(n,e.key,e.data),updateMask:UL(e.fieldMask)};else{if(!(e instanceof d1))return Re();t={verify:lm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof hu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof du)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof vh)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:DL(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Re()}(n,e.precondition)),t}function E_(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Un.updateTime(Wn(o.updateTime)):o.exists!==void 0?Un.exists(o.exists):Un.none()}(e.currentDocument):Un.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(u,h){let f=null;if("setToServerValue"in h)De(h.setToServerValue==="REQUEST_TIME"),f=new hu;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];f=new fu(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];f=new du(y)}else"increment"in h?f=new vh(u,h.increment):Re();const p=Bt.fromServerFormat(h.fieldPath);return new c1(p,f)}(n,a)):[];if(e.update){e.update.name;const a=So(n,e.update.name),o=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(f){const p=f.fieldPaths||[];return new rr(p.map(y=>Bt.fromServerFormat(y)))}(e.updateMask);return new As(a,o,u,t,r)}return new bu(a,o,t,r)}if(e.delete){const a=So(n,e.delete);return new Fm(a,t)}if(e.verify){const a=So(n,e.verify);return new d1(a,t)}return Re()}function PL(n,e){return n&&n.length>0?(De(e!==void 0),n.map(t=>function(a,o){let u=a.updateTime?Wn(a.updateTime):Wn(o);return u.isEqual(Pe.min())&&(u=Wn(o)),new vL(u,a.transformResults||[])}(t,e))):[]}function b1(n,e){return{documents:[v1(n,e.path)]}}function w1(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=v1(n,a);const o=function(p){if(p.length!==0)return A1(St.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(y=>function(T){return{field:Kl(T.field),direction:kL(T.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=y_(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function S1(n){let e=E1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){De(r===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const T=R1(v);return T instanceof St&&vv(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(T=>function(C){return new sm(Yl(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,Pm(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(v){const T=!!v.before,S=v.values||[];return new uu(S,T)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const T=!v.before,S=v.values||[];return new uu(S,T)}(t.endAt)),aL(e,a,u,o,h,"F",f,p)}function ML(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yl(t.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Yl(t.unaryFilter.field);return st.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yl(t.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Yl(t.unaryFilter.field);return st.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(n):n.fieldFilter!==void 0?function(t){return st.create(Yl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return St.create(t.compositeFilter.filters.map(r=>R1(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(n):Re()}function kL(n){return AL[n]}function VL(n){return IL[n]}function LL(n){return xL[n]}function Kl(n){return{fieldPath:n.canonicalString()}}function Yl(n){return Bt.fromServerFormat(n.fieldPath)}function A1(n){return n instanceof st?function(t){if(t.op==="=="){if(Zw(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NAN"}};if(Ww(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zw(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NAN"}};if(Ww(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(t.field),op:VL(t.op),value:t.value}}}(n):n instanceof St?function(t){const r=t.getFilters().map(a=>A1(a));return r.length===1?r[0]:{compositeFilter:{op:LL(t.op),filters:r}}}(n):Re()}function UL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,r,a,o=Pe.min(),u=Pe.min(),h=ln.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.Tt=e}}function jL(n,e){let t;if(e.document)t=NL(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ee.fromSegments(e.noDocument.path),a=Lo(e.noDocument.readTime);t=Gt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Re();{const r=Ee.fromSegments(e.unknownDocument.path),a=Lo(e.unknownDocument.version);t=Gt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const o=new zt(a[0],a[1]);return Pe.fromTimestamp(o)}(e.readTime)),t}function pS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,u){return{name:lm(o,u.key),fields:u.data.value.mapValue.fields,updateTime:mu(o,u.version.toTimestamp()),createTime:mu(o,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return Re();r.unknownDocument={path:t.path.toArray(),version:Vo(e.version)}}return r}function cm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lo(n){const e=new zt(n.seconds,n.nanoseconds);return Pe.fromTimestamp(e)}function ho(n,e){const t=(e.baseMutations||[]).map(o=>E_(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>E_(n.Tt,o)),a=zt.fromMillis(e.localWriteTimeMs);return new Tv(e.batchId,a,t,r)}function Hc(n){const e=Lo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Lo(n.lastLimboFreeSnapshotVersion):Pe.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return De(o.documents.length===1),qr(Ph(E1(o.documents[0])))}(n.query):function(o){return qr(S1(o))}(n.query),new ms(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ln.fromBase64String(n.resumeToken))}function C1(n,e){const t=Vo(e.snapshotVersion),r=Vo(e.lastLimboFreeSnapshotVersion);let a;a=am(e.target)?b1(n.Tt,e.target):w1(n.Tt,e.target).ht;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ko(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function D1(n){const e=S1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?g_(e,e.limit,"L"):e}function Ry(n,e){return new wv(e.largestBatchId,E_(n.Tt,e.overlayMutation))}function gS(n,e){const t=e.path.lastSegment();return[n,jn(e.path.popLast()),t]}function yS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Vo(r.readTime),documentKey:jn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{getBundleMetadata(e,t){return _S(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Lo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return _S(e).put(function(a){return{bundleId:a.id,createTime:Vo(Wn(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return vS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:D1(o.bundledQuery),readTime:Lo(o.readTime)}}(r)})}saveNamedQuery(e,t){return vS(e).put(function(a){return{name:a.name,readTime:Vo(Wn(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function _S(n){return pn(n,Mm)}function vS(n){return pn(n,km)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Hm(e,r)}getOverlay(e,t){return Ic(e).get(gS(this.userId,t)).next(r=>r?Ry(this.serializer,r):null)}getOverlays(e,t){const r=Pi();return X.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&r.set(a,o)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((o,u)=>{const h=new wv(t,u);a.push(this.Et(e,h))}),X.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(u=>a.add(jn(u.getCollectionPath())));const o=[];return a.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(Ic(e).J(l_,h))}),X.waitFor(o)}getOverlaysForCollection(e,t,r){const a=Pi(),o=jn(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ic(e).G(l_,u).next(h=>{for(const f of h){const p=Ry(this.serializer,f);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const o=Pi();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).Z({index:OI,range:h},(f,p,y)=>{const v=Ry(this.serializer,p);o.size()<a||v.largestBatchId===u?(o.set(v.getKey(),v),u=v.largestBatchId):y.done()}).next(()=>o)}Et(e,t){return Ic(e).put(function(a,o,u){const[h,f,p]=gS(o,u.mutation.key);return{userId:o,collectionPath:f,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:um(a.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Ic(n){return pn(n,Vm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{dt(e){return pn(e,mv)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?ln.fromUint8Array(r):ln.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Lt(e.integerValue));else if("doubleValue"in e){const r=Lt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),hh(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=vs(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Es(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?qI(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Um(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Re()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const o=e.fields||{};this.ft(t,53);const u=ou,h=((a=(r=o[u].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(Lt(h)),this.wt(u,t),this.Rt(o[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),Ee.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}fo.xt=new fo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=255;function FL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function ES(n){const e=64-function(r){let a=0;for(let o=0;o<8;++o){const u=FL(255&r[o]);if(a+=u,u!==8)break}return a}(n);return Math.ceil(e/8)}class qL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=ES(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=ES(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Ll),this.jt(255)}Ht(){this.Jt(Ll),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Ll?(this.jt(Ll),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Ll?(this.Jt(Ll),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class HL{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class GL{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class xc{constructor(){this.Zt=new qL,this.Xt=new HL(this.Zt),this.en=new GL(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mo(this.indexId,this.documentKey,this.arrayValue,r)}}function ea(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=TS(n.arrayValue,e.arrayValue),t!==0?t:(t=TS(n.directionalValue,e.directionalValue),t!==0?t:Ee.comparator(n.documentKey,e.documentKey)))}function TS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.rn=new Rt((t,r)=>Bt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(De(e.collectionGroup===this.collectionId),this.an)return!1;const t=s_(e);if(t!==void 0&&!this.cn(t))return!1;const r=oo(e);let a=new Set,o=0,u=0;for(;o<r.length&&this.cn(r[o]);++o)a=a.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){const h=this.rn.getIterator().getNext();if(!a.has(h.field.canonicalString())){const f=r[o];if(!this.ln(h,f)||!this.hn(this.sn[u++],f))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.sn.length||!this.hn(this.sn[u++],h))return!1}return!0}Pn(){if(this.an)return null;let e=new Rt(Bt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Id(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Id(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Id(r.field,r.dir==="asc"?0:1)));return new Zd(Zd.UNKNOWN_ID,this.collectionId,t,ch.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(n){var e,t;if(De(n instanceof st||n instanceof St),n instanceof st){if(n instanceof ZI){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>st.create(n.field,"==",o)))||[];return St.create(a,"or")}return n}const r=n.filters.map(a=>N1(a));return St.create(r,n.op)}function $L(n){if(n.getFilters().length===0)return[];const e=w_(N1(n));return De(O1(e)),T_(e)||b_(e)?[e]:e.getFilters()}function T_(n){return n instanceof st}function b_(n){return n instanceof St&&vv(n)}function O1(n){return T_(n)||b_(n)||function(t){if(t instanceof St&&f_(t)){for(const r of t.getFilters())if(!T_(r)&&!b_(r))return!1;return!0}return!1}(n)}function w_(n){if(De(n instanceof st||n instanceof St),n instanceof st)return n;if(n.filters.length===1)return w_(n.filters[0]);const e=n.filters.map(r=>w_(r));let t=St.create(e,n.op);return t=hm(t),O1(t)?t:(De(t instanceof St),De(cu(t)),De(t.filters.length>1),t.filters.reduce((r,a)=>Av(r,a)))}function Av(n,e){let t;return De(n instanceof st||n instanceof St),De(e instanceof st||e instanceof St),t=n instanceof st?e instanceof st?function(a,o){return St.create([a,o],"and")}(n,e):wS(n,e):e instanceof st?wS(e,n):function(a,o){if(De(a.filters.length>0&&o.filters.length>0),cu(a)&&cu(o))return QI(a,o.getFilters());const u=f_(a)?a:o,h=f_(a)?o:a,f=u.filters.map(p=>Av(p,h));return St.create(f,"or")}(n,e),hm(t)}function wS(n,e){if(cu(e))return QI(e,n.getFilters());{const t=e.filters.map(r=>Av(n,r));return St.create(t,"or")}}function hm(n){if(De(n instanceof st||n instanceof St),n instanceof st)return n;const e=n.getFilters();if(e.length===1)return hm(e[0]);if(KI(n))return n;const t=e.map(a=>hm(a)),r=[];return t.forEach(a=>{a instanceof st?r.push(a):a instanceof St&&(a.op===n.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:St.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.Tn=new Iv}addToCollectionParentIndex(e,t){return this.Tn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(wr.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class Iv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Rt(Et.comparator),o=!a.has(r);return this.index[t]=a.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Rt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="IndexedDbIndexManager",fd=new Uint8Array(0);class YL{constructor(e,t){this.databaseId=t,this.In=new Iv,this.En=new Rs(r=>ko(r),(r,a)=>Nh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const o={collectionId:r,parent:jn(a)};return RS(e).put(o)}return X.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[bI(t),""],!1,!0);return RS(e).G(a).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Oi(u.parent))}return r})}addFieldIndex(e,t){const r=Cc(e),a=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])}}(t);delete a.indexId;const o=r.add(a);if(t.indexState){const u=jl(e);return o.next(h=>{u.put(yS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Cc(e),a=jl(e),o=Ul(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Cc(e),r=Ul(e),a=jl(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return X.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const o=new bS(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Ul(e);let a=!0;const o=new Map;return X.forEach(this.dn(t),u=>this.An(e,u).next(h=>{a&&(a=!!h),o.set(u,h)})).next(()=>{if(a){let u=Xe();const h=[];return X.forEach(o,(f,p)=>{me(SS,`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(f)} to execute ${ko(t)}`);const y=function(k,K){const P=s_(K);if(P===void 0)return null;for(const ie of om(k,P.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(p,f),v=function(k,K){const P=new Map;for(const ie of oo(K))for(const O of om(k,ie.fieldPath))switch(O.op){case"==":case"in":P.set(ie.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return P.set(ie.fieldPath.canonicalString(),O.value),Array.from(P.values())}return null}(p,f),T=function(k,K){const P=[];let ie=!0;for(const O of oo(K)){const I=O.kind===0?rS(k,O.fieldPath,k.startAt):iS(k,O.fieldPath,k.startAt);P.push(I.value),ie&&(ie=I.inclusive)}return new uu(P,ie)}(p,f),S=function(k,K){const P=[];let ie=!0;for(const O of oo(K)){const I=O.kind===0?iS(k,O.fieldPath,k.endAt):rS(k,O.fieldPath,k.endAt);P.push(I.value),ie&&(ie=I.inclusive)}return new uu(P,ie)}(p,f),C=this.Rn(f,p,T),M=this.Rn(f,p,S),D=this.Vn(f,p,v),F=this.mn(f.indexId,y,C,T.inclusive,M,S.inclusive,D);return X.forEach(F,B=>r.H(B,t.limit).next(k=>{k.forEach(K=>{const P=Ee.fromSegments(K.documentKey);u.has(P)||(u=u.add(P),h.push(P))})}))}).next(()=>h)}return X.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=$L(St.create(e.filters,"and")).map(r=>m_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,o,u,h){const f=(t!=null?t.length:1)*Math.max(r.length,o.length),p=f/(t!=null?t.length:1),y=[];for(let v=0;v<f;++v){const T=t?this.fn(t[v/p]):fd,S=this.gn(e,T,r[v%p],a),C=this.pn(e,T,o[v%p],u),M=h.map(D=>this.gn(e,T,D,!0));y.push(...this.createRange(S,C,M))}return y}gn(e,t,r,a){const o=new mo(e,Ee.empty(),t,r);return a?o:o.nn()}pn(e,t,r,a){const o=new mo(e,Ee.empty(),t,r);return a?o.nn():o}An(e,t){const r=new bS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(o=>{let u=null;for(const h of o)r.un(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const a=this.dn(t);return X.forEach(a,o=>this.An(e,o).next(u=>{u?r!==0&&u.fields.length<function(f){let p=new Rt(Bt.comparator),y=!1;for(const v of f.filters)for(const T of v.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?y=!0:p=p.add(T.field));for(const v of f.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new xc;for(const a of oo(e)){const o=t.data.field(a.fieldPath);if(o==null)return null;const u=r.tn(a.kind);fo.xt.At(o,u)}return r.Yt()}fn(e){const t=new xc;return fo.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new xc;return fo.xt.At(yh(this.databaseId,t),r.tn(function(o){const u=oo(o);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new xc);let o=0;for(const u of oo(e)){const h=r[o++];for(const f of a)if(this.Sn(t,u.fieldPath)&&_h(h))a=this.bn(a,u,h);else{const p=f.tn(u.kind);fo.xt.At(h,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of a){const f=new xc;f.seed(h.Yt()),fo.xt.At(u,f.tn(t.kind)),o.push(f)}return o}Sn(e,t){return!!e.filters.find(r=>r instanceof st&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Cc(e),a=jl(e);return(t?r.G(o_,IDBKeyRange.bound(t,t)):r.G()).next(o=>{const u=[];return X.forEach(o,h=>a.get([h.indexId,this.uid]).next(f=>{u.push(function(y,v){const T=v?new ch(v.sequenceNumber,new wr(Lo(v.readTime),new Ee(Oi(v.documentKey)),v.largestBatchId)):ch.empty(),S=y.fields.map(([C,M])=>new Id(Bt.fromServerFormat(C),M));return new Zd(y.indexId,y.collectionGroup,S,T)}(h,f))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const o=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return o!==0?o:ze(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Cc(e),o=jl(e);return this.vn(e).next(u=>a.G(o_,IDBKeyRange.bound(t,t)).next(h=>X.forEach(h,f=>o.put(yS(f.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,(a,o)=>{const u=r.get(a.collectionGroup);return(u?X.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next(h=>(r.set(a.collectionGroup,h),X.forEach(h,f=>this.Cn(e,a,f).next(p=>{const y=this.Fn(o,f);return p.isEqual(y)?X.resolve():this.Mn(e,o,f,p,y)}))))})}xn(e,t,r,a){return Ul(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return Ul(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=Ul(e);let o=new Rt(ea);return a.Z({index:NI,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,h)=>{o=o.add(new mo(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}Fn(e,t){let r=new Rt(ea);const a=this.yn(t,e);if(a==null)return r;const o=s_(t);if(o!=null){const u=e.data.field(o.fieldPath);if(_h(u))for(const h of u.arrayValue.values||[])r=r.add(new mo(t.indexId,e.key,this.fn(h),a))}else r=r.add(new mo(t.indexId,e.key,fd,a));return r}Mn(e,t,r,a,o){me(SS,"Updating index entries for document '%s'",t.key);const u=[];return function(f,p,y,v,T){const S=f.getIterator(),C=p.getIterator();let M=Vl(S),D=Vl(C);for(;M||D;){let F=!1,B=!1;if(M&&D){const k=y(M,D);k<0?B=!0:k>0&&(F=!0)}else M!=null?B=!0:F=!0;F?(v(D),D=Vl(C)):B?(T(M),M=Vl(S)):(M=Vl(S),D=Vl(C))}}(a,o,ea,h=>{u.push(this.xn(e,t,r,h))},h=>{u.push(this.On(e,t,r,h))}),X.waitFor(u)}vn(e){let t=1;return jl(e).Z({index:DI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,o)=>{o.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>ea(u,h)).filter((u,h,f)=>!h||ea(u,f[h-1])!==0);const a=[];a.push(e);for(const u of r){const h=ea(u,e),f=ea(u,t);if(h===0)a[0]=e.nn();else if(h>0&&f<0)a.push(u),a.push(u.nn());else if(f>0)break}a.push(t);const o=[];for(let u=0;u<a.length;u+=2){if(this.Nn(a[u],a[u+1]))return[];const h=[a[u].indexId,this.uid,a[u].arrayValue,a[u].directionalValue,fd,[]],f=[a[u+1].indexId,this.uid,a[u+1].arrayValue,a[u+1].directionalValue,fd,[]];o.push(IDBKeyRange.bound(h,f))}return o}Nn(e,t){return ea(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(AS)}getMinOffset(e,t){return X.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||Re())).next(AS)}}function RS(n){return pn(n,mh)}function Ul(n){return pn(n,rm)}function Cc(n){return pn(n,dv)}function jl(n){return pn(n,nm)}function AS(n){De(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;cv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new wr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P1=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e,t){const r=n.store(ii),a=n.store(ru),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const f=r.Z({range:u},(y,v,T)=>(h++,T.delete()));o.push(f.next(()=>{De(h===1)}));const p=[];for(const y of t.mutations){const v=II(e,y.key.path,t.batchId);o.push(a.delete(v)),p.push(y.key)}return X.waitFor(o).next(()=>p)}function fm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Re();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(P1,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class Gm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){De(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Gm(o,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).Z({index:Eo,range:r},(a,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const o=Ql(e),u=ta(e);return u.add({}).next(h=>{De(typeof h=="number");const f=new Tv(h,t,r,a),p=function(S,C,M){const D=M.baseMutations.map(B=>um(S.Tt,B)),F=M.mutations.map(B=>um(S.Tt,B));return{userId:C,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:D,mutations:F}}(this.serializer,this.userId,f),y=[];let v=new Rt((T,S)=>ze(T.canonicalString(),S.canonicalString()));for(const T of a){const S=II(this.userId,T.key.path,h);v=v.add(T.key.path.popLast()),y.push(u.put(p)),y.push(o.put(S,SV))}return v.forEach(T=>{y.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Bn[h]=f.keys()}),X.waitFor(y).next(()=>f)})}lookupMutationBatch(e,t){return ta(e).get(t).next(r=>r?(De(r.userId===this.userId),ho(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?X.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ta(e).Z({index:Eo,range:a},(u,h,f)=>{h.userId===this.userId&&(De(h.batchId>=r),o=ho(this.serializer,h)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=bo;return ta(e).Z({index:Eo,range:t,reverse:!0},(a,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,bo],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).G(Eo,t).next(r=>r.map(a=>ho(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xd(this.userId,t.path),a=IDBKeyRange.lowerBound(r),o=[];return Ql(e).Z({range:a},(u,h,f)=>{const[p,y,v]=u,T=Oi(y);if(p===this.userId&&t.path.isEqual(T))return ta(e).get(v).next(S=>{if(!S)throw Re();De(S.userId===this.userId),o.push(ho(this.serializer,S))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rt(ze);const a=[];return t.forEach(o=>{const u=xd(this.userId,o.path),h=IDBKeyRange.lowerBound(u),f=Ql(e).Z({range:h},(p,y,v)=>{const[T,S,C]=p,M=Oi(S);T===this.userId&&o.path.isEqual(M)?r=r.add(C):v.done()});a.push(f)}),X.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,o=xd(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new Rt(ze);return Ql(e).Z({range:u},(f,p,y)=>{const[v,T,S]=f,C=Oi(T);v===this.userId&&r.isPrefixOf(C)?C.length===a&&(h=h.add(S)):y.done()}).next(()=>this.kn(e,h))}kn(e,t){const r=[],a=[];return t.forEach(o=>{a.push(ta(e).get(o).next(u=>{if(u===null)throw Re();De(u.userId===this.userId),r.push(ho(this.serializer,u))}))}),X.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return M1(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),X.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),a=[];return Ql(e).Z({range:r},(o,u,h)=>{if(o[0]===this.userId){const f=Oi(o[1]);a.push(f)}else h.done()}).next(()=>{De(a.length===0)})})}containsKey(e,t){return k1(e,this.userId,t)}Qn(e){return V1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:bo,lastStreamToken:""})}}function k1(n,e,t){const r=xd(e,t.path),a=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Ql(n).Z({range:o,Y:!0},(h,f,p)=>{const[y,v,T]=h;y===e&&v===a&&(u=!0),p.done()}).next(()=>u)}function ta(n){return pn(n,ii)}function Ql(n){return pn(n,ru)}function V1(n){return pn(n,fh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Uo(0)}static Kn(){return new Uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Uo(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Pe.fromTimestamp(new zt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bl(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const o=[];return Bl(e).Z((u,h)=>{const f=Hc(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(a++,o.push(this.removeTargetData(e,f)))}).next(()=>X.waitFor(o)).next(()=>a)}forEachTarget(e,t){return Bl(e).Z((r,a)=>{const o=Hc(a);t(o)})}Wn(e){return xS(e).get(tm).next(t=>(De(t!==null),t))}Gn(e,t){return xS(e).put(tm,t)}zn(e,t){return Bl(e).put(C1(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ko(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Bl(e).Z({range:a,index:CI},(u,h,f)=>{const p=Hc(h);Nh(t,p.target)&&(o=p,f.done())}).next(()=>o)}addMatchingKeys(e,t,r){const a=[],o=la(e);return t.forEach(u=>{const h=jn(u.path);a.push(o.put({targetId:r,path:h})),a.push(this.referenceDelegate.addReference(e,r,u))}),X.waitFor(a)}removeMatchingKeys(e,t,r){const a=la(e);return X.forEach(t,o=>{const u=jn(o.path);return X.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=la(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=la(e);let o=Xe();return a.Z({range:r,Y:!0},(u,h,f)=>{const p=Oi(u[1]),y=new Ee(p);o=o.add(y)}).next(()=>o)}containsKey(e,t){const r=jn(t.path),a=IDBKeyRange.bound([r],[bI(r)],!1,!0);let o=0;return la(e).Z({index:fv,Y:!0,range:a},([u,h],f,p)=>{u!==0&&(o++,p.done())}).next(()=>o>0)}lt(e,t){return Bl(e).get(t).next(r=>r?Hc(r):null)}}function Bl(n){return pn(n,iu)}function xS(n){return pn(n,wo)}function la(n){return pn(n,su)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="LruGarbageCollector",L1=1048576;function DS([n,e],[t,r]){const a=ze(n,t);return a===0?ze(e,r):a}class XL{constructor(e){this.Hn=e,this.buffer=new Rt(DS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();DS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(CS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Aa(t)?me(CS,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.er(3e5)})}}class WL{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Fr.ae);const r=new XL(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(IS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,o,u,h,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),Gl()<=it.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function j1(n,e){return new WL(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t){this.db=e,this.garbageCollector=j1(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return dd(e,r)}removeReference(e,t,r){return dd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dd(e,t)}ar(e,t){return function(a,o){let u=!1;return V1(a).X(h=>k1(a,h,o).next(f=>(f&&(u=!0),X.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let o=0;return this._r(e,(u,h)=>{if(h<=t){const f=this.ar(e,u).next(p=>{if(!p)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Pe.min()),la(e).delete(function(v){return[0,jn(v.path)]}(u))))});a.push(f)}}).next(()=>X.waitFor(a)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dd(e,t)}_r(e,t){const r=la(e);let a,o=Fr.ae;return r.Z({index:fv},([u,h],{path:f,sequenceNumber:p})=>{u===0?(o!==Fr.ae&&t(new Ee(Oi(a)),o),o=p,a=f):o=Fr.ae}).next(()=>{o!==Fr.ae&&t(new Ee(Oi(a)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dd(n,e){return la(n).put(function(r,a){return{targetId:0,path:jn(r.path),sequenceNumber:a}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return so(e).put(r)}removeEntry(e,t,r){return so(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],cm(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=Gt.newInvalidDocument(t);return so(e).Z({index:Cd,range:IDBKeyRange.only(Dc(t))},(a,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:Gt.newInvalidDocument(t)};return so(e).Z({index:Cd,range:IDBKeyRange.only(Dc(t))},(a,o)=>{r={document:this.cr(t,o),size:fm(o)}}).next(()=>r)}getEntries(e,t){let r=vr();return this.hr(e,t,(a,o)=>{const u=this.cr(a,o);r=r.insert(a,u)}).next(()=>r)}Pr(e,t){let r=vr(),a=new Ut(Ee.comparator);return this.hr(e,t,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h),a=a.insert(o,fm(u))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return X.resolve();let a=new Rt(PS);t.forEach(f=>a=a.add(f));const o=IDBKeyRange.bound(Dc(a.first()),Dc(a.last())),u=a.getIterator();let h=u.getNext();return so(e).Z({index:Cd,range:o},(f,p,y)=>{const v=Ee.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&PS(h,v)<0;)r(h,null),h=u.getNext();h&&h.isEqual(v)&&(r(h,p),h=u.hasNext()?u.getNext():null),h?y.W(Dc(h)):y.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),cm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).G(IDBKeyRange.bound(h,f,!0)).next(p=>{o==null||o.incrementDocumentReadCount(p.length);let y=vr();for(const v of p){const T=this.cr(Ee.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);T.isFoundDocument()&&(Mh(t,T)||a.has(T.key))&&(y=y.insert(T.key,T))}return y})}getAllFromCollectionGroup(e,t,r,a){let o=vr();const u=OS(t,r),h=OS(t,wr.max());return so(e).Z({index:xI,range:IDBKeyRange.bound(u,h,!0)},(f,p,y)=>{const v=this.cr(Ee.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(v.key,v),o.size===a&&y.done()}).next(()=>o)}newChangeBuffer(e){return new e4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return NS(e).get(a_).next(t=>(De(!!t),t))}ur(e,t){return NS(e).put(a_,t)}cr(e,t){if(t){const r=jL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pe.min())))return r}return Gt.newInvalidDocument(e)}}function z1(n){return new JL(n)}class e4 extends B1{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Rs(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Rt((o,u)=>ze(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,h.readTime)),u.isValidDocument()){const f=pS(this.Ir.serializer,u);a=a.add(o.path.popLast());const p=fm(f);r+=p-h.size,t.push(this.Ir.addEntry(e,o,f))}else if(r-=h.size,this.trackRemovals){const f=pS(this.Ir.serializer,u.convertToNoDocument(Pe.min()));t.push(this.Ir.addEntry(e,o,f))}}),a.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((o,u)=>{this.Er.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function NS(n){return pn(n,dh)}function so(n){return pn(n,em)}function Dc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OS(n,e){const t=e.documentKey.path.toArray();return[n,cm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PS(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(a=ze(t[o],r[o]),a)return a;return a=ze(t.length,r.length),a||(a=ze(t[t.length-2],r[r.length-2]),a||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&ih(r.mutation,a,rr.empty(),zt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xe()){const a=Pi();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(o=>{let u=Fc();return o.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Pi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xe()))}populateOverlays(e,t,r){const a=[];return r.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,a){let o=vr();const u=rh(),h=function(){return rh()}();return t.forEach((f,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof As)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),ih(y.mutation,p,y.mutation.getFieldMask(),zt.now())):u.set(p.key,rr.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var v;return h.set(p,new t4(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=rh();let a=new Ut((u,h)=>u-h),o=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let y=r.get(f)||rr.empty();y=h.applyToLocalView(p,y),r.set(f,y);const v=(a.get(h.batchId)||Xe()).add(f);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,y=f.value,v=i1();y.forEach(T=>{if(!o.has(T)){const S=h1(t.get(T),r.get(T));S!==null&&v.set(T,S),o=o.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return X.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-o.size):X.resolve(Pi());let h=uh,f=o;return u.next(p=>X.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?X.resolve():this.remoteDocumentCache.getEntry(e,y).next(T=>{f=f.insert(y,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,f,p,Xe())).next(y=>({batchId:h,changes:r1(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let a=Fc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const o=t.collectionGroup;let u=Fc();return this.indexManager.getCollectionParents(e,o).next(h=>X.forEach(h,f=>{const p=function(v,T){return new Oh(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(y=>{y.forEach((v,T)=>{u=u.insert(v,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,a))).next(u=>{o.forEach((f,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,Gt.newInvalidDocument(y)))});let h=Fc();return u.forEach((f,p)=>{const y=o.get(f);y!==void 0&&ih(y.mutation,p,rr.empty(),zt.now()),Mh(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return X.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Wn(a.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:D1(a.bundledQuery),readTime:Wn(a.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.overlays=new Ut(Ee.comparator),this.Rr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pi();return X.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&r.set(a,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,o)=>{this.Et(e,t,o)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const a=Pi(),o=t.length+1,u=new Ee(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&a.set(f.getKey(),f)}return X.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let o=new Ut((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Pi(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Pi(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=a)););return X.resolve(h)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new wv(t,r));let o=this.Rr.get(t);o===void 0&&(o=Xe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.Vr=new Rt(bn.mr),this.gr=new Rt(bn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new bn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new bn(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Ee(new Et([])),r=new bn(t,e),a=new bn(t,e+1),o=[];return this.gr.forEachInRange([r,a],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ee(new Et([])),r=new bn(t,e),a=new bn(t,e+1);let o=Xe();return this.gr.forEachInRange([r,a],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new bn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ee.comparator(e.key,t.key)||ze(e.Cr,t.Cr)}static pr(e,t){return ze(e.Cr,t.Cr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Rt(bn.mr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Tv(o,t,r,a);this.mutationQueue.push(u);for(const h of a)this.Mr=this.Mr.add(new bn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return X.resolve(u)}lookupMutationBatch(e,t){return X.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),o=a<0?0:a;return X.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?bo:this.Fr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bn(t,0),a=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,a],u=>{const h=this.Or(u.Cr);o.push(h)}),X.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rt(ze);return t.forEach(a=>{const o=new bn(a,0),u=new bn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{r=r.add(h.Cr)})}),X.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let o=r;Ee.isDocumentKey(o)||(o=o.child(""));const u=new bn(new Ee(o),0);let h=new Rt(ze);return this.Mr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(f.Cr)),!0)},u),X.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){De(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return X.forEach(t.mutations,a=>{const o=new bn(a.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new bn(t,0),a=this.Mr.firstAfterOrEqual(r);return X.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.kr=e,this.docs=function(){return new Ut(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),o=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=vr();return t.forEach(a=>{const o=this.docs.get(a);r=r.insert(a,o?o.document.mutableCopy():Gt.newInvalidDocument(a))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let o=vr();const u=t.path,h=new Ee(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||cv(wI(y),r)<=0||(a.has(y.key)||Mh(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,t,r,a){Re()}qr(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new o4(this)}getSize(e){return X.resolve(this.size)}}class o4 extends B1{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.persistence=e,this.Qr=new Rs(t=>ko(t),Nh),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new xv,this.targetCount=0,this.Kr=Uo.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),X.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.zn(t),X.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let a=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),X.waitFor(o).next(()=>a)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(u=>{o.push(a.markPotentiallyOrphaned(e,u))}),X.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Fr(0),this.zr=!1,this.zr=!0,this.jr=new i4,this.referenceDelegate=e(this),this.Hr=new l4(this),this.indexManager=new KL,this.remoteDocumentCache=function(a){return new a4(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new x1(t),this.Yr=new n4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new s4(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const a=new u4(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(o=>this.referenceDelegate.Xr(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}ei(e,t){return X.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class u4 extends RI{constructor(e){super(),this.currentSequenceNumber=e}}class $m{constructor(e){this.persistence=e,this.ti=new xv,this.ni=null}static ri(e){return new $m(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),X.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.ii,r=>{const a=Ee.fromPath(r);return this.si(e,a).next(o=>{o||t.removeEntry(a,Pe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return X.or([()=>X.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class dm{constructor(e,t){this.persistence=e,this.oi=new Rs(r=>jn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=j1(this,t)}static ri(e,t){return new dm(e,t)}Zr(){}Xr(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return X.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(o=>o?X.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(h=>{h||(r++,o.removeEntry(u,Pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),X.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nd(e.data.value)),t}ar(e,t,r){return X.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return X.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.serializer=e}B(e,t,r,a){const o=new Om("createOrUpgrade",t);r<1&&a>=1&&(function(f){f.createObjectStore(Dh)}(e),function(f){f.createObjectStore(fh,{keyPath:wV}),f.createObjectStore(ii,{keyPath:Gw,autoIncrement:!0}).createIndex(Eo,$w,{unique:!0}),f.createObjectStore(ru)}(e),MS(e),function(f){f.createObjectStore(lo)}(e));let u=X.resolve();return r<3&&a>=3&&(r!==0&&(function(f){f.deleteObjectStore(su),f.deleteObjectStore(iu),f.deleteObjectStore(wo)}(e),MS(e)),u=u.next(()=>function(f){const p=f.store(wo),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return p.put(tm,y)}(o))),r<4&&a>=4&&(r!==0&&(u=u.next(()=>function(f,p){return p.store(ii).G().next(v=>{f.deleteObjectStore(ii),f.createObjectStore(ii,{keyPath:Gw,autoIncrement:!0}).createIndex(Eo,$w,{unique:!0});const T=p.store(ii),S=v.map(C=>T.put(C));return X.waitFor(S)})}(e,o))),u=u.next(()=>{(function(f){f.createObjectStore(au,{keyPath:OV})})(e)})),r<5&&a>=5&&(u=u.next(()=>this._i(o))),r<6&&a>=6&&(u=u.next(()=>(function(f){f.createObjectStore(dh)}(e),this.ai(o)))),r<7&&a>=7&&(u=u.next(()=>this.ui(o))),r<8&&a>=8&&(u=u.next(()=>this.ci(e,o))),r<9&&a>=9&&(u=u.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(u=u.next(()=>this.li(o))),r<11&&a>=11&&(u=u.next(()=>{(function(f){f.createObjectStore(Mm,{keyPath:PV})})(e),function(f){f.createObjectStore(km,{keyPath:MV})}(e)})),r<12&&a>=12&&(u=u.next(()=>{(function(f){const p=f.createObjectStore(Vm,{keyPath:zV});p.createIndex(l_,FV,{unique:!1}),p.createIndex(OI,qV,{unique:!1})})(e)})),r<13&&a>=13&&(u=u.next(()=>function(f){const p=f.createObjectStore(em,{keyPath:RV});p.createIndex(Cd,AV),p.createIndex(xI,IV)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(lo))),r<14&&a>=14&&(u=u.next(()=>this.Pi(e,o))),r<15&&a>=15&&(u=u.next(()=>function(f){f.createObjectStore(dv,{keyPath:kV,autoIncrement:!0}).createIndex(o_,VV,{unique:!1}),f.createObjectStore(nm,{keyPath:LV}).createIndex(DI,UV,{unique:!1}),f.createObjectStore(rm,{keyPath:jV}).createIndex(NI,BV,{unique:!1})}(e))),r<16&&a>=16&&(u=u.next(()=>{t.objectStore(nm).clear()}).next(()=>{t.objectStore(rm).clear()})),r<17&&a>=17&&(u=u.next(()=>{(function(f){f.createObjectStore(mv,{keyPath:HV})})(e)})),u}ai(e){let t=0;return e.store(lo).Z((r,a)=>{t+=fm(a)}).next(()=>{const r={byteSize:t};return e.store(dh).put(a_,r)})}_i(e){const t=e.store(fh),r=e.store(ii);return t.G().next(a=>X.forEach(a,o=>{const u=IDBKeyRange.bound([o.userId,bo],[o.userId,o.lastAcknowledgedBatchId]);return r.G(Eo,u).next(h=>X.forEach(h,f=>{De(f.userId===o.userId);const p=ho(this.serializer,f);return M1(e,o.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(su),r=e.store(lo);return e.store(wo).get(tm).next(a=>{const o=[];return r.Z((u,h)=>{const f=new Et(u),p=function(v){return[0,jn(v)]}(f);o.push(t.get(p).next(y=>y?X.resolve():(v=>t.put({targetId:0,path:jn(v),sequenceNumber:a.highestListenSequenceNumber}))(f)))}).next(()=>X.waitFor(o))})}ci(e,t){e.createObjectStore(mh,{keyPath:NV});const r=t.store(mh),a=new Iv,o=u=>{if(a.add(u)){const h=u.lastSegment(),f=u.popLast();return r.put({collectionId:h,parent:jn(f)})}};return t.store(lo).Z({Y:!0},(u,h)=>{const f=new Et(u);return o(f.popLast())}).next(()=>t.store(ru).Z({Y:!0},([u,h,f],p)=>{const y=Oi(h);return o(y.popLast())}))}li(e){const t=e.store(iu);return t.Z((r,a)=>{const o=Hc(a),u=C1(this.serializer,o);return t.put(u)})}hi(e,t){const r=t.store(lo),a=[];return r.Z((o,u)=>{const h=t.store(em),f=function(v){return v.document?new Ee(Et.fromString(v.document.name).popFirst(5)):v.noDocument?Ee.fromSegments(v.noDocument.path):v.unknownDocument?Ee.fromSegments(v.unknownDocument.path):Re()}(u).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(h.put(p))}).next(()=>X.waitFor(a))}Pi(e,t){const r=t.store(ii),a=z1(this.serializer),o=new Cv($m.ri,this.serializer.Tt);return r.G().next(u=>{const h=new Map;return u.forEach(f=>{var p;let y=(p=h.get(f.userId))!==null&&p!==void 0?p:Xe();ho(this.serializer,f).keys().forEach(v=>y=y.add(v)),h.set(f.userId,y)}),X.forEach(h,(f,p)=>{const y=new Yn(p),v=Hm.It(this.serializer,y),T=o.getIndexManager(y),S=Gm.It(y,this.serializer,T,o.referenceDelegate);return new F1(a,S,v,T).recalculateAndSaveOverlaysForDocumentKeys(new u_(t,Fr.ae),f).next()})})}}function MS(n){n.createObjectStore(su,{keyPath:CV}).createIndex(fv,DV,{unique:!0}),n.createObjectStore(iu,{keyPath:"targetId"}).createIndex(CI,xV,{unique:!0}),n.createObjectStore(wo)}const na="IndexedDbPersistence",Ay=18e5,Iy=5e3,xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",h4="main";class Dv{constructor(e,t,r,a,o,u,h,f,p,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=u,this.document=h,this.Ii=p,this.Ei=y,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=T=>Promise.resolve(),!Dv.D())throw new _e(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZL(this,a),this.gi=t+h4,this.serializer=new x1(f),this.pi=new pa(this.gi,this.di,new c4(this.serializer)),this.jr=new zL,this.Hr=new QL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=z1(this.serializer),this.Yr=new BL,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,y===!1&&Qn(na,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(ae.FAILED_PRECONDITION,xy);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Fr(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Aa(e))return me(na,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(na,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Nc(e).get(kl).next(t=>X.resolve(this.Ni(t)))}Bi(e){return md(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Ay)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=pn(t,au);return r.G().next(a=>{const o=this.qi(a,Ay),u=a.filter(h=>o.indexOf(h)===-1);return X.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?X.resolve(!0):Nc(e).get(kl).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Iy)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new _e(ae.FAILED_PRECONDITION,xy);return!1}}return!(!this.networkEnabled||!this.inForeground)||md(e).G().next(r=>this.qi(r,Iy).find(a=>{if(this.clientId!==a.clientId){const o=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,h=this.networkEnabled===a.networkEnabled;if(o||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&me(na,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Dh,au],e=>{const t=new u_(e,Fr.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>md(e).G().next(t=>this.qi(t,Ay).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Gm.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YL(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Hm.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){me(na,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",o=function(f){return f===17?KV:f===16?$V:f===15?pv:f===14?kI:f===13?MI:f===12?GV:f===11?PI:void Re()}(this.di);let u;return this.pi.runTransaction(e,a,o,h=>(u=new u_(h,this.Gr?this.Gr.next():Fr.ae),t==="readwrite-primary"?this.Fi(u).next(f=>!!f||this.Mi(u)).next(f=>{if(!f)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new _e(ae.FAILED_PRECONDITION,SI);return r(u)}).next(f=>this.Oi(u).next(()=>f)):this.ji(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}ji(e){return Nc(e).get(kl).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Iy)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new _e(ae.FAILED_PRECONDITION,xy)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nc(e).put(kl,t)}static D(){return pa.D()}xi(e){const t=Nc(e);return t.get(kl).next(r=>this.Ni(r)?(me(na,"Releasing primary lease."),t.delete(kl)):X.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Qn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;sA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return me(na,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qn(na,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nc(n){return pn(n,Dh)}function md(n){return pn(n,au)}function f4(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=Xe(),a=Xe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Nv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return sA()?8:AI(dn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,a,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new d4;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,r,a){return r.documentReadCount<this.es?(Gl()<=it.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),X.resolve()):(Gl()<=it.DEBUG&&me("QueryEngine","Query:",$l(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(Gl()<=it.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):X.resolve())}rs(e,t){if(sS(t))return X.resolve(null);let r=qr(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=g_(t,null,"F"),r=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Xe(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.cs(t,h);return this.ls(t,p,u,f.readTime)?this.rs(e,g_(t,null,"F")):this.hs(e,p,t,f)}))})))}ss(e,t,r,a){return sS(t)||a.isEqual(Pe.min())?X.resolve(null):this.ns.getDocuments(e,r).next(o=>{const u=this.cs(t,o);return this.ls(t,u,r,a)?X.resolve(null):(Gl()<=it.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),$l(t)),this.hs(e,u,t,gV(a,uh)).next(h=>h))})}cs(e,t){let r=new Rt(t1(e));return t.forEach((a,o)=>{Mh(e,o)&&(r=r.add(o))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}_s(e,t,r){return Gl()<=it.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",$l(t)),this.ns.getDocumentsMatchingQuery(e,t,wr.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LocalStore",m4=3e8;class p4{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new Ut(ze),this.Is=new Rs(o=>ko(o),Nh),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function H1(n,e,t,r){return new p4(n,e,t,r)}async function G1(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(o=>(a=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let f=Xe();for(const p of a){u.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function g4(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,f,p,y){const v=p.batch,T=v.keys();let S=X.resolve();return T.forEach(C=>{S=S.next(()=>y.getEntry(f,C)).next(M=>{const D=p.docVersions.get(C);De(D!==null),M.version.compareTo(D)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(f,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Xe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function $1(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function y4(n,e){const t=He(n),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const h=[];e.targetChanges.forEach((y,v)=>{const T=a.get(v);if(!T)return;h.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,v)));let S=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(ln.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(M,D,F){return M.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=m4?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(T,S,y)&&h.push(t.Hr.updateTargetData(o,S))});let f=vr(),p=Xe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(_4(o,u,e.documentUpdates).next(y=>{f=y.Vs,p=y.fs})),!r.isEqual(Pe.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return X.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,p)).next(()=>f)}).then(o=>(t.Ts=a,o))}function _4(n,e,t){let r=Xe(),a=Xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=vr();return t.forEach((h,f)=>{const p=o.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):me(Ov,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Vs:u,fs:a}})}function v4(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E4(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(o=>o?(a=o,X.resolve(a)):t.Hr.allocateTargetId(r).next(u=>(a=new ms(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function S_(n,e,t){const r=He(n),a=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Aa(u))throw u;me(Ov,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function kS(n,e,t){const r=He(n);let a=Pe.min(),o=Xe();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,p,y){const v=He(f),T=v.Is.get(y);return T!==void 0?X.resolve(v.Ts.get(T)):v.Hr.getTargetData(p,y)}(r,u,qr(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,h.targetId).next(f=>{o=f})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?a:Pe.min(),t?o:Xe())).next(h=>(T4(r,lL(e),h),{documents:h,gs:o})))}function T4(n,e,t){let r=n.Es.get(e)||Pe.min();t.forEach((a,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class VS{constructor(){this.activeTargetIds=mL()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K1{constructor(){this.ho=new VS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new VS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="ConnectivityMonitor";class US{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(LS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(LS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function R_(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="RestConnection",w4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===im?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,o){const u=R_(),h=this.bo(e,t.toUriEncodedString());me(Cy,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,a,o),this.vo(e,h,f,r).then(p=>(me(Cy,`Received RPC '${e}' ${u}: `,p),p),p=>{throw lh(Cy,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",r),p})}Co(e,t,r,a,o,u){return this.So(e,t,r,a,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),r&&r.headers.forEach((a,o)=>e[o]=a)}bo(e,t){const r=w4[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class A4 extends S4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const o=R_();return new Promise((u,h)=>{const f=new pI;f.setWithCredentials(!0),f.listenOnce(gI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ad.NO_ERROR:const y=f.getResponseJson();me(kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case Ad.TIMEOUT:me(kn,`RPC '${e}' ${o} timed out`),h(new _e(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Ad.HTTP_ERROR:const v=f.getStatus();if(me(kn,`RPC '${e}' ${o} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const C=function(D){const F=D.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(F)>=0?F:ae.UNKNOWN}(S.status);h(new _e(C,S.message))}else h(new _e(ae.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new _e(ae.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{me(kn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(a);me(kn,`RPC '${e}' ${o} sending request:`,a),f.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=R_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vI(),h=_I(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=o.join("");me(kn,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=u.createWebChannel(y,f);let T=!1,S=!1;const C=new R4({Fo:D=>{S?me(kn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(T||(me(kn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),T=!0),me(kn,`RPC '${e}' stream ${a} sending:`,D),v.send(D))},Mo:()=>v.close()}),M=(D,F,B)=>{D.listen(F,k=>{try{B(k)}catch(K){setTimeout(()=>{throw K},0)}})};return M(v,zc.EventType.OPEN,()=>{S||(me(kn,`RPC '${e}' stream ${a} transport opened.`),C.Qo())}),M(v,zc.EventType.CLOSE,()=>{S||(S=!0,me(kn,`RPC '${e}' stream ${a} transport closed`),C.Uo())}),M(v,zc.EventType.ERROR,D=>{S||(S=!0,lh(kn,`RPC '${e}' stream ${a} transport errored:`,D),C.Uo(new _e(ae.UNAVAILABLE,"The operation could not be completed")))}),M(v,zc.EventType.MESSAGE,D=>{var F;if(!S){const B=D.data[0];De(!!B);const k=B,K=(k==null?void 0:k.error)||((F=k[0])===null||F===void 0?void 0:F.error);if(K){me(kn,`RPC '${e}' stream ${a} received error:`,K);const P=K.status;let ie=function(N){const U=on[N];if(U!==void 0)return m1(U)}(P),O=K.message;ie===void 0&&(ie=ae.INTERNAL,O="Unknown error status: "+P+" with message "+K.message),S=!0,C.Uo(new _e(ie,O)),v.close()}else me(kn,`RPC '${e}' stream ${a} received:`,B),C.Ko(B)}}),M(h,yI.STAT_EVENT,D=>{D.stat===r_.PROXY?me(kn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===r_.NOPROXY&&me(kn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){return typeof window<"u"?window:null}function kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(n){return new CL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t,r=1e3,a=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="PersistentStream";class Q1{constructor(e,t,r,a,o,u,h,f){this.Ti=e,this.n_=r,this.r_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Y1(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new _e(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(jS,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(me(jS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x4 extends Q1{constructor(e,t,r,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=OL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Pe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?Wn(u.readTime):Pe.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=v_(this.serializer),t.addTarget=function(o,u){let h;const f=u.target;if(h=am(f)?{documents:b1(o,f)}:{query:w1(o,f).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=y1(o,u.resumeToken);const p=y_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Pe.min())>0){h.readTime=mu(o,u.snapshotVersion.toTimestamp());const p=y_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=ML(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=v_(this.serializer),t.removeTarget=e,this.I_(t)}}class C4 extends Q1{constructor(e,t,r,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=PL(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=v_(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>um(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{}class N4 extends D4{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.So(e,__(t,r),a,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ae.UNKNOWN,o.toString())})}Co(e,t,r,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,__(t,r),a,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(ae.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class O4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Qn(t),this.N_=!1):me("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class P4{constructor(e,t,r,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{r.enqueueAndForget(async()=>{$o(this)&&(me(jo,"Restarting streams for network reachability change."),await async function(f){const p=He(f);p.W_.add(4),await Vh(p),p.j_.set("Unknown"),p.W_.delete(4),await Ym(p)}(this))})}),this.j_=new O4(r,a)}}async function Ym(n){if($o(n))for(const e of n.G_)await e(!0)}async function Vh(n){for(const e of n.G_)await e(!1)}function X1(n,e){const t=He(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Vv(t)?kv(t):wu(t).c_()&&Mv(t,e))}function Pv(n,e){const t=He(n),r=wu(t);t.K_.delete(e),r.c_()&&W1(t,e),t.K_.size===0&&(r.c_()?r.P_():$o(t)&&t.j_.set("Unknown"))}function Mv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wu(n).y_(e)}function W1(n,e){n.H_.Ne(e),wu(n).w_(e)}function kv(n){n.H_=new RL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),wu(n).start(),n.j_.B_()}function Vv(n){return $o(n)&&!wu(n).u_()&&n.K_.size>0}function $o(n){return He(n).W_.size===0}function Z1(n){n.H_=void 0}async function M4(n){n.j_.set("Online")}async function k4(n){n.K_.forEach((e,t)=>{Mv(n,e)})}async function V4(n,e){Z1(n),Vv(n)?(n.j_.q_(e),kv(n)):n.j_.set("Unknown")}async function L4(n,e,t){if(n.j_.set("Online"),e instanceof g1&&e.state===2&&e.cause)try{await async function(a,o){const u=o.cause;for(const h of o.targetIds)a.K_.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.K_.delete(h),a.H_.removeTarget(h))}(n,e)}catch(r){me(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mm(n,r)}else if(e instanceof Md?n.H_.We(e):e instanceof p1?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Pe.min()))try{const r=await $1(n.localStore);t.compareTo(r)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.K_.get(p);y&&o.K_.set(p,y.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,p)=>{const y=o.K_.get(f);if(!y)return;o.K_.set(f,y.withResumeToken(ln.EMPTY_BYTE_STRING,y.snapshotVersion)),W1(o,f);const v=new ms(y.target,f,p,y.sequenceNumber);Mv(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){me(jo,"Failed to raise snapshot:",r),await mm(n,r)}}async function mm(n,e,t){if(!Aa(e))throw e;n.W_.add(1),await Vh(n),n.j_.set("Offline"),t||(t=()=>$1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(jo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Ym(n)})}function J1(n,e){return e().catch(t=>mm(n,t,e))}async function Lh(n){const e=He(n),t=Ea(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:bo;for(;U4(e);)try{const a=await v4(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,j4(e,a)}catch(a){await mm(e,a)}ex(e)&&tx(e)}function U4(n){return $o(n)&&n.U_.length<10}function j4(n,e){n.U_.push(e);const t=Ea(n);t.c_()&&t.S_&&t.b_(e.mutations)}function ex(n){return $o(n)&&!Ea(n).u_()&&n.U_.length>0}function tx(n){Ea(n).start()}async function B4(n){Ea(n).C_()}async function z4(n){const e=Ea(n);for(const t of n.U_)e.b_(t.mutations)}async function F4(n,e,t){const r=n.U_.shift(),a=bv.from(r,e,t);await J1(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Lh(n)}async function q4(n,e){e&&Ea(n).S_&&await async function(r,a){if(function(u){return wL(u)&&u!==ae.ABORTED}(a.code)){const o=r.U_.shift();Ea(r).h_(),await J1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Lh(r)}}(n,e),ex(n)&&tx(n)}async function BS(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),me(jo,"RemoteStore received new credentials");const r=$o(t);t.W_.add(3),await Vh(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ym(t)}async function H4(n,e){const t=He(n);e?(t.W_.delete(2),await Ym(t)):e||(t.W_.add(2),await Vh(t),t.j_.set("Unknown"))}function wu(n){return n.J_||(n.J_=function(t,r,a){const o=He(t);return o.M_(),new x4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:M4.bind(null,n),No:k4.bind(null,n),Lo:V4.bind(null,n),p_:L4.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Vv(n)?kv(n):n.j_.set("Unknown")):(await n.J_.stop(),Z1(n))})),n.J_}function Ea(n){return n.Y_||(n.Y_=function(t,r,a){const o=He(t);return o.M_(),new C4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:B4.bind(null,n),Lo:q4.bind(null,n),D_:z4.bind(null,n),v_:F4.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Lh(n)):(await n.Y_.stop(),n.U_.length>0&&(me(jo,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t,r,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,o){const u=Date.now()+r,h=new Lv(e,t,u,a,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uv(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),Aa(n))return new _e(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{static emptySet(e){return new eu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=Fc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=r.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.Z_=new Ut(Ee.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class pu{constructor(e,t,r,a,o,u,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new pu(e,t,eu.emptySet(t),u,r,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class $4{constructor(){this.queries=FS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=He(t),o=a.queries;a.queries=FS(),o.forEach((u,h)=>{for(const f of h.ta)f.onError(r)})})(this,new _e(ae.ABORTED,"Firestore shutting down"))}}function FS(){return new Rs(n=>e1(n),jm)}async function jv(n,e){const t=He(n);let r=3;const a=e.query;let o=t.queries.get(a);o?!o.na()&&e.ra()&&(r=2):(o=new G4,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(a,!0);break;case 1:o.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=Uv(u,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&zv(t)}async function Bv(n,e){const t=He(n),r=e.query;let a=3;const o=t.queries.get(r);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?a=e.ra()?0:1:!o.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function K4(n,e){const t=He(n);let r=!1;for(const a of e){const o=a.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(a)&&(r=!0);u.ea=a}}r&&zv(t)}function Y4(n,e,t){const r=He(n),a=r.queries.get(e);if(a)for(const o of a.ta)o.onError(t);r.queries.delete(e)}function zv(n){n.ia.forEach(e=>{e.next()})}var A_,qS;(qS=A_||(A_={}))._a="default",qS.Cache="cache";class Fv{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new pu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=pu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==A_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.key=e}}class rx{constructor(e){this.key=e}}class Q4{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Xe(),this.mutatedKeys=Xe(),this.ya=t1(e),this.wa=new eu(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new zS,a=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const T=a.get(y),S=Mh(this.query,v)?v:null,C=!!T&&this.mutatedKeys.has(T.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;T&&S?T.data.isEqual(S.data)?C!==M&&(r.track({type:3,doc:S}),D=!0):this.va(T,S)||(r.track({type:2,doc:S}),D=!0,(f&&this.ya(S,f)>0||p&&this.ya(S,p)<0)&&(h=!0)):!T&&S?(r.track({type:0,doc:S}),D=!0):T&&!S&&(r.track({type:1,doc:T}),D=!0,(f||p)&&(h=!0)),D&&(S?(u=u.add(S),o=M?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{wa:u,Da:r,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,v)=>function(S,C){const M=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return M(S)-M(C)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(r),a=a!=null&&a;const h=t&&!a?this.Fa():[],f=this.pa.size===0&&this.current&&!a?1:0,p=f!==this.ga;return this.ga=f,u.length!==0||p?{snapshot:new pu(this.query,e.wa,o,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new zS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Xe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new rx(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new nx(r))}),t}Oa(e){this.fa=e.gs,this.pa=Xe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return pu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const qv="SyncEngine";class X4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class W4{constructor(e){this.key=e,this.Ba=!1}}class Z4{constructor(e,t,r,a,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Rs(h=>e1(h),jm),this.qa=new Map,this.Qa=new Set,this.$a=new Ut(Ee.comparator),this.Ua=new Map,this.Ka=new xv,this.Wa={},this.Ga=new Map,this.za=Uo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function J4(n,e,t=!0){const r=ux(n);let a;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na()):a=await ix(r,e,t,!0),a}async function eU(n,e){const t=ux(n);await ix(t,e,!0,!1)}async function ix(n,e,t,r){const a=await E4(n.localStore,qr(e)),o=a.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await tU(n,e,o,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&X1(n.remoteStore,a),h}async function tU(n,e,t,r,a){n.Ha=(v,T,S)=>async function(M,D,F,B){let k=D.view.ba(F);k.ls&&(k=await kS(M.localStore,D.query,!1).then(({documents:O})=>D.view.ba(O,k)));const K=B&&B.targetChanges.get(D.targetId),P=B&&B.targetMismatches.get(D.targetId)!=null,ie=D.view.applyChanges(k,M.isPrimaryClient,K,P);return GS(M,D.targetId,ie.Ma),ie.snapshot}(n,v,T,S);const o=await kS(n.localStore,e,!0),u=new Q4(e,o.gs),h=u.ba(o.documents),f=kh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=u.applyChanges(h,n.isPrimaryClient,f);GS(n,t,p.Ma);const y=new X4(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function nU(n,e,t){const r=He(n),a=r.ka.get(e),o=r.qa.get(a.targetId);if(o.length>1)return r.qa.set(a.targetId,o.filter(u=>!jm(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await S_(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Pv(r.remoteStore,a.targetId),I_(r,a.targetId)}).catch(Go)):(I_(r,a.targetId),await S_(r.localStore,a.targetId,!0))}async function rU(n,e){const t=He(n),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pv(t.remoteStore,r.targetId))}async function iU(n,e,t){const r=cx(n);try{const a=await function(u,h){const f=He(u),p=zt.now(),y=h.reduce((S,C)=>S.add(C.key),Xe());let v,T;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=vr(),M=Xe();return f.ds.getEntries(S,y).next(D=>{C=D,C.forEach((F,B)=>{B.isValidDocument()||(M=M.add(F))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,C)).next(D=>{v=D;const F=[];for(const B of h){const k=TL(B,v.get(B.key).overlayedDocument);k!=null&&F.push(new As(B.key,k,GI(k.value.mapValue),Un.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,F,h)}).next(D=>{T=D;const F=D.applyToLocalDocumentSet(v,M);return f.documentOverlayCache.saveOverlays(S,D.batchId,F)})}).then(()=>({batchId:T.batchId,changes:r1(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(u,h,f){let p=u.Wa[u.currentUser.toKey()];p||(p=new Ut(ze)),p=p.insert(h,f),u.Wa[u.currentUser.toKey()]=p}(r,a.batchId,t),await Uh(r,a.changes),await Lh(r.remoteStore)}catch(a){const o=Uv(a,"Failed to persist write");t.reject(o)}}async function sx(n,e){const t=He(n);try{const r=await y4(t.localStore,e);e.targetChanges.forEach((a,o)=>{const u=t.Ua.get(o);u&&(De(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?De(u.Ba):a.removedDocuments.size>0&&(De(u.Ba),u.Ba=!1))}),await Uh(t,r,e)}catch(r){await Go(r)}}function HS(n,e,t){const r=He(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const f=He(u);f.onlineState=h;let p=!1;f.queries.forEach((y,v)=>{for(const T of v.ta)T.sa(h)&&(p=!0)}),p&&zv(f)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sU(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),o=a&&a.key;if(o){let u=new Ut(Ee.comparator);u=u.insert(o,Gt.newNoDocument(o,Pe.min()));const h=Xe().add(o),f=new qm(Pe.min(),new Map,new Ut(ze),u,h);await sx(r,f),r.$a=r.$a.remove(o),r.Ua.delete(e),Hv(r)}else await S_(r.localStore,e,!1).then(()=>I_(r,e,t)).catch(Go)}async function aU(n,e){const t=He(n),r=e.batch.batchId;try{const a=await g4(t.localStore,e);ox(t,r,null),ax(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Uh(t,a)}catch(a){await Go(a)}}async function oU(n,e,t){const r=He(n);try{const a=await function(u,h){const f=He(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,h).next(v=>(De(v!==null),y=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(r.localStore,e);ox(r,e,t),ax(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Uh(r,a)}catch(a){await Go(a)}}function ax(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function ox(n,e,t){const r=He(n);let a=r.Wa[r.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function I_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||lx(n,r)})}function lx(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Pv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Hv(n))}function GS(n,e,t){for(const r of t)r instanceof nx?(n.Ka.addReference(r.key,e),lU(n,r)):r instanceof rx?(me(qv,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||lx(n,r.key)):Re()}function lU(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(me(qv,"New document in limbo: "+t),n.Qa.add(r),Hv(n))}function Hv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Ee(Et.fromString(e)),r=n.za.next();n.Ua.set(r,new W4(t)),n.$a=n.$a.insert(t,r),X1(n.remoteStore,new ms(qr(Ph(t.path)),r,"TargetPurposeLimboResolution",Fr.ae))}}async function Uh(n,e,t){const r=He(n),a=[],o=[],u=[];r.ka.isEmpty()||(r.ka.forEach((h,f)=>{u.push(r.Ha(f,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){a.push(p);const v=Nv.Yi(f.targetId,p);o.push(v)}}))}),await Promise.all(u),r.La.p_(a),await async function(f,p){const y=He(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>X.forEach(p,T=>X.forEach(T.Hi,S=>y.persistence.referenceDelegate.addReference(v,T.targetId,S)).next(()=>X.forEach(T.Ji,S=>y.persistence.referenceDelegate.removeReference(v,T.targetId,S)))))}catch(v){if(!Aa(v))throw v;me(Ov,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const S=y.Ts.get(T),C=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(C);y.Ts=y.Ts.insert(T,M)}}}(r.localStore,o))}async function uU(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){me(qv,"User change. New user:",e.toKey());const r=await G1(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(f=>{f.reject(new _e(ae.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uh(t,r.Rs)}}function cU(n,e){const t=He(n),r=t.Ua.get(e);if(r&&r.Ba)return Xe().add(r.key);{let a=Xe();const o=t.qa.get(e);if(!o)return a;for(const u of o){const h=t.ka.get(u);a=a.unionWith(h.view.Sa)}return a}}function ux(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sU.bind(null,e),e.La.p_=K4.bind(null,e.eventManager),e.La.Ja=Y4.bind(null,e.eventManager),e}function cx(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oU.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Km(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return H1(this.persistence,new q1,e.initialUser,this.serializer)}Xa(e){return new Cv($m.ri,this.serializer)}Za(e){return new K1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class hU extends Eh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){De(this.persistence.referenceDelegate instanceof dm);const r=this.persistence.referenceDelegate.garbageCollector;return new U1(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Cv(r=>dm.ri(r,t),this.serializer)}}class fU extends Eh{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await cx(this.ru.syncEngine),await Lh(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return H1(this.persistence,new q1,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new U1(r,e.asyncQueue,t)}nu(e,t){const r=new EV(t,this.persistence);return new vV(e.asyncQueue,r)}Xa(e){const t=f4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Dv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,I4(),kd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new K1}}class pm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uU.bind(null,this.syncEngine),await H4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $4}()}createDatastore(e){const t=Km(e.databaseInfo.databaseId),r=function(o){return new A4(o)}(e.databaseInfo);return function(o,u,h,f){return new N4(o,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,o,u,h){return new P4(r,a,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>HS(this.syncEngine,t,0),function(){return US.D()?new US:new b4}())}createSyncEngine(e,t){return function(a,o,u,h,f,p,y){const v=new Z4(a,o,u,h,f,p);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=He(a);me(jo,"RemoteStore shutting down."),o.W_.add(5),await Vh(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}pm.provider={build:()=>new pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="FirestoreClient";class dU{constructor(e,t,r,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Yn.UNAUTHENTICATED,this.clientId=TI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{me(Ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(me(Ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Uv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dy(n,e){n.asyncQueue.verifyOperationInProgress(),me(Ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async a=>{r.isEqual(a)||(await G1(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function $S(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mU(n);me(Ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>BS(e.remoteStore,a)),n._onlineComponents=e}async function mU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Ta,"Using user provided OfflineComponentProvider");try{await Dy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ae.FAILED_PRECONDITION||a.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;lh("Error using user provided cache. Falling back to memory cache: "+t),await Dy(n,new Eh)}}else me(Ta,"Using default OfflineComponentProvider"),await Dy(n,new hU(void 0));return n._offlineComponents}async function hx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Ta,"Using user provided OnlineComponentProvider"),await $S(n,n._uninitializedComponentsProvider._online)):(me(Ta,"Using default OnlineComponentProvider"),await $S(n,new pm))),n._onlineComponents}function pU(n){return hx(n).then(e=>e.syncEngine)}async function gm(n){const e=await hx(n),t=e.eventManager;return t.onListen=J4.bind(null,e.syncEngine),t.onUnlisten=nU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rU.bind(null,e.syncEngine),t}function gU(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,f,p){const y=new Gv({next:T=>{y.su(),u.enqueueAndForget(()=>Bv(o,v));const S=T.docs.has(h);!S&&T.fromCache?p.reject(new _e(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&f&&f.source==="server"?p.reject(new _e(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new Fv(Ph(h.path),y,{includeMetadataChanges:!0,Ta:!0});return jv(o,v)}(await gm(n),n.asyncQueue,e,t,r)),r.promise}function yU(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,f,p){const y=new Gv({next:T=>{y.su(),u.enqueueAndForget(()=>Bv(o,v)),T.fromCache&&f.source==="server"?p.reject(new _e(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new Fv(h,y,{includeMetadataChanges:!0,Ta:!0});return jv(o,v)}(await gm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(n,e,t){if(!t)throw new _e(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _U(n,e,t,r){if(e===!0&&r===!0)throw new _e(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YS(n){if(!Ee.isDocumentKey(n))throw new _e(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QS(n){if(Ee.isDocumentKey(n))throw new _e(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qm(n);throw new _e(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="firestore.googleapis.com",XS=!0;class WS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vU,this.ssl=XS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:XS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L1)throw new _e(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_U("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $v{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lV;switch(r.type){case"firstParty":return new hV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=KS.get(t);r&&(me("ComponentProvider","Removing Datastore"),KS.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ko(this.firestore,e,this._query)}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class ga extends Ko{constructor(e,t,r){super(e,t,Ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ee(e))}withConverter(e){return new ga(this.firestore,e,this._path)}}function li(n,e,...t){if(n=Pt(n),dx("collection","path",e),n instanceof $v){const r=Et.fromString(e,...t);return QS(r),new ga(n,null,r)}{if(!(n instanceof Bn||n instanceof ga))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return QS(r),new ga(n.firestore,null,r)}}function $r(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=TI.newId()),dx("doc","path",e),n instanceof $v){const r=Et.fromString(e,...t);return YS(r),new Bn(n,null,new Ee(r))}{if(!(n instanceof Bn||n instanceof ga))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return YS(r),new Bn(n.firestore,n instanceof ga?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="AsyncQueue";class JS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Y1(this,"async_queue_retry"),this.Su=()=>{const r=kd();r&&me(ZS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=kd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=kd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Vi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Aa(e))throw e;me(ZS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Qn("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=Lv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(a),a}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function eR(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const o of r)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Ts extends $v{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new JS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JS(e),this._firestoreClient=void 0,await e}}}function EU(n,e,t){t||(t=im);const r=wa(n,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),o=r.getOptions(t);if(ya(o,e))return a;throw new _e(ae.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new _e(ae.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L1)throw new _e(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function Xm(n){if(n._terminated)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||TU(n),n._firestoreClient}function TU(n){var e,t,r;const a=n._freezeSettings(),o=function(h,f,p,y){return new QV(h,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,fx(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new dU(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gu(ln.fromBase64String(e))}catch(t){throw new _e(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gu(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==a[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=/^__.*__$/;class wU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new bu(e,this.data,t,this.fieldTransforms)}}class mx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function px(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Qv{constructor(e,t,r,a,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Qv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ym(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(px(this.Lu)&&bU.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class SU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Km(e)}ju(e,t,r,a=!1){return new Qv({Lu:e,methodName:t,zu:r,path:Bt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(n){const e=n._freezeSettings(),t=Km(n._databaseId);return new SU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gx(n,e,t,r,a,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,a);Wv("Data must be an object, but it was:",u,r);const h=yx(r,u);let f,p;if(o.merge)f=new rr(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const T=x_(e,v,t);if(!u.contains(T))throw new _e(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);vx(y,T)||y.push(T)}f=new rr(y),p=u.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=u.fieldTransforms;return new wU(new Ln(h),f,p)}class ep extends Zm{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ep}}class Xv extends Zm{_toFieldTransform(e){return new c1(e.path,new hu)}isEqual(e){return e instanceof Xv}}function RU(n,e,t,r){const a=n.ju(1,e,t);Wv("Data must be an object, but it was:",a,r);const o=[],u=Ln.empty();Ia(r,(f,p)=>{const y=Zv(e,f,t);p=Pt(p);const v=a.Uu(y);if(p instanceof ep)o.push(y);else{const T=jh(p,v);T!=null&&(o.push(y),u.set(y,T))}});const h=new rr(o);return new mx(u,h,a.fieldTransforms)}function AU(n,e,t,r,a,o){const u=n.ju(1,e,t),h=[x_(e,r,t)],f=[a];if(o.length%2!=0)throw new _e(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(x_(e,o[T])),f.push(o[T+1]);const p=[],y=Ln.empty();for(let T=h.length-1;T>=0;--T)if(!vx(p,h[T])){const S=h[T];let C=f[T];C=Pt(C);const M=u.Uu(S);if(C instanceof ep)p.push(S);else{const D=jh(C,M);D!=null&&(p.push(S),y.set(S,D))}}const v=new rr(p);return new mx(y,v,u.fieldTransforms)}function IU(n,e,t,r=!1){return jh(t,n.ju(r?4:3,e))}function jh(n,e){if(_x(n=Pt(n)))return Wv("Unsupported field value:",e,n),yx(n,e);if(n instanceof Zm)return function(r,a){if(!px(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const o=[];let u=0;for(const h of r){let f=jh(h,a.Ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,a){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pL(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=zt.fromDate(r);return{timestampValue:mu(a.serializer,o)}}if(r instanceof zt){const o=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mu(a.serializer,o)}}if(r instanceof Kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gu)return{bytesValue:y1(a.serializer,r._byteString)};if(r instanceof Bn){const o=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Yv)return function(u,h){return{mapValue:{fields:{[yv]:{stringValue:_v},[ou]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return Ev(h.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${Qm(r)}`)}(n,e)}function yx(n,e){const t={};return VI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(n,(r,a)=>{const o=jh(a,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _x(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof Kv||n instanceof gu||n instanceof Bn||n instanceof Zm||n instanceof Yv)}function Wv(n,e,t){if(!_x(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=Qm(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function x_(n,e,t){if((e=Pt(e))instanceof Wm)return e._internalPath;if(typeof e=="string")return Zv(n,e);throw ym("Field path arguments must be of type string or ",n,!1,void 0,t)}const xU=new RegExp("[~\\*/\\[\\]]");function Zv(n,e,t){if(e.search(xU)>=0)throw ym(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wm(...e.split("."))._internalPath}catch{throw ym(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ym(n,e,t,r,a){const o=r&&!r.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${a}`),f+=")"),new _e(ae.INVALID_ARGUMENT,h+n+f)}function vx(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t,r,a,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CU extends Ex{data(){return super.data()}}function Jv(n,e){return typeof e=="string"?Zv(n,e):e instanceof Wm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}class DU extends e0{}function NU(n,e,...t){let r=[];e instanceof e0&&r.push(e),r=r.concat(t),function(o){const u=o.filter(f=>f instanceof t0).length,h=o.filter(f=>f instanceof tp).length;if(u>1||u>0&&h>0)throw new _e(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class tp extends DU{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tp(e,t,r)}_apply(e){const t=this._parse(e);return bx(e._query,t),new Ko(e.firestore,e.converter,p_(e._query,t))}_parse(e){const t=Jm(e.firestore);return function(o,u,h,f,p,y,v){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){nR(v,y);const C=[];for(const M of v)C.push(tR(f,o,M));T={arrayValue:{values:C}}}else T=tR(f,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||nR(v,y),T=IU(h,u,v,y==="in"||y==="not-in");return st.create(p,y,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function OU(n,e,t){const r=e,a=Jv("where",n);return tp._create(a,r,t)}class t0 extends e0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new t0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:St.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,o){let u=a;const h=o.getFlattenedFilters();for(const f of h)bx(u,f),u=p_(u,f)}(e._query,t),new Ko(e.firestore,e.converter,p_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function tR(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new _e(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JI(e)&&t.indexOf("/")!==-1)throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!Ee.isDocumentKey(r))throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yh(n,new Ee(r))}if(t instanceof Bn)return yh(n,t._key);throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qm(t)}.`)}function nR(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(n,e){const t=function(a,o){for(const u of a)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PU{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ia(e,(a,o)=>{r[a]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,a;const o=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[ou].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(u=>Lt(u.doubleValue));return new Yv(o)}convertGeoPoint(e){return new Kv(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ph(e));default:return null}}convertTimestamp(e){const t=vs(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);De(I1(r));const a=new Mo(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return a.isEqual(t)||Qn(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sx extends Ex{constructor(e,t,r,a,o,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vd extends Sx{data(e={}){return super.data(e)}}class Rx{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Gc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vd(this._firestore,this._userDataWriter,r.key,r,new Gc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const f=new Vd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Gc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new Vd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Gc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:MU(h.type),doc:f,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){n=br(n,Bn);const e=br(n.firestore,Ts);return gU(Xm(e),n._key).then(t=>Ix(e,n,t))}class n0 extends PU{constructor(e){super(),this.firestore=e}convertBytes(e){return new gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function Ro(n){n=br(n,Ko);const e=br(n.firestore,Ts),t=Xm(e),r=new n0(e);return Tx(n._query),yU(t,n._query).then(a=>new Rx(e,r,n,a))}function r0(n,e,t){n=br(n,Bn);const r=br(n.firestore,Ts),a=wx(n.converter,e);return np(r,[gx(Jm(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Un.none())])}function Su(n,e,t,...r){n=br(n,Bn);const a=br(n.firestore,Ts),o=Jm(a);let u;return u=typeof(e=Pt(e))=="string"||e instanceof Wm?AU(o,"updateDoc",n._key,e,t,r):RU(o,"updateDoc",n._key,e),np(a,[u.toMutation(n._key,Un.exists(!0))])}function Ax(n){return np(br(n.firestore,Ts),[new Fm(n._key,Un.none())])}function i0(n,e){const t=br(n.firestore,Ts),r=$r(n),a=wx(n.converter,e);return np(t,[gx(Jm(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function kU(n,...e){var t,r,a;n=Pt(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||eR(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(eR(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let f,p,y;if(n instanceof Bn)p=br(n.firestore,Ts),y=Ph(n._key.path),f={next:v=>{e[u]&&e[u](Ix(p,n,v))},error:e[u+1],complete:e[u+2]};else{const v=br(n,Ko);p=br(v.firestore,Ts),y=v._query;const T=new n0(p);f={next:S=>{e[u]&&e[u](new Rx(p,T,v,S))},error:e[u+1],complete:e[u+2]},Tx(n._query)}return function(T,S,C,M){const D=new Gv(M),F=new Fv(S,D,C);return T.asyncQueue.enqueueAndForget(async()=>jv(await gm(T),F)),()=>{D.su(),T.asyncQueue.enqueueAndForget(async()=>Bv(await gm(T),F))}}(Xm(p),y,h,f)}function np(n,e){return function(r,a){const o=new Vi;return r.asyncQueue.enqueueAndForget(async()=>iU(await pU(r),a,o)),o.promise}(Xm(n),e)}function Ix(n,e,t){const r=t.docs.get(e._key),a=new n0(n);return new Sx(n,a,e._key,r,new Gc(t.hasPendingWrites,t.fromCache),e.converter)}class VU{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=jU(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function LU(n){return new VU(n)}class UU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pm.provider,this._offlineComponentProvider={build:t=>new fU(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function jU(n){return new UU(void 0)}function xx(){return new Xv("serverTimestamp")}(function(e,t=!0){(function(a){Tu=a})(Ho),ui(new Hr("firestore",(r,{instanceIdentifier:a,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new Ts(new uV(r.getProvider("auth-internal")),new fV(u,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new _e(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(p.options.projectId,y)}(u,a),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),ir(Vw,Lw,e),ir(Vw,Lw,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="firebasestorage.googleapis.com",Dx="storageBucket",BU=2*60*1e3,zU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends Yr{constructor(e,t,r=0){super(Ny(e),`Firebase Storage: ${t} (${Ny(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ny(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function Ny(n){return"storage/"+n}function s0(){const n="An unknown error occurred, please check the error payload for server response.";return new Yt(Kt.UNKNOWN,n)}function FU(n){return new Yt(Kt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function qU(n){return new Yt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HU(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yt(Kt.UNAUTHENTICATED,n)}function GU(){return new Yt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $U(n){return new Yt(Kt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KU(){return new Yt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YU(){return new Yt(Kt.CANCELED,"User canceled the upload/download.")}function QU(n){return new Yt(Kt.INVALID_URL,"Invalid URL '"+n+"'.")}function XU(n){return new Yt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function WU(){return new Yt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dx+"' property when initializing the app?")}function ZU(){return new Yt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JU(){return new Yt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function e3(n){return new Yt(Kt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function C_(n){return new Yt(Kt.INVALID_ARGUMENT,n)}function Nx(){return new Yt(Kt.APP_DELETED,"The Firebase app was deleted.")}function t3(n){return new Yt(Kt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sh(n,e){return new Yt(Kt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Oc(n){throw new Yt(Kt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Er.makeFromUrl(e,t)}catch{return new Er(e,"")}if(r.path==="")return r;throw XU(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function o(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),f={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${v}/${y}/b/${a}/o${T}`,"i"),C={bucket:1,path:3},M=t===Cx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",F=new RegExp(`^https?://${M}/${a}/${D}`,"i"),k=[{regex:h,indices:f,postModify:o},{regex:S,indices:C,postModify:p},{regex:F,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<k.length;K++){const P=k[K],ie=P.regex.exec(e);if(ie){const O=ie[P.indices.bucket];let I=ie[P.indices.path];I||(I=""),r=new Er(O,I),P.postModify(r);break}}if(r==null)throw QU(e);return r}}class n3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(n,e,t){let r=1,a=null,o=null,u=!1,h=0;function f(){return h===2}let p=!1;function y(...D){p||(p=!0,e.apply(null,D))}function v(D){a=setTimeout(()=>{a=null,n(S,f())},D)}function T(){o&&clearTimeout(o)}function S(D,...F){if(p){T();return}if(D){T(),y.call(null,D,...F);return}if(f()||u){T(),y.call(null,D,...F);return}r<64&&(r*=2);let k;h===1?(h=2,k=0):k=(r+Math.random())*1e3,v(k)}let C=!1;function M(D){C||(C=!0,T(),!p&&(a!==null?(D||(h=2),clearTimeout(a),v(0)):D||(h=1)))}return v(0),o=setTimeout(()=>{u=!0,M(!0)},t),M}function i3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(n){return n!==void 0}function a3(n){return typeof n=="object"&&!Array.isArray(n)}function a0(n){return typeof n=="string"||n instanceof String}function rR(n){return o0()&&n instanceof Blob}function o0(){return typeof Blob<"u"}function iR(n,e,t,r){if(r<e)throw C_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw C_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Ox(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var Ao;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ao||(Ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,t,r,a,o,u,h,f,p,y,v,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=v,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,C)=>{this.resolve_=S,this.reject_=C,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new gd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===Ao.NO_ERROR,f=o.getStatus();if(!h||o3(f,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Ao.ABORT;r(!1,new gd(!1,null,y));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new gd(p,o))})},t=(r,a)=>{const o=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());s3(f)?o(f):o()}catch(f){u(f)}else if(h!==null){const f=s0();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(a.canceled){const f=this.appDelete_?Nx():YU();u(f)}else{const f=KU();u(f)}};this.canceled_?t(!1,new gd(!1,null,!0)):this.backoffId_=r3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&i3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function u3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function c3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function h3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function f3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function d3(n,e,t,r,a,o,u=!0){const h=Ox(n.urlParams),f=n.url+h,p=Object.assign({},n.headers);return h3(p,e),u3(p,t),c3(p,o),f3(p,r),new l3(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p3(...n){const e=m3();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(o0())return new Blob(n);throw new Yt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function g3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n){if(typeof atob>"u")throw e3("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Oy{constructor(e,t){this.data=e,this.contentType=t||null}}function _3(n,e){switch(n){case Mi.RAW:return new Oy(Px(e));case Mi.BASE64:case Mi.BASE64URL:return new Oy(Mx(n,e));case Mi.DATA_URL:return new Oy(E3(e),T3(e))}throw s0()}function Px(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=n.charCodeAt(++t);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function v3(n){let e;try{e=decodeURIComponent(n)}catch{throw sh(Mi.DATA_URL,"Malformed data URL.")}return Px(e)}function Mx(n,e){switch(n){case Mi.BASE64:{const a=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(a||o)throw sh(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const a=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(a||o)throw sh(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=y3(e)}catch(a){throw a.message.includes("polyfill")?a:sh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class kx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw sh(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=b3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function E3(n){const e=new kx(n);return e.base64?Mx(Mi.BASE64,e.rest):v3(e.rest)}function T3(n){return new kx(n).contentType}function b3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t){let r=0,a="";rR(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(rR(this.data_)){const r=this.data_,a=g3(r,e,t);return a===null?null:new ua(a)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ua(r,!0)}}static getBlob(...e){if(o0()){const t=e.map(r=>r instanceof ua?r.data_:r);return new ua(p3.apply(null,t))}else{const t=e.map(u=>a0(u)?_3(Mi.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const a=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)a[o++]=u[h]}),new ua(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(n){let e;try{e=JSON.parse(n)}catch{return null}return a3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function S3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Lx(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(n,e){return e}class Kn{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||R3}}let yd=null;function A3(n){return!a0(n)||n.length<2?n:Lx(n)}function Ux(){if(yd)return yd;const n=[];n.push(new Kn("bucket")),n.push(new Kn("generation")),n.push(new Kn("metageneration")),n.push(new Kn("name","fullPath",!0));function e(o,u){return A3(u)}const t=new Kn("name");t.xform=e,n.push(t);function r(o,u){return u!==void 0?Number(u):u}const a=new Kn("size");return a.xform=r,n.push(a),n.push(new Kn("timeCreated")),n.push(new Kn("updated")),n.push(new Kn("md5Hash",null,!0)),n.push(new Kn("cacheControl",null,!0)),n.push(new Kn("contentDisposition",null,!0)),n.push(new Kn("contentEncoding",null,!0)),n.push(new Kn("contentLanguage",null,!0)),n.push(new Kn("contentType",null,!0)),n.push(new Kn("metadata","customMetadata",!0)),yd=n,yd}function I3(n,e){function t(){const r=n.bucket,a=n.fullPath,o=new Er(r,a);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function x3(n,e,t){const r={};r.type="file";const a=t.length;for(let o=0;o<a;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return I3(r,n),r}function jx(n,e,t){const r=Vx(e);return r===null?null:x3(n,r,t)}function C3(n,e,t,r){const a=Vx(e);if(a===null||!a0(a.downloadTokens))return null;const o=a.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(p=>{const y=n.bucket,v=n.fullPath,T="/b/"+u(y)+"/o/"+u(v),S=l0(T,t,r),C=Ox({alt:"media",token:p});return S+C})[0]}function D3(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const o=e[a];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Bx{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n){if(!n)throw s0()}function N3(n,e){function t(r,a){const o=jx(n,a,e);return zx(o!==null),o}return t}function O3(n,e){function t(r,a){const o=jx(n,a,e);return zx(o!==null),C3(o,a,n.host,n._protocol)}return t}function Fx(n){function e(t,r){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=GU():a=HU():t.getStatus()===402?a=qU(n.bucket):t.getStatus()===403?a=$U(n.path):a=r,a.status=t.getStatus(),a.serverResponse=r.serverResponse,a}return e}function P3(n){const e=Fx(n);function t(r,a){let o=e(r,a);return r.getStatus()===404&&(o=FU(n.path)),o.serverResponse=a.serverResponse,o}return t}function M3(n,e,t){const r=e.fullServerUrl(),a=l0(r,n.host,n._protocol),o="GET",u=n.maxOperationRetryTime,h=new Bx(a,o,O3(n,t),u);return h.errorHandler=P3(e),h}function k3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function V3(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=k3(null,e)),r}function L3(n,e,t,r,a){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let k="";for(let K=0;K<2;K++)k=k+Math.random().toString().slice(2);return k}const f=h();u["Content-Type"]="multipart/related; boundary="+f;const p=V3(e,r,a),y=D3(p,t),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+f+"--",S=ua.getBlob(v,r,T);if(S===null)throw ZU();const C={name:p.fullPath},M=l0(o,n.host,n._protocol),D="POST",F=n.maxUploadRetryTime,B=new Bx(M,D,N3(n,t),F);return B.urlParams=C,B.headers=u,B.body=S.uploadData(),B.errorHandler=Fx(e),B}class U3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a){if(this.sent_)throw Oc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class j3 extends U3{initXhr(){this.xhr_.responseType="text"}}function qx(){return new j3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this._service=e,t instanceof Er?this._location=t:this._location=Er.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bo(e,t)}get root(){const e=new Er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lx(this._location.path)}get storage(){return this._service}get parent(){const e=w3(this._location.path);if(e===null)return null;const t=new Er(this._location.bucket,e);return new Bo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw t3(e)}}function B3(n,e,t){n._throwIfRoot("uploadBytes");const r=L3(n.storage,n._location,Ux(),new ua(e,!0),t);return n.storage.makeRequestWithTokens(r,qx).then(a=>({metadata:a,ref:n}))}function z3(n){n._throwIfRoot("getDownloadURL");const e=M3(n.storage,n._location,Ux());return n.storage.makeRequestWithTokens(e,qx).then(t=>{if(t===null)throw JU();return t})}function F3(n,e){const t=S3(n._location.path,e),r=new Er(n._location.bucket,t);return new Bo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){return/^[A-Za-z]+:\/\//.test(n)}function H3(n,e){return new Bo(n,e)}function Hx(n,e){if(n instanceof u0){const t=n;if(t._bucket==null)throw WU();const r=new Bo(t,t._bucket);return e!=null?Hx(r,e):r}else return e!==void 0?F3(n,e):n}function G3(n,e){if(e&&q3(e)){if(n instanceof u0)return H3(n,e);throw C_("To use ref(service, url), the first argument must be a Storage instance.")}else return Hx(n,e)}function sR(n,e){const t=e==null?void 0:e[Dx];return t==null?null:Er.makeFromBucketSpec(t,n)}function $3(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:ZN(a,n.app.options.projectId))}class u0{constructor(e,t,r,a,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=Cx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BU,this._maxUploadRetryTime=zU,this._requests=new Set,a!=null?this._bucket=Er.makeFromBucketSpec(a,this._host):this._bucket=sR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Er.makeFromBucketSpec(this._url,e):this._bucket=sR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bo(this,e)}_makeRequest(e,t,r,a,o=!0){if(this._deleted)return new n3(Nx());{const u=d3(e,this._appId,r,a,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const aR="@firebase/storage",oR="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="storage";function K3(n,e,t){return n=Pt(n),B3(n,e,t)}function Y3(n){return n=Pt(n),z3(n)}function Q3(n,e){return n=Pt(n),G3(n,e)}function X3(n=$_(),e){n=Pt(n);const r=wa(n,Gx).getImmediate({identifier:e}),a=XN("storage");return a&&W3(r,...a),r}function W3(n,e,t,r={}){$3(n,e,t,r)}function Z3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new u0(t,r,a,e,Ho)}function J3(){ui(new Hr(Gx,Z3,"PUBLIC").setMultipleInstances(!0)),ir(aR,oR,""),ir(aR,oR,"esm2017")}J3();const ej={apiKey:"AIzaSyArNOTjM3hplnhEUDJjzoxUpV8wdpuwgbI",authDomain:"ash-firebase-store.firebaseapp.com",projectId:"ash-firebase-store",storageBucket:"ash-firebase-store.firebasestorage.app",messagingSenderId:"643924266908",appId:"1:643924266908:web:0ed538952c7fdd5e914259"},Bh=cA(ej),$t=EU(Bh,{localCache:LU({tabManager:null})});rV(Bh);const wn=UM(Bh),tj=X3(Bh),nj=async(n,e)=>{try{const r=(await TP(wn,n,e)).user,a=$r($t,"users",r.uid);return(await yu(a)).exists()||await r0(a,{email:r.email,role:"user"}),r}catch(t){throw console.error("Sign Up Error:",t.message),t}},rj=async(n,e)=>{try{const t=await bP(wn,n,e);return console.log("Login Successful"),t.user}catch(t){throw console.error("Login Error:",t.message),alert(t.message),t}},ij=async()=>{try{const n=new hs,t=(await KP(wn,n)).user,r=$r($t,"users",t.uid);return(await yu(r)).exists()||await r0(r,{email:t.email,role:"user"}),t}catch(n){throw console.error("Google Sign-In Error:",n.message),n}};var Py={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var lR;function sj(){return lR||(lR=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",u=0;u<arguments.length;u++){var h=arguments[u];h&&(o=a(o,r(h)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var u="";for(var h in o)e.call(o,h)&&o[h]&&(u=a(u,h));return u}function a(o,u){return u?o?o+" "+u:o+u:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Py)),Py.exports}var aj=sj();const Mt=Sm(aj),Ru=!!(typeof window<"u"&&window.document&&window.document.createElement);var D_=!1,N_=!1;try{var My={get passive(){return D_=!0},get once(){return N_=D_=!0}};Ru&&(window.addEventListener("test",My,My),window.removeEventListener("test",My,!0))}catch{}function $x(n,e,t,r){if(r&&typeof r!="boolean"&&!N_){var a=r.once,o=r.capture,u=t;!N_&&a&&(u=t.__once||function h(f){this.removeEventListener(e,h,o),t.call(this,f)},t.__once=u),n.addEventListener(e,u,D_?r:o)}n.addEventListener(e,t,r)}function rp(n){return n&&n.ownerDocument||document}function O_(n,e,t,r){var a=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(e,t,a),t.__once&&n.removeEventListener(e,t.__once,a)}var _d;function uR(n){if((!_d&&_d!==0||n)&&Ru){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),_d=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return _d}function oj(){return R.useState(null)}function lj(n){const e=R.useRef(n);return R.useEffect(()=>{e.current=n},[n]),e}function P_(n){const e=lj(n);return R.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const cR=n=>!n||typeof n=="function"?n:e=>{n.current=e};function uj(n,e){const t=cR(n),r=cR(e);return a=>{t&&t(a),r&&r(a)}}function Kx(n,e){return R.useMemo(()=>uj(n,e),[n,e])}function cj(n){const e=R.useRef(n);return e.current=n,e}function hj(n){const e=cj(n);R.useEffect(()=>()=>e.current(),[])}function fj(n){var e=rp(n);return e&&e.defaultView||window}function dj(n,e){return fj(n).getComputedStyle(n,e)}var mj=/([A-Z])/g;function pj(n){return n.replace(mj,"-$1").toLowerCase()}var gj=/^ms-/;function vd(n){return pj(n).replace(gj,"-ms-")}var yj=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function _j(n){return!!(n&&yj.test(n))}function Io(n,e){var t="",r="";if(typeof e=="string")return n.style.getPropertyValue(vd(e))||dj(n).getPropertyValue(vd(e));Object.keys(e).forEach(function(a){var o=e[a];!o&&o!==0?n.style.removeProperty(vd(a)):_j(a)?r+=a+"("+o+") ":t+=vd(a)+": "+o+";"}),r&&(t+="transform: "+r+";"),n.style.cssText+=";"+t}function _m(n,e,t,r){return $x(n,e,t,r),function(){O_(n,e,t,r)}}function vj(n,e,t,r){if(r===void 0&&(r=!0),n){var a=document.createEvent("HTMLEvents");a.initEvent(e,t,r),n.dispatchEvent(a)}}function Ej(n){var e=Io(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function Tj(n,e,t){t===void 0&&(t=5);var r=!1,a=setTimeout(function(){r||vj(n,"transitionend",!0)},e+t),o=_m(n,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(a),o()}}function Yx(n,e,t,r){t==null&&(t=Ej(n)||0);var a=Tj(n,t,r),o=_m(n,"transitionend",e);return function(){a(),o()}}function ky(n){n===void 0&&(n=rp());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function hR(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}var Qx=YR();const Xl=Sm(Qx);function bj(){const n=R.useRef(!0),e=R.useRef(()=>n.current);return R.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function wj(n){const e=R.useRef(n);return e.current=n,e}function Sj(n){const e=wj(n);R.useEffect(()=>()=>e.current(),[])}function Rj(n){const e=R.useRef(null);return R.useEffect(()=>{e.current=n}),e.current}function Aj(n){const e=R.useRef(n);return R.useEffect(()=>{e.current=n},[n]),e}function po(n){const e=Aj(n);return R.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const Ij="data-rr-ui-";function xj(n){return`${Ij}${n}`}function Cj(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const fR=xj("modal-open");class c0{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:r=!1}={}){this.handleContainerOverflow=t,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Cj(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[r]:a.style[r]},e.scrollBarWidth&&(t[r]=`${parseInt(Io(a,r)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(fR,""),Io(a,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(fR),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Xx=R.createContext(Ru?window:void 0);Xx.Provider;function h0(){return R.useContext(Xx)}const Vy=(n,e)=>Ru?n==null?(e||rp()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function Dj(n,e){const t=h0(),[r,a]=R.useState(()=>Vy(n,t==null?void 0:t.document));if(!r){const o=Vy(n);o&&a(o)}return R.useEffect(()=>{},[e,r]),R.useEffect(()=>{const o=Vy(n);o!==r&&a(o)},[n,r]),r}const dR=n=>!n||typeof n=="function"?n:e=>{n.current=e};function Nj(n,e){const t=dR(n),r=dR(e);return a=>{t&&t(a),r&&r(a)}}function f0(n,e){return R.useMemo(()=>Nj(n,e),[n,e])}const Oj=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Pj=typeof document<"u",mR=Pj||Oj?R.useLayoutEffect:R.useEffect;function Mj(n){return n.code==="Escape"||n.keyCode===27}function kj(){const n=R.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function ip(n){if(!n||typeof n=="function")return null;const{major:e}=kj();return e>=19?n.props.ref:n.ref}function Vj({children:n,in:e,onExited:t,mountOnEnter:r,unmountOnExit:a}){const o=R.useRef(null),u=R.useRef(e),h=po(t);R.useEffect(()=>{e?u.current=!0:h(o.current)},[e,h]);const f=f0(o,ip(n)),p=R.cloneElement(n,{ref:f});return e?p:a||!u.current&&r?null:p}const Lj=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Uj(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function jj(n){let{onEnter:e,onEntering:t,onEntered:r,onExit:a,onExiting:o,onExited:u,addEndListener:h,children:f}=n,p=Uj(n,Lj);const y=R.useRef(null),v=f0(y,ip(f)),T=K=>P=>{K&&y.current&&K(y.current,P)},S=R.useCallback(T(e),[e]),C=R.useCallback(T(t),[t]),M=R.useCallback(T(r),[r]),D=R.useCallback(T(a),[a]),F=R.useCallback(T(o),[o]),B=R.useCallback(T(u),[u]),k=R.useCallback(T(h),[h]);return Object.assign({},p,{nodeRef:y},e&&{onEnter:S},t&&{onEntering:C},r&&{onEntered:M},a&&{onExit:D},o&&{onExiting:F},u&&{onExited:B},h&&{addEndListener:k},{children:typeof f=="function"?(K,P)=>f(K,Object.assign({},P,{ref:v})):R.cloneElement(f,{ref:v})})}const Bj=["component"];function zj(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const Fj=R.forwardRef((n,e)=>{let{component:t}=n,r=zj(n,Bj);const a=jj(r);return w.jsx(t,Object.assign({ref:e},a))});function qj({in:n,onTransition:e}){const t=R.useRef(null),r=R.useRef(!0),a=po(e);return mR(()=>{if(!t.current)return;let o=!1;return a({in:n,element:t.current,initial:r.current,isStale:()=>o}),()=>{o=!0}},[n,a]),mR(()=>(r.current=!1,()=>{r.current=!0}),[]),t}function Hj({children:n,in:e,onExited:t,onEntered:r,transition:a}){const[o,u]=R.useState(!e);e&&o&&u(!1);const h=qj({in:!!e,onTransition:p=>{const y=()=>{p.isStale()||(p.in?r==null||r(p.element,p.initial):(u(!0),t==null||t(p.element)))};Promise.resolve(a(p)).then(y,v=>{throw p.in||u(!0),v})}}),f=f0(h,ip(n));return o&&!e?null:R.cloneElement(n,{ref:f})}function pR(n,e,t){return n?w.jsx(Fj,Object.assign({},t,{component:n})):e?w.jsx(Hj,Object.assign({},t,{transition:e})):w.jsx(Vj,Object.assign({},t))}const Gj=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function $j(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}let Ly;function Kj(n){return Ly||(Ly=new c0({ownerDocument:n==null?void 0:n.document})),Ly}function Yj(n){const e=h0(),t=n||Kj(e),r=R.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>t.add(r.current),remove:()=>t.remove(r.current),isTopModal:()=>t.isTopModal(r.current),setDialogRef:R.useCallback(a=>{r.current.dialog=a},[]),setBackdropRef:R.useCallback(a=>{r.current.backdrop=a},[])})}const Wx=R.forwardRef((n,e)=>{let{show:t=!1,role:r="dialog",className:a,style:o,children:u,backdrop:h=!0,keyboard:f=!0,onBackdropClick:p,onEscapeKeyDown:y,transition:v,runTransition:T,backdropTransition:S,runBackdropTransition:C,autoFocus:M=!0,enforceFocus:D=!0,restoreFocus:F=!0,restoreFocusOptions:B,renderDialog:k,renderBackdrop:K=dt=>w.jsx("div",Object.assign({},dt)),manager:P,container:ie,onShow:O,onHide:I=()=>{},onExit:N,onExited:U,onExiting:z,onEnter:G,onEntering:V,onEntered:Tt}=n,je=$j(n,Gj);const ne=h0(),fe=Dj(ie),ge=Yj(P),qe=bj(),j=Rj(t),[oe,de]=R.useState(!t),he=R.useRef(null);R.useImperativeHandle(e,()=>ge,[ge]),Ru&&!j&&t&&(he.current=ky(ne==null?void 0:ne.document)),t&&oe&&de(!1);const be=po(()=>{if(ge.add(),Ft.current=_m(document,"keydown",ht),ft.current=_m(document,"focus",()=>setTimeout(ke),!0),O&&O(),M){var dt,Sr;const en=ky((dt=(Sr=ge.dialog)==null?void 0:Sr.ownerDocument)!=null?dt:ne==null?void 0:ne.document);ge.dialog&&en&&!hR(ge.dialog,en)&&(he.current=en,ge.dialog.focus())}}),Me=po(()=>{if(ge.remove(),Ft.current==null||Ft.current(),ft.current==null||ft.current(),F){var dt;(dt=he.current)==null||dt.focus==null||dt.focus(B),he.current=null}});R.useEffect(()=>{!t||!fe||be()},[t,fe,be]),R.useEffect(()=>{oe&&Me()},[oe,Me]),Sj(()=>{Me()});const ke=po(()=>{if(!D||!qe()||!ge.isTopModal())return;const dt=ky(ne==null?void 0:ne.document);ge.dialog&&dt&&!hR(ge.dialog,dt)&&ge.dialog.focus()}),kt=po(dt=>{dt.target===dt.currentTarget&&(p==null||p(dt),h===!0&&I())}),ht=po(dt=>{f&&Mj(dt)&&ge.isTopModal()&&(y==null||y(dt),dt.defaultPrevented||I())}),ft=R.useRef(),Ft=R.useRef(),Sn=(...dt)=>{de(!0),U==null||U(...dt)};if(!fe)return null;const Nn=Object.assign({role:r,ref:ge.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},je,{style:o,className:a,tabIndex:-1});let Qt=k?k(Nn):w.jsx("div",Object.assign({},Nn,{children:R.cloneElement(u,{role:"document"})}));Qt=pR(v,T,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:N,onExiting:z,onExited:Sn,onEnter:G,onEntering:V,onEntered:Tt,children:Qt});let On=null;return h&&(On=K({ref:ge.setBackdropRef,onClick:kt}),On=pR(S,C,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:On})),w.jsx(w.Fragment,{children:Xl.createPortal(w.jsxs(w.Fragment,{children:[On,Qt]}),fe)})});Wx.displayName="Modal";const Qj=Object.assign(Wx,{Manager:c0});function Xj(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function Wj(n,e){n.classList?n.classList.add(e):Xj(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}var Zj=Function.prototype.bind.call(Function.prototype.call,[].slice);function zl(n,e){return Zj(n.querySelectorAll(e))}function gR(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Jj(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=gR(n.className,e):n.setAttribute("class",gR(n.className&&n.className.baseVal||"",e))}const Fl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class e6 extends c0{adjustAndStore(e,t,r){const a=t.style[e];t.dataset[e]=a,Io(t,{[e]:`${parseFloat(Io(t,e))+r}px`})}restore(e,t){const r=t.dataset[e];r!==void 0&&(delete t.dataset[e],Io(t,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(Wj(t,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";zl(t,Fl.FIXED_CONTENT).forEach(o=>this.adjustAndStore(r,o,e.scrollBarWidth)),zl(t,Fl.STICKY_CONTENT).forEach(o=>this.adjustAndStore(a,o,-e.scrollBarWidth)),zl(t,Fl.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(a,o,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();Jj(t,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";zl(t,Fl.FIXED_CONTENT).forEach(o=>this.restore(r,o)),zl(t,Fl.STICKY_CONTENT).forEach(o=>this.restore(a,o)),zl(t,Fl.NAVBAR_TOGGLER).forEach(o=>this.restore(a,o))}}let Uy;function t6(n){return Uy||(Uy=new e6(n)),Uy}function n6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function M_(n,e){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},M_(n,e)}function r6(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,M_(n,e)}var jy={exports:{}},By,yR;function i6(){if(yR)return By;yR=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return By=n,By}var zy,_R;function s6(){if(_R)return zy;_R=1;var n=i6();function e(){}function t(){}return t.resetWarningCache=e,zy=function(){function r(u,h,f,p,y,v){if(v!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function a(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},zy}var vR;function a6(){return vR||(vR=1,jy.exports=s6()()),jy.exports}var o6=a6();const gs=Sm(o6),ER={disabled:!1},Zx=We.createContext(null);var l6=function(e){return e.scrollTop},$c="unmounted",uo="exited",ia="entering",go="entered",k_="exiting",Is=function(n){r6(e,n);function e(r,a){var o;o=n.call(this,r,a)||this;var u=a,h=u&&!u.isMounting?r.enter:r.appear,f;return o.appearStatus=null,r.in?h?(f=uo,o.appearStatus=ia):f=go:r.unmountOnExit||r.mountOnEnter?f=$c:f=uo,o.state={status:f},o.nextCallback=null,o}e.getDerivedStateFromProps=function(a,o){var u=a.in;return u&&o.status===$c?{status:uo}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(a){var o=null;if(a!==this.props){var u=this.state.status;this.props.in?u!==ia&&u!==go&&(o=ia):(u===ia||u===go)&&(o=k_)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var a=this.props.timeout,o,u,h;return o=u=h=a,a!=null&&typeof a!="number"&&(o=a.exit,u=a.enter,h=a.appear!==void 0?a.appear:u),{exit:o,enter:u,appear:h}},t.updateStatus=function(a,o){if(a===void 0&&(a=!1),o!==null)if(this.cancelNextCallback(),o===ia){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Xl.findDOMNode(this);u&&l6(u)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===uo&&this.setState({status:$c})},t.performEnter=function(a){var o=this,u=this.props.enter,h=this.context?this.context.isMounting:a,f=this.props.nodeRef?[h]:[Xl.findDOMNode(this),h],p=f[0],y=f[1],v=this.getTimeouts(),T=h?v.appear:v.enter;if(!a&&!u||ER.disabled){this.safeSetState({status:go},function(){o.props.onEntered(p)});return}this.props.onEnter(p,y),this.safeSetState({status:ia},function(){o.props.onEntering(p,y),o.onTransitionEnd(T,function(){o.safeSetState({status:go},function(){o.props.onEntered(p,y)})})})},t.performExit=function(){var a=this,o=this.props.exit,u=this.getTimeouts(),h=this.props.nodeRef?void 0:Xl.findDOMNode(this);if(!o||ER.disabled){this.safeSetState({status:uo},function(){a.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:k_},function(){a.props.onExiting(h),a.onTransitionEnd(u.exit,function(){a.safeSetState({status:uo},function(){a.props.onExited(h)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(a,o){o=this.setNextCallback(o),this.setState(a,o)},t.setNextCallback=function(a){var o=this,u=!0;return this.nextCallback=function(h){u&&(u=!1,o.nextCallback=null,a(h))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},t.onTransitionEnd=function(a,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:Xl.findDOMNode(this),h=a==null&&!this.props.addEndListener;if(!u||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],p=f[0],y=f[1];this.props.addEndListener(p,y)}a!=null&&setTimeout(this.nextCallback,a)},t.render=function(){var a=this.state.status;if(a===$c)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var h=n6(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return We.createElement(Zx.Provider,{value:null},typeof u=="function"?u(a,h):We.cloneElement(We.Children.only(u),h))},e}(We.Component);Is.contextType=Zx;Is.propTypes={};function ql(){}Is.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ql,onEntering:ql,onEntered:ql,onExit:ql,onExiting:ql,onExited:ql};Is.UNMOUNTED=$c;Is.EXITED=uo;Is.ENTERING=ia;Is.ENTERED=go;Is.EXITING=k_;function TR(n,e){const t=Io(n,e)||"",r=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*r}function u6(n,e){const t=TR(n,"transitionDuration"),r=TR(n,"transitionDelay"),a=Yx(n,o=>{o.target===n&&(a(),e(o))},t+r)}function c6(n){n.offsetHeight}function h6(n){return n&&"setState"in n?Xl.findDOMNode(n):n??null}const f6=We.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:r,onExiting:a,onExited:o,addEndListener:u,children:h,childRef:f,...p},y)=>{const v=R.useRef(null),T=Kx(v,f),S=ie=>{T(h6(ie))},C=ie=>O=>{ie&&v.current&&ie(v.current,O)},M=R.useCallback(C(n),[n]),D=R.useCallback(C(e),[e]),F=R.useCallback(C(t),[t]),B=R.useCallback(C(r),[r]),k=R.useCallback(C(a),[a]),K=R.useCallback(C(o),[o]),P=R.useCallback(C(u),[u]);return w.jsx(Is,{ref:y,...p,onEnter:M,onEntered:F,onEntering:D,onExit:B,onExited:K,onExiting:k,addEndListener:P,nodeRef:v,children:typeof h=="function"?(ie,O)=>h(ie,{...O,ref:S}):We.cloneElement(h,{ref:S})})}),d6={[ia]:"show",[go]:"show"},d0=R.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:r,...a},o)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},h=R.useCallback((f,p)=>{c6(f),r==null||r(f,p)},[r]);return w.jsx(f6,{ref:o,addEndListener:u6,...u,onEnter:h,childRef:ip(e),children:(f,p)=>R.cloneElement(e,{...p,className:Mt("fade",n,e.props.className,d6[f],t[f])})})});d0.displayName="Fade";const m6=["xxl","xl","lg","md","sm","xs"],p6="xs",zh=R.createContext({prefixes:{},breakpoints:m6,minBreakpoint:p6}),{Consumer:J5,Provider:ez}=zh;function mn(n,e){const{prefixes:t}=R.useContext(zh);return n||t[e]||e}function g6(){const{breakpoints:n}=R.useContext(zh);return n}function y6(){const{minBreakpoint:n}=R.useContext(zh);return n}function _6(){const{dir:n}=R.useContext(zh);return n==="rtl"}const Jx=R.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},a)=>(e=mn(e,"modal-body"),w.jsx(t,{ref:a,className:Mt(n,e),...r})));Jx.displayName="ModalBody";const eC=R.createContext({onHide(){}}),m0=R.forwardRef(({bsPrefix:n,className:e,contentClassName:t,centered:r,size:a,fullscreen:o,children:u,scrollable:h,...f},p)=>{n=mn(n,"modal");const y=`${n}-dialog`,v=typeof o=="string"?`${n}-fullscreen-${o}`:`${n}-fullscreen`;return w.jsx("div",{...f,ref:p,className:Mt(y,e,a&&`${n}-${a}`,r&&`${y}-centered`,h&&`${y}-scrollable`,o&&v),children:w.jsx("div",{className:Mt(`${n}-content`,t),children:u})})});m0.displayName="ModalDialog";const tC=R.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},a)=>(e=mn(e,"modal-footer"),w.jsx(t,{ref:a,className:Mt(n,e),...r})));tC.displayName="ModalFooter";const v6={"aria-label":gs.string,onClick:gs.func,variant:gs.oneOf(["white"])},p0=R.forwardRef(({className:n,variant:e,"aria-label":t="Close",...r},a)=>w.jsx("button",{ref:a,type:"button",className:Mt("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...r}));p0.displayName="CloseButton";p0.propTypes=v6;const E6=R.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:r,children:a,...o},u)=>{const h=R.useContext(eC),f=P_(()=>{h==null||h.onHide(),r==null||r()});return w.jsxs("div",{ref:u,...o,children:[a,t&&w.jsx(p0,{"aria-label":n,variant:e,onClick:f})]})}),nC=R.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:r=!1,...a},o)=>(n=mn(n,"modal-header"),w.jsx(E6,{ref:o,...a,className:Mt(e,n),closeLabel:t,closeButton:r})));nC.displayName="ModalHeader";const T6=n=>R.forwardRef((e,t)=>w.jsx("div",{...e,ref:t,className:Mt(e.className,n)})),b6=T6("h4"),rC=R.forwardRef(({className:n,bsPrefix:e,as:t=b6,...r},a)=>(e=mn(e,"modal-title"),w.jsx(t,{ref:a,className:Mt(n,e),...r})));rC.displayName="ModalTitle";function w6(n){return w.jsx(d0,{...n,timeout:null})}function S6(n){return w.jsx(d0,{...n,timeout:null})}const iC=R.forwardRef(({bsPrefix:n,className:e,style:t,dialogClassName:r,contentClassName:a,children:o,dialogAs:u=m0,"data-bs-theme":h,"aria-labelledby":f,"aria-describedby":p,"aria-label":y,show:v=!1,animation:T=!0,backdrop:S=!0,keyboard:C=!0,onEscapeKeyDown:M,onShow:D,onHide:F,container:B,autoFocus:k=!0,enforceFocus:K=!0,restoreFocus:P=!0,restoreFocusOptions:ie,onEntered:O,onExit:I,onExiting:N,onEnter:U,onEntering:z,onExited:G,backdropClassName:V,manager:Tt,...je},ne)=>{const[fe,ge]=R.useState({}),[qe,j]=R.useState(!1),oe=R.useRef(!1),de=R.useRef(!1),he=R.useRef(null),[be,Me]=oj(),ke=Kx(ne,Me),kt=P_(F),ht=_6();n=mn(n,"modal");const ft=R.useMemo(()=>({onHide:kt}),[kt]);function Ft(){return Tt||t6({isRTL:ht})}function Sn(Se){if(!Ru)return;const Ye=Ft().getScrollbarWidth()>0,tn=Se.scrollHeight>rp(Se).documentElement.clientHeight;ge({paddingRight:Ye&&!tn?uR():void 0,paddingLeft:!Ye&&tn?uR():void 0})}const Nn=P_(()=>{be&&Sn(be.dialog)});hj(()=>{O_(window,"resize",Nn),he.current==null||he.current()});const Qt=()=>{oe.current=!0},On=Se=>{oe.current&&be&&Se.target===be.dialog&&(de.current=!0),oe.current=!1},dt=()=>{j(!0),he.current=Yx(be.dialog,()=>{j(!1)})},Sr=Se=>{Se.target===Se.currentTarget&&dt()},en=Se=>{if(S==="static"){Sr(Se);return}if(de.current||Se.target!==Se.currentTarget){de.current=!1;return}F==null||F()},Ca=Se=>{C?M==null||M(Se):(Se.preventDefault(),S==="static"&&dt())},Bi=(Se,Ye)=>{Se&&Sn(Se),U==null||U(Se,Ye)},hi=Se=>{he.current==null||he.current(),I==null||I(Se)},Rn=(Se,Ye)=>{z==null||z(Se,Ye),$x(window,"resize",Nn)},Xr=Se=>{Se&&(Se.style.display=""),G==null||G(Se),O_(window,"resize",Nn)},Wr=R.useCallback(Se=>w.jsx("div",{...Se,className:Mt(`${n}-backdrop`,V,!T&&"show")}),[T,V,n]),Rr={...t,...fe};Rr.display="block";const zn=Se=>w.jsx("div",{role:"dialog",...Se,style:Rr,className:Mt(e,n,qe&&`${n}-static`,!T&&"show"),onClick:S?en:void 0,onMouseUp:On,"data-bs-theme":h,"aria-label":y,"aria-labelledby":f,"aria-describedby":p,children:w.jsx(u,{...je,onMouseDown:Qt,className:r,contentClassName:a,children:o})});return w.jsx(eC.Provider,{value:ft,children:w.jsx(Qj,{show:v,ref:ke,backdrop:S,container:B,keyboard:!0,autoFocus:k,enforceFocus:K,restoreFocus:P,restoreFocusOptions:ie,onEscapeKeyDown:Ca,onShow:D,onHide:F,onEnter:Bi,onEntering:Rn,onEntered:O,onExit:hi,onExiting:N,onExited:Xr,manager:Ft(),transition:T?w6:void 0,backdropTransition:T?S6:void 0,renderBackdrop:Wr,renderDialog:zn})})});iC.displayName="Modal";const Pc=Object.assign(iC,{Body:Jx,Header:nC,Title:rC,Footer:tC,Dialog:m0,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),R6={type:gs.string,tooltip:gs.bool,as:gs.elementType},sp=R.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:r=!1,...a},o)=>w.jsx(n,{...a,ref:o,className:Mt(e,`${t}-${r?"tooltip":"feedback"}`)}));sp.displayName="Feedback";sp.propTypes=R6;const bs=R.createContext({}),g0=R.forwardRef(({id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:a=!1,isInvalid:o=!1,as:u="input",...h},f)=>{const{controlId:p}=R.useContext(bs);return e=mn(e,"form-check-input"),w.jsx(u,{...h,ref:f,type:r,id:n||p,className:Mt(t,e,a&&"is-valid",o&&"is-invalid")})});g0.displayName="FormCheckInput";const vm=R.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...r},a)=>{const{controlId:o}=R.useContext(bs);return n=mn(n,"form-check-label"),w.jsx("label",{...r,ref:a,htmlFor:t||o,className:Mt(e,n)})});vm.displayName="FormCheckLabel";function A6(n,e){return R.Children.toArray(n).some(t=>R.isValidElement(t)&&t.type===e)}const sC=R.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:a=!1,disabled:o=!1,isValid:u=!1,isInvalid:h=!1,feedbackTooltip:f=!1,feedback:p,feedbackType:y,className:v,style:T,title:S="",type:C="checkbox",label:M,children:D,as:F="input",...B},k)=>{e=mn(e,"form-check"),t=mn(t,"form-switch");const{controlId:K}=R.useContext(bs),P=R.useMemo(()=>({controlId:n||K}),[K,n]),ie=!D&&M!=null&&M!==!1||A6(D,vm),O=w.jsx(g0,{...B,type:C==="switch"?"checkbox":C,ref:k,isValid:u,isInvalid:h,disabled:o,as:F});return w.jsx(bs.Provider,{value:P,children:w.jsx("div",{style:T,className:Mt(v,ie&&e,r&&`${e}-inline`,a&&`${e}-reverse`,C==="switch"&&t),children:D||w.jsxs(w.Fragment,{children:[O,ie&&w.jsx(vm,{title:S,children:M}),p&&w.jsx(sp,{type:y,tooltip:f,children:p})]})})})});sC.displayName="FormCheck";const Em=Object.assign(sC,{Input:g0,Label:vm}),aC=R.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:r,id:a,className:o,isValid:u=!1,isInvalid:h=!1,plaintext:f,readOnly:p,as:y="input",...v},T)=>{const{controlId:S}=R.useContext(bs);return n=mn(n,"form-control"),w.jsx(y,{...v,type:e,size:r,ref:T,readOnly:p,id:a||S,className:Mt(o,f?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,u&&"is-valid",h&&"is-invalid")})});aC.displayName="FormControl";const I6=Object.assign(aC,{Feedback:sp}),oC=R.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},a)=>(e=mn(e,"form-floating"),w.jsx(t,{ref:a,className:Mt(n,e),...r})));oC.displayName="FormFloating";const y0=R.forwardRef(({controlId:n,as:e="div",...t},r)=>{const a=R.useMemo(()=>({controlId:n}),[n]);return w.jsx(bs.Provider,{value:a,children:w.jsx(e,{...t,ref:r})})});y0.displayName="FormGroup";function x6({as:n,bsPrefix:e,className:t,...r}){e=mn(e,"col");const a=g6(),o=y6(),u=[],h=[];return a.forEach(f=>{const p=r[f];delete r[f];let y,v,T;typeof p=="object"&&p!=null?{span:y,offset:v,order:T}=p:y=p;const S=f!==o?`-${f}`:"";y&&u.push(y===!0?`${e}${S}`:`${e}${S}-${y}`),T!=null&&h.push(`order${S}-${T}`),v!=null&&h.push(`offset${S}-${v}`)}),[{...r,className:Mt(t,...u,...h)},{as:n,bsPrefix:e,spans:u}]}const lC=R.forwardRef((n,e)=>{const[{className:t,...r},{as:a="div",bsPrefix:o,spans:u}]=x6(n);return w.jsx(a,{...r,ref:e,className:Mt(t,!u.length&&o)})});lC.displayName="Col";const uC=R.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:a,htmlFor:o,...u},h)=>{const{controlId:f}=R.useContext(bs);e=mn(e,"form-label");let p="col-form-label";typeof t=="string"&&(p=`${p} ${p}-${t}`);const y=Mt(a,e,r&&"visually-hidden",t&&p);return o=o||f,t?w.jsx(lC,{ref:h,as:"label",className:y,htmlFor:o,...u}):w.jsx(n,{ref:h,className:y,htmlFor:o,...u})});uC.displayName="FormLabel";const cC=R.forwardRef(({bsPrefix:n,className:e,id:t,...r},a)=>{const{controlId:o}=R.useContext(bs);return n=mn(n,"form-range"),w.jsx("input",{...r,type:"range",ref:a,className:Mt(e,n),id:t||o})});cC.displayName="FormRange";const hC=R.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:r,isValid:a=!1,isInvalid:o=!1,id:u,...h},f)=>{const{controlId:p}=R.useContext(bs);return n=mn(n,"form-select"),w.jsx("select",{...h,size:t,ref:f,className:Mt(r,n,e&&`${n}-${e}`,a&&"is-valid",o&&"is-invalid"),id:u||p})});hC.displayName="FormSelect";const fC=R.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:r,...a},o)=>(n=mn(n,"form-text"),w.jsx(t,{...a,ref:o,className:Mt(e,n,r&&"text-muted")})));fC.displayName="FormText";const dC=R.forwardRef((n,e)=>w.jsx(Em,{...n,ref:e,type:"switch"}));dC.displayName="Switch";const C6=Object.assign(dC,{Input:Em.Input,Label:Em.Label}),mC=R.forwardRef(({bsPrefix:n,className:e,children:t,controlId:r,label:a,...o},u)=>(n=mn(n,"form-floating"),w.jsxs(y0,{ref:u,className:Mt(e,n),controlId:r,...o,children:[t,w.jsx("label",{htmlFor:r,children:a})]})));mC.displayName="FloatingLabel";const D6={_ref:gs.any,validated:gs.bool,as:gs.elementType},_0=R.forwardRef(({className:n,validated:e,as:t="form",...r},a)=>w.jsx(t,{...r,ref:a,className:Mt(n,e&&"was-validated")}));_0.displayName="Form";_0.propTypes=D6;const Mc=Object.assign(_0,{Group:y0,Control:I6,Floating:oC,Check:Em,Switch:C6,Label:uC,Text:fC,Range:cC,Select:hC,FloatingLabel:mC}),N6=["as","disabled"];function O6(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function P6(n){return!n||n.trim()==="#"}function pC({tagName:n,disabled:e,href:t,target:r,rel:a,role:o,onClick:u,tabIndex:h=0,type:f}){n||(t!=null||r!=null||a!=null?n="a":n="button");const p={tagName:n};if(n==="button")return[{type:f||"button",disabled:e},p];const y=T=>{if((e||n==="a"&&P6(t))&&T.preventDefault(),e){T.stopPropagation();return}u==null||u(T)},v=T=>{T.key===" "&&(T.preventDefault(),y(T))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:h,href:t,target:n==="a"?r:void 0,"aria-disabled":e||void 0,rel:n==="a"?a:void 0,onClick:y,onKeyDown:v},p]}const M6=R.forwardRef((n,e)=>{let{as:t,disabled:r}=n,a=O6(n,N6);const[o,{tagName:u}]=pC(Object.assign({tagName:t,disabled:r},a));return w.jsx(u,Object.assign({},a,o,{ref:e}))});M6.displayName="Button";const Kc=R.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:r,active:a=!1,disabled:o=!1,className:u,...h},f)=>{const p=mn(e,"btn"),[y,{tagName:v}]=pC({tagName:n,disabled:o,...h}),T=v;return w.jsx(T,{...y,...h,ref:f,disabled:o,className:Mt(u,p,a&&"active",t&&`${p}-${t}`,r&&`${p}-${r}`,h.href&&o&&"disabled")})});Kc.displayName="Button";const k6=({onClose:n})=>{const[e,t]=R.useState(""),[r,a]=R.useState(""),o=async u=>{u.preventDefault();try{await sendPasswordResetEmail(auth,e),a("Password reset email sent! Check your inbox")}catch(h){a(h.message)}};return w.jsxs("div",{className:"password-reset-modal",children:[w.jsx("h2",{children:"Reset Password"}),w.jsx("form",{onSubmit:o,children:w.jsx("input",{type:"email",placeholder:"Enter your Email",value:e,onChange:u=>t(u.target.value),required:!0})}),r&&w.jsx("p",{children:r}),w.jsx("button",{onClick:n,children:"Close"})]})},V6=({shouldShow:n,handleShow:e,setName:t})=>{const[r,a]=R.useState(null),[o,u]=R.useState(""),[h,f]=R.useState(""),[p,y]=R.useState(!1);return R.useEffect(()=>{const v=xh(wn,T=>{T&&(a(T),t(T.displayName||T.email),e(!1))});return()=>v},[t,e]),w.jsx("div",{children:w.jsxs(Pc,{show:n,onHide:()=>e(!1),children:[w.jsx(Pc.Header,{closeButton:!0,children:w.jsx(Pc.Title,{children:"Sign in to Shoppers Stop"})}),w.jsx(Pc.Body,{children:w.jsxs(Mc,{children:[w.jsx(Mc.Group,{className:"email",controlId:"exapmleForm.ControlInput1",children:w.jsx(Mc.Control,{type:"email",placeholder:"Enter your phone or email ID",autoFocus:!0,value:o,onChange:v=>{u(v.target.value)}})}),w.jsx(Mc.Group,{className:"email",controlId:"exapmleForm.ControlInput1",children:w.jsx(Mc.Control,{type:"password",placeholder:"Password",autoFocus:!0,value:h,onChange:v=>{f(v.target.value)}})})]})}),w.jsxs(Pc.Footer,{className:"footer",children:[w.jsx(Kc,{variant:"secondary",onClick:e,children:"Close"}),w.jsx(Kc,{className:"btn-login",onClick:()=>rj(o,h),children:"Proceed"}),w.jsxs("div",{children:[w.jsx("span",{className:"info-break",children:"Or Sign in with Google"}),w.jsx(Kc,{onClick:ij,children:w.jsx(jN,{})}),w.jsxs("div",{className:"signup-row",children:[w.jsx("h3",{children:"Dont have an account?"}),w.jsx(Kc,{variant:"link",onClick:()=>nj(o,h),children:"signUp"})]}),w.jsx("p",{onClick:()=>y(!0),style:{cursor:"pointer",color:"blue"},children:"Forgot Password?"}),p&&w.jsx(k6,{onClose:()=>y(!1)})]})]})]})})};function gC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=gC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function xo(){for(var n,e,t=0,r="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=gC(n))&&(r&&(r+=" "),r+=e);return r}function L6(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}L6(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Fh=n=>typeof n=="number"&&!isNaN(n),zo=n=>typeof n=="string",ws=n=>typeof n=="function",U6=n=>zo(n)||Fh(n),V_=n=>zo(n)||ws(n)?n:null,j6=(n,e)=>n===!1||Fh(n)&&n>0?n:e,L_=n=>R.isValidElement(n)||zo(n)||ws(n)||Fh(n);function B6(n,e,t=300){let{scrollHeight:r,style:a}=n;requestAnimationFrame(()=>{a.minHeight="initial",a.height=r+"px",a.transition=`all ${t}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,t)})})}function z6({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:a=300}){return function({children:o,position:u,preventExitTransition:h,done:f,nodeRef:p,isIn:y,playToast:v}){let T=t?`${n}--${u}`:n,S=t?`${e}--${u}`:e,C=R.useRef(0);return R.useLayoutEffect(()=>{let M=p.current,D=T.split(" "),F=B=>{B.target===p.current&&(v(),M.removeEventListener("animationend",F),M.removeEventListener("animationcancel",F),C.current===0&&B.type!=="animationcancel"&&M.classList.remove(...D))};M.classList.add(...D),M.addEventListener("animationend",F),M.addEventListener("animationcancel",F)},[]),R.useEffect(()=>{let M=p.current,D=()=>{M.removeEventListener("animationend",D),r?B6(M,f,a):f()};y||(h?D():(C.current=1,M.className+=` ${S}`,M.addEventListener("animationend",D)))},[y]),We.createElement(We.Fragment,null,o)}}function bR(n,e){return{content:yC(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function yC(n,e,t=!1){return R.isValidElement(n)&&!zo(n.type)?R.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ws(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function F6({closeToast:n,theme:e,ariaLabel:t="close"}){return We.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},We.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},We.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function q6({delay:n,isRunning:e,closeToast:t,type:r="default",hide:a,className:o,controlledProgress:u,progress:h,rtl:f,isIn:p,theme:y}){let v=a||u&&h===0,T={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};u&&(T.transform=`scaleX(${h})`);let S=xo("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":f}),C=ws(o)?o({rtl:f,type:r,defaultClassName:S}):xo(S,o),M={[u&&h>=1?"onTransitionEnd":"onAnimationEnd"]:u&&h<1?null:()=>{p&&t()}};return We.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":v},We.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${y} Toastify__progress-bar--${r}`}),We.createElement("div",{role:"progressbar","aria-hidden":v?"true":"false","aria-label":"notification timer",className:C,style:T,...M}))}var H6=1,_C=()=>`${H6++}`;function G6(n,e,t){let r=1,a=0,o=[],u=[],h=e,f=new Map,p=new Set,y=B=>(p.add(B),()=>p.delete(B)),v=()=>{u=Array.from(f.values()),p.forEach(B=>B())},T=({containerId:B,toastId:k,updateId:K})=>{let P=B?B!==n:n!==1,ie=f.has(k)&&K==null;return P||ie},S=(B,k)=>{f.forEach(K=>{var P;(k==null||k===K.props.toastId)&&((P=K.toggle)==null||P.call(K,B))})},C=B=>{var k,K;(K=(k=B.props)==null?void 0:k.onClose)==null||K.call(k,B.removalReason),B.isActive=!1},M=B=>{if(B==null)f.forEach(C);else{let k=f.get(B);k&&C(k)}v()},D=()=>{a-=o.length,o=[]},F=B=>{var k,K;let{toastId:P,updateId:ie}=B.props,O=ie==null;B.staleId&&f.delete(B.staleId),B.isActive=!0,f.set(P,B),v(),t(bR(B,O?"added":"updated")),O&&((K=(k=B.props).onOpen)==null||K.call(k))};return{id:n,props:h,observe:y,toggle:S,removeToast:M,toasts:f,clearQueue:D,buildToast:(B,k)=>{if(T(k))return;let{toastId:K,updateId:P,data:ie,staleId:O,delay:I}=k,N=P==null;N&&a++;let U={...h,style:h.toastStyle,key:r++,...Object.fromEntries(Object.entries(k).filter(([G,V])=>V!=null)),toastId:K,updateId:P,data:ie,isIn:!1,className:V_(k.className||h.toastClassName),progressClassName:V_(k.progressClassName||h.progressClassName),autoClose:k.isLoading?!1:j6(k.autoClose,h.autoClose),closeToast(G){f.get(K).removalReason=G,M(K)},deleteToast(){let G=f.get(K);if(G!=null){if(t(bR(G,"removed")),f.delete(K),a--,a<0&&(a=0),o.length>0){F(o.shift());return}v()}}};U.closeButton=h.closeButton,k.closeButton===!1||L_(k.closeButton)?U.closeButton=k.closeButton:k.closeButton===!0&&(U.closeButton=L_(h.closeButton)?h.closeButton:!0);let z={content:B,props:U,staleId:O};h.limit&&h.limit>0&&a>h.limit&&N?o.push(z):Fh(I)?setTimeout(()=>{F(z)},I):F(z)},setProps(B){h=B},setToggle:(B,k)=>{let K=f.get(B);K&&(K.toggle=k)},isToastActive:B=>{var k;return(k=f.get(B))==null?void 0:k.isActive},getSnapshot:()=>u}}var Xn=new Map,Th=[],U_=new Set,$6=n=>U_.forEach(e=>e(n)),vC=()=>Xn.size>0;function K6(){Th.forEach(n=>TC(n.content,n.options)),Th=[]}var Y6=(n,{containerId:e})=>{var t;return(t=Xn.get(e||1))==null?void 0:t.toasts.get(n)};function EC(n,e){var t;if(e)return!!((t=Xn.get(e))!=null&&t.isToastActive(n));let r=!1;return Xn.forEach(a=>{a.isToastActive(n)&&(r=!0)}),r}function Q6(n){if(!vC()){Th=Th.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||U6(n))Xn.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Xn.get(n.containerId);e?e.removeToast(n.id):Xn.forEach(t=>{t.removeToast(n.id)})}}var X6=(n={})=>{Xn.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function TC(n,e){L_(n)&&(vC()||Th.push({content:n,options:e}),Xn.forEach(t=>{t.buildToast(n,e)}))}function W6(n){var e;(e=Xn.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function bC(n,e){Xn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function Z6(n){let e=n.containerId||1;return{subscribe(t){let r=G6(e,n,$6);Xn.set(e,r);let a=r.observe(t);return K6(),()=>{a(),Xn.delete(e)}},setProps(t){var r;(r=Xn.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Xn.get(e))==null?void 0:t.getSnapshot()}}}function J6(n){return U_.add(n),()=>{U_.delete(n)}}function e9(n){return n&&(zo(n.toastId)||Fh(n.toastId))?n.toastId:_C()}function qh(n,e){return TC(n,e),e.toastId}function ap(n,e){return{...e,type:e&&e.type||n,toastId:e9(e)}}function op(n){return(e,t)=>qh(e,ap(n,t))}function Fe(n,e){return qh(n,ap("default",e))}Fe.loading=(n,e)=>qh(n,ap("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function t9(n,{pending:e,error:t,success:r},a){let o;e&&(o=zo(e)?Fe.loading(e,a):Fe.loading(e.render,{...a,...e}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(p,y,v)=>{if(y==null){Fe.dismiss(o);return}let T={type:p,...u,...a,data:v},S=zo(y)?{render:y}:y;return o?Fe.update(o,{...T,...S}):Fe(S.render,{...T,...S}),v},f=ws(n)?n():n;return f.then(p=>h("success",r,p)).catch(p=>h("error",t,p)),f}Fe.promise=t9;Fe.success=op("success");Fe.info=op("info");Fe.error=op("error");Fe.warning=op("warning");Fe.warn=Fe.warning;Fe.dark=(n,e)=>qh(n,ap("default",{theme:"dark",...e}));function n9(n){Q6(n)}Fe.dismiss=n9;Fe.clearWaitingQueue=X6;Fe.isActive=EC;Fe.update=(n,e={})=>{let t=Y6(n,e);if(t){let{props:r,content:a}=t,o={delay:100,...r,...e,toastId:e.toastId||n,updateId:_C()};o.toastId!==n&&(o.staleId=n);let u=o.render||a;delete o.render,qh(u,o)}};Fe.done=n=>{Fe.update(n,{progress:1})};Fe.onChange=J6;Fe.play=n=>bC(!0,n);Fe.pause=n=>bC(!1,n);function r9(n){var e;let{subscribe:t,getSnapshot:r,setProps:a}=R.useRef(Z6(n)).current;a(n);let o=(e=R.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function u(h){if(!o)return[];let f=new Map;return n.newestOnTop&&o.reverse(),o.forEach(p=>{let{position:y}=p.props;f.has(y)||f.set(y,[]),f.get(y).push(p)}),Array.from(f,p=>h(p[0],p[1]))}return{getToastToRender:u,isToastActive:EC,count:o==null?void 0:o.length}}function i9(n){let[e,t]=R.useState(!1),[r,a]=R.useState(!1),o=R.useRef(null),u=R.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:f,closeToast:p,onClick:y,closeOnClick:v}=n;W6({id:n.toastId,containerId:n.containerId,fn:t}),R.useEffect(()=>{if(n.pauseOnFocusLoss)return T(),()=>{S()}},[n.pauseOnFocusLoss]);function T(){document.hasFocus()||F(),window.addEventListener("focus",D),window.addEventListener("blur",F)}function S(){window.removeEventListener("focus",D),window.removeEventListener("blur",F)}function C(O){if(n.draggable===!0||n.draggable===O.pointerType){B();let I=o.current;u.canCloseOnClick=!0,u.canDrag=!0,I.style.transition="none",n.draggableDirection==="x"?(u.start=O.clientX,u.removalDistance=I.offsetWidth*(n.draggablePercent/100)):(u.start=O.clientY,u.removalDistance=I.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function M(O){let{top:I,bottom:N,left:U,right:z}=o.current.getBoundingClientRect();O.nativeEvent.type!=="touchend"&&n.pauseOnHover&&O.clientX>=U&&O.clientX<=z&&O.clientY>=I&&O.clientY<=N?F():D()}function D(){t(!0)}function F(){t(!1)}function B(){u.didMove=!1,document.addEventListener("pointermove",K),document.addEventListener("pointerup",P)}function k(){document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",P)}function K(O){let I=o.current;if(u.canDrag&&I){u.didMove=!0,e&&F(),n.draggableDirection==="x"?u.delta=O.clientX-u.start:u.delta=O.clientY-u.start,u.start!==O.clientX&&(u.canCloseOnClick=!1);let N=n.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`;I.style.transform=`translate3d(${N},0)`,I.style.opacity=`${1-Math.abs(u.delta/u.removalDistance)}`}}function P(){k();let O=o.current;if(u.canDrag&&u.didMove&&O){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance){a(!0),n.closeToast(!0),n.collapseAll();return}O.style.transition="transform 0.2s, opacity 0.2s",O.style.removeProperty("transform"),O.style.removeProperty("opacity")}}let ie={onPointerDown:C,onPointerUp:M};return h&&f&&(ie.onMouseEnter=F,n.stacked||(ie.onMouseLeave=D)),v&&(ie.onClick=O=>{y&&y(O),u.canCloseOnClick&&p(!0)}),{playToast:D,pauseToast:F,isRunning:e,preventExitTransition:r,toastRef:o,eventHandlers:ie}}var s9=typeof window<"u"?R.useLayoutEffect:R.useEffect,lp=({theme:n,type:e,isLoading:t,...r})=>We.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function a9(n){return We.createElement(lp,{...n},We.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function o9(n){return We.createElement(lp,{...n},We.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function l9(n){return We.createElement(lp,{...n},We.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function u9(n){return We.createElement(lp,{...n},We.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function c9(){return We.createElement("div",{className:"Toastify__spinner"})}var j_={info:o9,warning:a9,success:l9,error:u9,spinner:c9},h9=n=>n in j_;function f9({theme:n,type:e,isLoading:t,icon:r}){let a=null,o={theme:n,type:e};return r===!1||(ws(r)?a=r({...o,isLoading:t}):R.isValidElement(r)?a=R.cloneElement(r,o):t?a=j_.spinner():h9(e)&&(a=j_[e](o))),a}var d9=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:a,playToast:o}=i9(n),{closeButton:u,children:h,autoClose:f,onClick:p,type:y,hideProgressBar:v,closeToast:T,transition:S,position:C,className:M,style:D,progressClassName:F,updateId:B,role:k,progress:K,rtl:P,toastId:ie,deleteToast:O,isIn:I,isLoading:N,closeOnClick:U,theme:z,ariaLabel:G}=n,V=xo("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${y}`,{"Toastify__toast--rtl":P},{"Toastify__toast--close-on-click":U}),Tt=ws(M)?M({rtl:P,position:C,type:y,defaultClassName:V}):xo(V,M),je=f9(n),ne=!!K||!f,fe={closeToast:T,type:y,theme:z},ge=null;return u===!1||(ws(u)?ge=u(fe):R.isValidElement(u)?ge=R.cloneElement(u,fe):ge=F6(fe)),We.createElement(S,{isIn:I,done:O,position:C,preventExitTransition:t,nodeRef:r,playToast:o},We.createElement("div",{id:ie,tabIndex:0,onClick:p,"data-in":I,className:Tt,...a,style:D,ref:r,...I&&{role:k,"aria-label":G}},je!=null&&We.createElement("div",{className:xo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},je),yC(h,n,!e),ge,!n.customProgressBar&&We.createElement(q6,{...B&&!ne?{key:`p-${B}`}:{},rtl:P,theme:z,delay:f,isRunning:e,isIn:I,closeToast:T,hide:v,type:y,className:F,controlledProgress:ne,progress:K||0})))},m9=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),p9=z6(m9("bounce",!0)),g9={position:"top-right",transition:p9,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function y9(n){let e={...g9,...n},t=n.stacked,[r,a]=R.useState(!0),o=R.useRef(null),{getToastToRender:u,isToastActive:h,count:f}=r9(e),{className:p,style:y,rtl:v,containerId:T,hotKeys:S}=e;function C(D){let F=xo("Toastify__toast-container",`Toastify__toast-container--${D}`,{"Toastify__toast-container--rtl":v});return ws(p)?p({position:D,rtl:v,defaultClassName:F}):xo(F,V_(p))}function M(){t&&(a(!0),Fe.play())}return s9(()=>{var D;if(t){let F=o.current.querySelectorAll('[data-in="true"]'),B=12,k=(D=e.position)==null?void 0:D.includes("top"),K=0,P=0;Array.from(F).reverse().forEach((ie,O)=>{let I=ie;I.classList.add("Toastify__toast--stacked"),O>0&&(I.dataset.collapsed=`${r}`),I.dataset.pos||(I.dataset.pos=k?"top":"bot");let N=K*(r?.2:1)+(r?0:B*O);I.style.setProperty("--y",`${k?N:N*-1}px`),I.style.setProperty("--g",`${B}`),I.style.setProperty("--s",`${1-(r?P:0)}`),K+=I.offsetHeight,P+=.025})}},[r,f,t]),R.useEffect(()=>{function D(F){var B;let k=o.current;S(F)&&((B=k.querySelector('[tabIndex="0"]'))==null||B.focus(),a(!1),Fe.pause()),F.key==="Escape"&&(document.activeElement===k||k!=null&&k.contains(document.activeElement))&&(a(!0),Fe.play())}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[S]),We.createElement("section",{ref:o,className:"Toastify",id:T,onMouseEnter:()=>{t&&(a(!1),Fe.pause())},onMouseLeave:M,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},u((D,F)=>{let B=F.length?{...y}:{...y,pointerEvents:"none"};return We.createElement("div",{tabIndex:-1,className:C(D),"data-stacked":t,style:B,key:`c-${D}`},F.map(({content:k,props:K})=>We.createElement(d9,{...K,stacked:t,collapseAll:M,isIn:h(K.toastId,K.containerId),key:`t-${K.key}`},k)))}))}const wC=R.createContext(),Fo=()=>R.useContext(wC),_9=({children:n})=>{const[e,t]=R.useState(()=>{const u=localStorage.getItem("bagItems");return u?JSON.parse(u):[]}),r=u=>{t(h=>h.find(p=>p.id===u.id)?h.map(p=>p.id===u.id?{...p,quantity:p.quantity+1}:p):[...h,{...u,quantity:1}])},a=()=>{t([]),localStorage.removeItem("bagItems")},o=u=>{t(h=>h.filter(f=>f.id!==u))};return R.useEffect(()=>{localStorage.setItem("bagItems",JSON.stringify(e))},[e]),w.jsx(wC.Provider,{value:{bagItems:e,setBagItems:t,addToBag:r,removeFromBag:o,clearBag:a},children:n})},SC=({onClose:n,onCheckout:e})=>{const{bagItems:t,setBagItems:r,removeFromBag:a}=Fo(),o=t.reduce((y,v)=>y+v.quantity,0),u=t.reduce((y,v)=>y+v.price*v.quantity,0),h=y=>{const v=t.map(T=>T.id===y?{...T,quantity:T.quantity+1}:T);r(v)},f=y=>{const v=t.map(T=>T.id===y&&T.quantity>1?{...T,quantity:T.quantity-1}:T);r(v)},p=y=>{a(y),Fe.success("Item removed"),console.log("Removing item with ID:",y)};return w.jsx("div",{className:"bag-modal-backdrop",onClick:n,children:w.jsxs("div",{className:"bag-modal-content",onClick:y=>y.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"bag-title",children:[w.jsx("h2",{id:"bag-title",className:"bag-title",children:"Your Bag"}),t.length===0?w.jsx("p",{className:"bag-empty",children:"Your Bag is Empty"}):w.jsxs(w.Fragment,{children:[w.jsx("ul",{className:"bag-items-list",children:t.map(y=>w.jsxs("li",{className:"bag-item",children:[y.name," - $",y.price," * ",y.quantity,w.jsx("div",{className:"bag-item-image",children:w.jsx("img",{src:y.image,alt:y.title,width:60,height:60})}),w.jsxs("div",{className:"bag-item-details",children:[w.jsx("p",{className:"bag-item-title",children:y.title}),w.jsxs("p",{className:"bag-item-price",children:["$",y.price.toFixed(2)]}),w.jsxs("div",{className:"bag-item-quantity",children:["Qty:",w.jsx("button",{className:"qty-btn",onClick:()=>f(y.id),disabled:y.quantity<=1,children:"-"}),y.quantity,w.jsx("button",{className:"qty-btn",onClick:()=>h(y.id),children:"+"})]})]}),w.jsx("div",{className:"bag-item-actions",children:w.jsx("button",{className:"remove-btn",onClick:()=>p(y.id),children:"Remove"})})]},y.id))}),w.jsxs("div",{className:"bag-summary",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Total Items:"}),o]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Total Amount:"}),"$",u]}),w.jsxs("div",{className:"bag-actions",children:[w.jsx("button",{className:"checkout-btn",onClick:e,children:"Checkout"}),w.jsx("button",{className:"close-btn",onClick:n,children:"Close"})]})]})]})]})})};var kc={},wR;function v9(){if(wR)return kc;wR=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.parse=u,kc.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,S){const C=new o,M=T.length;if(M<2)return C;const D=(S==null?void 0:S.decode)||y;let F=0;do{const B=T.indexOf("=",F);if(B===-1)break;const k=T.indexOf(";",F),K=k===-1?M:k;if(B>K){F=T.lastIndexOf(";",B-1)+1;continue}const P=h(T,F,B),ie=f(T,B,P),O=T.slice(P,ie);if(C[O]===void 0){let I=h(T,B+1,K),N=f(T,K,I);const U=D(T.slice(I,N));C[O]=U}F=K+1}while(F<M);return C}function h(T,S,C){do{const M=T.charCodeAt(S);if(M!==32&&M!==9)return S}while(++S<C);return C}function f(T,S,C){for(;S>C;){const M=T.charCodeAt(--S);if(M!==32&&M!==9)return S+1}return C}function p(T,S,C){const M=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const D=M(S);if(!e.test(D))throw new TypeError(`argument val is invalid: ${S}`);let F=T+"="+D;if(!C)return F;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);F+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);F+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);F+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);F+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(F+="; HttpOnly"),C.secure&&(F+="; Secure"),C.partitioned&&(F+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return F}function y(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function v(T){return a.call(T)==="[object Date]"}return kc}v9();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RC=n=>{throw TypeError(n)},E9=(n,e,t)=>e.has(n)||RC("Cannot "+t),Fy=(n,e,t)=>(E9(n,e,"read from private field"),t?t.call(n):e.get(n)),T9=(n,e,t)=>e.has(n)?RC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),SR="popstate";function b9(n={}){function e(r,a){let{pathname:o,search:u,hash:h}=r.location;return bh("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:ba(a)}return S9(e,t,null,n)}function et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w9(){return Math.random().toString(36).substring(2,10)}function RR(n,e){return{usr:n.state,key:n.key,idx:e}}function bh(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?xa(e):e,state:t,key:e&&e.key||r||w9()}}function ba({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function xa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function S9(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,h="POP",f=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let D=y(),F=D==null?null:D-p;p=D,f&&f({action:h,location:M.location,delta:F})}function T(D,F){h="PUSH";let B=bh(M.location,D,F);p=y()+1;let k=RR(B,p),K=M.createHref(B);try{u.pushState(k,"",K)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(K)}o&&f&&f({action:h,location:M.location,delta:1})}function S(D,F){h="REPLACE";let B=bh(M.location,D,F);p=y();let k=RR(B,p),K=M.createHref(B);u.replaceState(k,"",K),o&&f&&f({action:h,location:M.location,delta:0})}function C(D){let F=a.location.origin!=="null"?a.location.origin:a.location.href,B=typeof D=="string"?D:ba(D);return B=B.replace(/ $/,"%20"),et(F,`No window.location.(origin|href) available to create URL for href: ${B}`),new URL(B,F)}let M={get action(){return h},get location(){return n(a,u)},listen(D){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(SR,v),f=D,()=>{a.removeEventListener(SR,v),f=null}},createHref(D){return e(a,D)},createURL:C,encodeLocation(D){let F=C(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:S,go(D){return u.go(D)}};return M}var Yc,AR=class{constructor(n){if(T9(this,Yc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Fy(this,Yc).has(n))return Fy(this,Yc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Fy(this,Yc).set(n,e)}};Yc=new WeakMap;var R9=new Set(["lazy","caseSensitive","path","id","index","children"]);function A9(n){return R9.has(n)}var I9=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function x9(n){return I9.has(n)}function C9(n){return n.index===!0}function Tm(n,e,t=[],r={}){return n.map((a,o)=>{let u=[...t,String(o)],h=typeof a.id=="string"?a.id:u.join("-");if(et(a.index!==!0||!a.children,"Cannot specify children on an index route"),et(!r[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),C9(a)){let f={...a,...e(a),id:h};return r[h]=f,f}else{let f={...a,...e(a),id:h,children:void 0};return r[h]=f,a.children&&(f.children=Tm(a.children,e,u,r)),f}})}function ca(n,e,t="/"){return Ld(n,e,t,!1)}function Ld(n,e,t,r){let a=typeof e=="string"?xa(e):e,o=Kr(a.pathname||"/",t);if(o==null)return null;let u=AC(n);N9(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=F9(o);h=B9(u[f],p,r)}return h}function D9(n,e){let{route:t,pathname:r,params:a}=n;return{id:t.id,pathname:r,params:a,data:e[t.id],handle:t.handle}}function AC(n,e=[],t=[],r=""){let a=(o,u,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(et(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=Li([r,f.relativePath]),y=t.concat(f);o.children&&o.children.length>0&&(et(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),AC(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:U9(p,o.index),routesMeta:y})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let f of IC(o.path))a(o,u,f)}),e}function IC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=IC(r.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),a&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function N9(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:j9(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var O9=/^:[\w-]+$/,P9=3,M9=2,k9=1,V9=10,L9=-2,IR=n=>n==="*";function U9(n,e){let t=n.split("/"),r=t.length;return t.some(IR)&&(r+=L9),e&&(r+=M9),t.filter(a=>!IR(a)).reduce((a,o)=>a+(O9.test(o)?P9:o===""?k9:V9),r)}function j9(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function B9(n,e,t=!1){let{routesMeta:r}=n,a={},o="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=bm({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},y),T=f.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=bm({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Li([o,v.pathname]),pathnameBase:G9(Li([o,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(o=Li([o,v.pathnameBase]))}return u}function bm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=z9(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:v},T)=>{if(y==="*"){let C=h[T]||"";u=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const S=h[T];return v&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function z9(n,e=!1,t=!0){Jt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function F9(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Kr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function q9(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?xa(n):n;return{pathname:t?t.startsWith("/")?t:H9(t,e):e,search:$9(r),hash:K9(a)}}function H9(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function qy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function up(n){let e=xC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function cp(n,e,t,r=!1){let a;typeof n=="string"?a=xa(n):(a={...n},et(!a.pathname||!a.pathname.includes("?"),qy("?","pathname","search",a)),et(!a.pathname||!a.pathname.includes("#"),qy("#","pathname","hash",a)),et(!a.search||!a.search.includes("#"),qy("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),v-=1;a.pathname=T.join("/")}h=v>=0?e[v]:"/"}let f=q9(a,h),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||y)&&(f.pathname+="/"),f}var Li=n=>n.join("/").replace(/\/\/+/g,"/"),G9=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$9=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,K9=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,wm=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function wh(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var CC=["POST","PUT","PATCH","DELETE"],Y9=new Set(CC),Q9=["GET",...CC],X9=new Set(Q9),W9=new Set([301,302,303,307,308]),Z9=new Set([307,308]),Hy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},J9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},v0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eB=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),DC="remix-router-transitions",NC=Symbol("ResetLoaderData");function tB(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";et(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||eB,a={},o=Tm(n.routes,r,void 0,a),u,h=n.basename||"/",f=n.dataStrategy||oB,p={unstable_middleware:!1,...n.future},y=null,v=new Set,T=null,S=null,C=null,M=n.hydrationData!=null,D=ca(o,n.history.location,h),F=!1,B=null;if(D==null&&!n.patchRoutesOnNavigation){let q=zr(404,{pathname:n.history.location.pathname}),{matches:Y,route:te}=zR(o);D=Y,B={[te.id]:q}}D&&!n.hydrationData&&pi(D,o,n.history.location.pathname).active&&(D=null);let k;if(D)if(D.some(q=>q.route.lazy))k=!1;else if(!D.some(q=>q.route.loader))k=!0;else{let q=n.hydrationData?n.hydrationData.loaderData:null,Y=n.hydrationData?n.hydrationData.errors:null;if(Y){let te=D.findIndex(le=>Y[le.route.id]!==void 0);k=D.slice(0,te+1).every(le=>!z_(le.route,q,Y))}else k=D.every(te=>!z_(te.route,q,Y))}else{k=!1,D=[];let q=pi(null,o,n.history.location.pathname);q.active&&q.matches&&(F=!0,D=q.matches)}let K,P={historyAction:n.history.action,location:n.history.location,matches:D,initialized:k,navigation:Hy,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||B,fetchers:new Map,blockers:new Map},ie="POP",O=!1,I,N=!1,U=new Map,z=null,G=!1,V=!1,Tt=new Set,je=new Map,ne=0,fe=-1,ge=new Map,qe=new Set,j=new Map,oe=new Map,de=new Set,he=new Map,be,Me=null;function ke(){if(y=n.history.listen(({action:q,location:Y,delta:te})=>{if(be){be(),be=void 0;return}Jt(he.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let le=mi({currentLocation:P.location,nextLocation:Y,historyAction:q});if(le&&te!=null){let pe=new Promise(Te=>{be=Te});n.history.go(te*-1),Zr(le,{state:"blocked",location:Y,proceed(){Zr(le,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),pe.then(()=>n.history.go(te))},reset(){let Te=new Map(P.blockers);Te.set(le,Vc),ft({blockers:Te})}});return}return Qt(q,Y)}),t){vB(e,U);let q=()=>EB(e,U);e.addEventListener("pagehide",q),z=()=>e.removeEventListener("pagehide",q)}return P.initialized||Qt("POP",P.location,{initialHydration:!0}),K}function kt(){y&&y(),z&&z(),v.clear(),I&&I.abort(),P.fetchers.forEach((q,Y)=>tn(Y)),P.blockers.forEach((q,Y)=>Zn(Y))}function ht(q){return v.add(q),()=>v.delete(q)}function ft(q,Y={}){P={...P,...q};let te=[],le=[];P.fetchers.forEach((pe,Te)=>{pe.state==="idle"&&(de.has(Te)?te.push(Te):le.push(Te))}),de.forEach(pe=>{!P.fetchers.has(pe)&&!je.has(pe)&&te.push(pe)}),[...v].forEach(pe=>pe(P,{deletedFetchers:te,viewTransitionOpts:Y.viewTransitionOpts,flushSync:Y.flushSync===!0})),te.forEach(pe=>tn(pe)),le.forEach(pe=>P.fetchers.delete(pe))}function Ft(q,Y,{flushSync:te}={}){var ve,xe;let le=P.actionData!=null&&P.navigation.formMethod!=null&&si(P.navigation.formMethod)&&P.navigation.state==="loading"&&((ve=q.state)==null?void 0:ve._isRedirect)!==!0,pe;Y.actionData?Object.keys(Y.actionData).length>0?pe=Y.actionData:pe=null:le?pe=P.actionData:pe=null;let Te=Y.loaderData?jR(P.loaderData,Y.loaderData,Y.matches||[],Y.errors):P.loaderData,Ae=P.blockers;Ae.size>0&&(Ae=new Map(Ae),Ae.forEach((Oe,Ge)=>Ae.set(Ge,Vc)));let Ie=O===!0||P.navigation.formMethod!=null&&si(P.navigation.formMethod)&&((xe=q.state)==null?void 0:xe._isRedirect)!==!0;u&&(o=u,u=void 0),G||ie==="POP"||(ie==="PUSH"?n.history.push(q,q.state):ie==="REPLACE"&&n.history.replace(q,q.state));let Ce;if(ie==="POP"){let Oe=U.get(P.location.pathname);Oe&&Oe.has(q.pathname)?Ce={currentLocation:P.location,nextLocation:q}:U.has(q.pathname)&&(Ce={currentLocation:q,nextLocation:P.location})}else if(N){let Oe=U.get(P.location.pathname);Oe?Oe.add(q.pathname):(Oe=new Set([q.pathname]),U.set(P.location.pathname,Oe)),Ce={currentLocation:P.location,nextLocation:q}}ft({...Y,actionData:pe,loaderData:Te,historyAction:ie,location:q,initialized:!0,navigation:Hy,revalidation:"idle",restoreScrollPosition:Ar(q,Y.matches||P.matches),preventScrollReset:Ie,blockers:Ae},{viewTransitionOpts:Ce,flushSync:te===!0}),ie="POP",O=!1,N=!1,G=!1,V=!1,Me==null||Me.resolve(),Me=null}async function Sn(q,Y){if(typeof q=="number"){n.history.go(q);return}let te=B_(P.location,P.matches,h,q,Y==null?void 0:Y.fromRouteId,Y==null?void 0:Y.relative),{path:le,submission:pe,error:Te}=xR(!1,te,Y),Ae=P.location,Ie=bh(P.location,le,Y&&Y.state);Ie={...Ie,...n.history.encodeLocation(Ie)};let Ce=Y&&Y.replace!=null?Y.replace:void 0,ve="PUSH";Ce===!0?ve="REPLACE":Ce===!1||pe!=null&&si(pe.formMethod)&&pe.formAction===P.location.pathname+P.location.search&&(ve="REPLACE");let xe=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,Oe=(Y&&Y.flushSync)===!0,Ge=mi({currentLocation:Ae,nextLocation:Ie,historyAction:ve});if(Ge){Zr(Ge,{state:"blocked",location:Ie,proceed(){Zr(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Sn(q,Y)},reset(){let mt=new Map(P.blockers);mt.set(Ge,Vc),ft({blockers:mt})}});return}await Qt(ve,Ie,{submission:pe,pendingError:Te,preventScrollReset:xe,replace:Y&&Y.replace,enableViewTransition:Y&&Y.viewTransition,flushSync:Oe})}function Nn(){Me||(Me=TB()),Rr(),ft({revalidation:"loading"});let q=Me.promise;return P.navigation.state==="submitting"?q:P.navigation.state==="idle"?(Qt(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),q):(Qt(ie||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:N===!0}),q)}async function Qt(q,Y,te){I&&I.abort(),I=null,ie=q,G=(te&&te.startUninterruptedRevalidation)===!0,Jr(P.location,P.matches),O=(te&&te.preventScrollReset)===!0,N=(te&&te.enableViewTransition)===!0;let le=u||o,pe=te&&te.overrideNavigation,Te=te!=null&&te.initialHydration&&P.matches&&P.matches.length>0&&!F?P.matches:ca(le,Y,h),Ae=(te&&te.flushSync)===!0;if(Te&&P.initialized&&!V&&mB(P.location,Y)&&!(te&&te.submission&&si(te.submission.formMethod))){Ft(Y,{matches:Te},{flushSync:Ae});return}let Ie=pi(Te,le,Y.pathname);if(Ie.active&&Ie.matches&&(Te=Ie.matches),!Te){let{error:gt,notFoundMatches:Ze,route:$e}=Fi(Y.pathname);Ft(Y,{matches:Ze,loaderData:{},errors:{[$e.id]:gt}},{flushSync:Ae});return}I=new AbortController;let Ce=Hl(n.history,Y,I.signal,te&&te.submission),ve=new AR(n.unstable_getContext?await n.unstable_getContext():void 0),xe;if(te&&te.pendingError)xe=[yo(Te).route.id,{type:"error",error:te.pendingError}];else if(te&&te.submission&&si(te.submission.formMethod)){let gt=await On(Ce,Y,te.submission,Te,ve,Ie.active,{replace:te.replace,flushSync:Ae});if(gt.shortCircuited)return;if(gt.pendingActionResult){let[Ze,$e]=gt.pendingActionResult;if(_r($e)&&wh($e.error)&&$e.error.status===404){I=null,Ft(Y,{matches:gt.matches,loaderData:{},errors:{[Ze]:$e.error}});return}}Te=gt.matches||Te,xe=gt.pendingActionResult,pe=Gy(Y,te.submission),Ae=!1,Ie.active=!1,Ce=Hl(n.history,Ce.url,Ce.signal)}let{shortCircuited:Oe,matches:Ge,loaderData:mt,errors:Dt}=await dt(Ce,Y,Te,ve,Ie.active,pe,te&&te.submission,te&&te.fetcherSubmission,te&&te.replace,te&&te.initialHydration===!0,Ae,xe);Oe||(I=null,Ft(Y,{matches:Ge||Te,...BR(xe),loaderData:mt,errors:Dt}))}async function On(q,Y,te,le,pe,Te,Ae={}){Rr();let Ie=yB(Y,te);if(ft({navigation:Ie},{flushSync:Ae.flushSync===!0}),Te){let xe=await Fn(le,Y.pathname,q.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let Oe=yo(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[Oe,{type:"error",error:xe.error}]}}else if(xe.matches)le=xe.matches;else{let{notFoundMatches:Oe,error:Ge,route:mt}=Fi(Y.pathname);return{matches:Oe,pendingActionResult:[mt.id,{type:"error",error:Ge}]}}}let Ce,ve=Qc(le,Y);if(!ve.route.action&&!ve.route.lazy)Ce={type:"error",error:zr(405,{method:q.method,pathname:Y.pathname,routeId:ve.route.id})};else{let xe=await Xr("action",q,[ve],le,pe,null);if(Ce=xe[ve.route.id],!Ce){for(let Oe of le)if(xe[Oe.route.id]){Ce=xe[Oe.route.id];break}}if(q.signal.aborted)return{shortCircuited:!0}}if(To(Ce)){let xe;return Ae&&Ae.replace!=null?xe=Ae.replace:xe=VR(Ce.response.headers.get("Location"),new URL(q.url),h)===P.location.pathname+P.location.search,await Rn(q,Ce,!0,{submission:te,replace:xe}),{shortCircuited:!0}}if(_r(Ce)){let xe=yo(le,ve.route.id);return(Ae&&Ae.replace)!==!0&&(ie="PUSH"),{matches:le,pendingActionResult:[xe.route.id,Ce]}}return{matches:le,pendingActionResult:[ve.route.id,Ce]}}async function dt(q,Y,te,le,pe,Te,Ae,Ie,Ce,ve,xe,Oe){let Ge=Te||Gy(Y,Ae),mt=Ae||Ie||qR(Ge),Dt=!G&&!ve;if(pe){if(Dt){let at=Sr(Oe);ft({navigation:Ge,...at!==void 0?{actionData:at}:{}},{flushSync:xe})}let tt=await Fn(te,Y.pathname,q.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){let at=yo(tt.partialMatches).route.id;return{matches:tt.partialMatches,loaderData:{},errors:{[at]:tt.error}}}else if(tt.matches)te=tt.matches;else{let{error:at,notFoundMatches:Cr,route:_i}=Fi(Y.pathname);return{matches:Cr,loaderData:{},errors:{[_i.id]:at}}}}let gt=u||o,[Ze,$e]=DR(n.history,P,te,mt,Y,ve===!0,V,Tt,de,j,qe,gt,h,Oe);if(fe=++ne,Ze.length===0&&$e.length===0){let tt=fi();return Ft(Y,{matches:te,loaderData:{},errors:Oe&&_r(Oe[1])?{[Oe[0]]:Oe[1].error}:null,...BR(Oe),...tt?{fetchers:new Map(P.fetchers)}:{}},{flushSync:xe}),{shortCircuited:!0}}if(Dt){let tt={};if(!pe){tt.navigation=Ge;let at=Sr(Oe);at!==void 0&&(tt.actionData=at)}$e.length>0&&(tt.fetchers=en($e)),ft(tt,{flushSync:xe})}$e.forEach(tt=>{ar(tt.key),tt.controller&&je.set(tt.key,tt.controller)});let Ir=()=>$e.forEach(tt=>ar(tt.key));I&&I.signal.addEventListener("abort",Ir);let{loaderResults:xr,fetcherResults:Xt}=await Wr(te,Ze,$e,q,le);if(q.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Ir),$e.forEach(tt=>je.delete(tt.key));let nn=Ed(xr);if(nn)return await Rn(q,nn.result,!0,{replace:Ce}),{shortCircuited:!0};if(nn=Ed(Xt),nn)return qe.add(nn.key),await Rn(q,nn.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Cs,errors:yi}=UR(P,te,xr,Oe,$e,Xt);ve&&P.errors&&(yi={...P.errors,...yi});let qn=fi(),qi=di(fe),or=qn||qi||$e.length>0;return{matches:te,loaderData:Cs,errors:yi,...or?{fetchers:new Map(P.fetchers)}:{}}}function Sr(q){if(q&&!_r(q[1]))return{[q[0]]:q[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function en(q){return q.forEach(Y=>{let te=P.fetchers.get(Y.key),le=Lc(void 0,te?te.data:void 0);P.fetchers.set(Y.key,le)}),new Map(P.fetchers)}async function Ca(q,Y,te,le){ar(q);let pe=(le&&le.flushSync)===!0,Te=u||o,Ae=B_(P.location,P.matches,h,te,Y,le==null?void 0:le.relative),Ie=ca(Te,Ae,h),Ce=pi(Ie,Te,Ae);if(Ce.active&&Ce.matches&&(Ie=Ce.matches),!Ie){Se(q,Y,zr(404,{pathname:Ae}),{flushSync:pe});return}let{path:ve,submission:xe,error:Oe}=xR(!0,Ae,le);if(Oe){Se(q,Y,Oe,{flushSync:pe});return}let Ge=Qc(Ie,ve),mt=new AR(n.unstable_getContext?await n.unstable_getContext():void 0),Dt=(le&&le.preventScrollReset)===!0;if(xe&&si(xe.formMethod)){await Bi(q,Y,ve,Ge,Ie,mt,Ce.active,pe,Dt,xe);return}j.set(q,{routeId:Y,path:ve}),await hi(q,Y,ve,Ge,Ie,mt,Ce.active,pe,Dt,xe)}async function Bi(q,Y,te,le,pe,Te,Ae,Ie,Ce,ve){Rr(),j.delete(q);function xe(_t){if(!_t.route.action&&!_t.route.lazy){let lr=zr(405,{method:ve.formMethod,pathname:te,routeId:Y});return Se(q,Y,lr,{flushSync:Ie}),!0}return!1}if(!Ae&&xe(le))return;let Oe=P.fetchers.get(q);zn(q,_B(ve,Oe),{flushSync:Ie});let Ge=new AbortController,mt=Hl(n.history,te,Ge.signal,ve);if(Ae){let _t=await Fn(pe,te,mt.signal,q);if(_t.type==="aborted")return;if(_t.type==="error"){Se(q,Y,_t.error,{flushSync:Ie});return}else if(_t.matches){if(pe=_t.matches,le=Qc(pe,te),xe(le))return}else{Se(q,Y,zr(404,{pathname:te}),{flushSync:Ie});return}}je.set(q,Ge);let Dt=ne,Ze=(await Xr("action",mt,[le],pe,Te,q))[le.route.id];if(mt.signal.aborted){je.get(q)===Ge&&je.delete(q);return}if(de.has(q)){if(To(Ze)||_r(Ze)){zn(q,ra(void 0));return}}else{if(To(Ze))if(je.delete(q),fe>Dt){zn(q,ra(void 0));return}else return qe.add(q),zn(q,Lc(ve)),Rn(mt,Ze,!1,{fetcherSubmission:ve,preventScrollReset:Ce});if(_r(Ze)){Se(q,Y,Ze.error);return}}let $e=P.navigation.location||P.location,Ir=Hl(n.history,$e,Ge.signal),xr=u||o,Xt=P.navigation.state!=="idle"?ca(xr,P.navigation.location,h):P.matches;et(Xt,"Didn't find any matches after fetcher action");let nn=++ne;ge.set(q,nn);let Cs=Lc(ve,Ze.data);P.fetchers.set(q,Cs);let[yi,qn]=DR(n.history,P,Xt,ve,$e,!1,V,Tt,de,j,qe,xr,h,[le.route.id,Ze]);qn.filter(_t=>_t.key!==q).forEach(_t=>{let lr=_t.key,Hi=P.fetchers.get(lr),Oa=Lc(void 0,Hi?Hi.data:void 0);P.fetchers.set(lr,Oa),ar(lr),_t.controller&&je.set(lr,_t.controller)}),ft({fetchers:new Map(P.fetchers)});let qi=()=>qn.forEach(_t=>ar(_t.key));Ge.signal.addEventListener("abort",qi);let{loaderResults:or,fetcherResults:tt}=await Wr(Xt,yi,qn,Ir,Te);if(Ge.signal.aborted)return;Ge.signal.removeEventListener("abort",qi),ge.delete(q),je.delete(q),qn.forEach(_t=>je.delete(_t.key));let at=Ed(or);if(at)return Rn(Ir,at.result,!1,{preventScrollReset:Ce});if(at=Ed(tt),at)return qe.add(at.key),Rn(Ir,at.result,!1,{preventScrollReset:Ce});let{loaderData:Cr,errors:_i}=UR(P,Xt,or,void 0,qn,tt);if(P.fetchers.has(q)){let _t=ra(Ze.data);P.fetchers.set(q,_t)}di(nn),P.navigation.state==="loading"&&nn>fe?(et(ie,"Expected pending action"),I&&I.abort(),Ft(P.navigation.location,{matches:Xt,loaderData:Cr,errors:_i,fetchers:new Map(P.fetchers)})):(ft({errors:_i,loaderData:jR(P.loaderData,Cr,Xt,_i),fetchers:new Map(P.fetchers)}),V=!1)}async function hi(q,Y,te,le,pe,Te,Ae,Ie,Ce,ve){let xe=P.fetchers.get(q);zn(q,Lc(ve,xe?xe.data:void 0),{flushSync:Ie});let Oe=new AbortController,Ge=Hl(n.history,te,Oe.signal);if(Ae){let Ze=await Fn(pe,te,Ge.signal,q);if(Ze.type==="aborted")return;if(Ze.type==="error"){Se(q,Y,Ze.error,{flushSync:Ie});return}else if(Ze.matches)pe=Ze.matches,le=Qc(pe,te);else{Se(q,Y,zr(404,{pathname:te}),{flushSync:Ie});return}}je.set(q,Oe);let mt=ne,gt=(await Xr("loader",Ge,[le],pe,Te,q))[le.route.id];if(je.get(q)===Oe&&je.delete(q),!Ge.signal.aborted){if(de.has(q)){zn(q,ra(void 0));return}if(To(gt))if(fe>mt){zn(q,ra(void 0));return}else{qe.add(q),await Rn(Ge,gt,!1,{preventScrollReset:Ce});return}if(_r(gt)){Se(q,Y,gt.error);return}zn(q,ra(gt.data))}}async function Rn(q,Y,te,{submission:le,fetcherSubmission:pe,preventScrollReset:Te,replace:Ae}={}){Y.response.headers.has("X-Remix-Revalidate")&&(V=!0);let Ie=Y.response.headers.get("Location");et(Ie,"Expected a Location header on the redirect Response"),Ie=VR(Ie,new URL(q.url),h);let Ce=bh(P.location,Ie,{_isRedirect:!0});if(t){let Dt=!1;if(Y.response.headers.has("X-Remix-Reload-Document"))Dt=!0;else if(v0.test(Ie)){const gt=n.history.createURL(Ie);Dt=gt.origin!==e.location.origin||Kr(gt.pathname,h)==null}if(Dt){Ae?e.location.replace(Ie):e.location.assign(Ie);return}}I=null;let ve=Ae===!0||Y.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:xe,formAction:Oe,formEncType:Ge}=P.navigation;!le&&!pe&&xe&&Oe&&Ge&&(le=qR(P.navigation));let mt=le||pe;if(Z9.has(Y.response.status)&&mt&&si(mt.formMethod))await Qt(ve,Ce,{submission:{...mt,formAction:Ie},preventScrollReset:Te||O,enableViewTransition:te?N:void 0});else{let Dt=Gy(Ce,le);await Qt(ve,Ce,{overrideNavigation:Dt,fetcherSubmission:pe,preventScrollReset:Te||O,enableViewTransition:te?N:void 0})}}async function Xr(q,Y,te,le,pe,Te){let Ae,Ie={};try{Ae=await uB(f,q,Y,te,le,Te,a,r,pe)}catch(Ce){return te.forEach(ve=>{Ie[ve.route.id]={type:"error",error:Ce}}),Ie}for(let[Ce,ve]of Object.entries(Ae))if(pB(ve)){let xe=ve.result;Ie[Ce]={type:"redirect",response:fB(xe,Y,Ce,le,h)}}else Ie[Ce]=await hB(ve);return Ie}async function Wr(q,Y,te,le,pe){let Te=Xr("loader",le,Y,q,pe,null),Ae=Promise.all(te.map(async ve=>{if(ve.matches&&ve.match&&ve.controller){let Oe=(await Xr("loader",Hl(n.history,ve.path,ve.controller.signal),[ve.match],ve.matches,pe,ve.key))[ve.match.route.id];return{[ve.key]:Oe}}else return Promise.resolve({[ve.key]:{type:"error",error:zr(404,{pathname:ve.path})}})})),Ie=await Te,Ce=(await Ae).reduce((ve,xe)=>Object.assign(ve,xe),{});return{loaderResults:Ie,fetcherResults:Ce}}function Rr(){V=!0,j.forEach((q,Y)=>{je.has(Y)&&Tt.add(Y),ar(Y)})}function zn(q,Y,te={}){P.fetchers.set(q,Y),ft({fetchers:new Map(P.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Se(q,Y,te,le={}){let pe=yo(P.matches,Y);tn(q),ft({errors:{[pe.route.id]:te},fetchers:new Map(P.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Ye(q){return oe.set(q,(oe.get(q)||0)+1),de.has(q)&&de.delete(q),P.fetchers.get(q)||J9}function tn(q){let Y=P.fetchers.get(q);je.has(q)&&!(Y&&Y.state==="loading"&&ge.has(q))&&ar(q),j.delete(q),ge.delete(q),qe.delete(q),de.delete(q),Tt.delete(q),P.fetchers.delete(q)}function gn(q){let Y=(oe.get(q)||0)-1;Y<=0?(oe.delete(q),de.add(q)):oe.set(q,Y),ft({fetchers:new Map(P.fetchers)})}function ar(q){let Y=je.get(q);Y&&(Y.abort(),je.delete(q))}function Qo(q){for(let Y of q){let te=Ye(Y),le=ra(te.data);P.fetchers.set(Y,le)}}function fi(){let q=[],Y=!1;for(let te of qe){let le=P.fetchers.get(te);et(le,`Expected fetcher: ${te}`),le.state==="loading"&&(qe.delete(te),q.push(te),Y=!0)}return Qo(q),Y}function di(q){let Y=[];for(let[te,le]of ge)if(le<q){let pe=P.fetchers.get(te);et(pe,`Expected fetcher: ${te}`),pe.state==="loading"&&(ar(te),ge.delete(te),Y.push(te))}return Qo(Y),Y.length>0}function zi(q,Y){let te=P.blockers.get(q)||Vc;return he.get(q)!==Y&&he.set(q,Y),te}function Zn(q){P.blockers.delete(q),he.delete(q)}function Zr(q,Y){let te=P.blockers.get(q)||Vc;et(te.state==="unblocked"&&Y.state==="blocked"||te.state==="blocked"&&Y.state==="blocked"||te.state==="blocked"&&Y.state==="proceeding"||te.state==="blocked"&&Y.state==="unblocked"||te.state==="proceeding"&&Y.state==="unblocked",`Invalid blocker state transition: ${te.state} -> ${Y.state}`);let le=new Map(P.blockers);le.set(q,Y),ft({blockers:le})}function mi({currentLocation:q,nextLocation:Y,historyAction:te}){if(he.size===0)return;he.size>1&&Jt(!1,"A router only supports one blocker at a time");let le=Array.from(he.entries()),[pe,Te]=le[le.length-1],Ae=P.blockers.get(pe);if(!(Ae&&Ae.state==="proceeding")&&Te({currentLocation:q,nextLocation:Y,historyAction:te}))return pe}function Fi(q){let Y=zr(404,{pathname:q}),te=u||o,{matches:le,route:pe}=zR(te);return{notFoundMatches:le,route:pe,error:Y}}function Da(q,Y,te){if(T=q,C=Y,S=te||null,!M&&P.navigation===Hy){M=!0;let le=Ar(P.location,P.matches);le!=null&&ft({restoreScrollPosition:le})}return()=>{T=null,C=null,S=null}}function xs(q,Y){return S&&S(q,Y.map(le=>D9(le,P.loaderData)))||q.key}function Jr(q,Y){if(T&&C){let te=xs(q,Y);T[te]=C()}}function Ar(q,Y){if(T){let te=xs(q,Y),le=T[te];if(typeof le=="number")return le}return null}function pi(q,Y,te){if(n.patchRoutesOnNavigation)if(q){if(Object.keys(q[0].params).length>0)return{active:!0,matches:Ld(Y,te,h,!0)}}else return{active:!0,matches:Ld(Y,te,h,!0)||[]};return{active:!1,matches:null}}async function Fn(q,Y,te,le){if(!n.patchRoutesOnNavigation)return{type:"success",matches:q};let pe=q;for(;;){let Te=u==null,Ae=u||o,Ie=a;try{await n.patchRoutesOnNavigation({signal:te,path:Y,matches:pe,fetcherKey:le,patch:(xe,Oe)=>{te.aborted||OR(xe,Oe,Ae,Ie,r)}})}catch(xe){return{type:"error",error:xe,partialMatches:pe}}finally{Te&&!te.aborted&&(o=[...o])}if(te.aborted)return{type:"aborted"};let Ce=ca(Ae,Y,h);if(Ce)return{type:"success",matches:Ce};let ve=Ld(Ae,Y,h,!0);if(!ve||pe.length===ve.length&&pe.every((xe,Oe)=>xe.route.id===ve[Oe].route.id))return{type:"success",matches:null};pe=ve}}function Na(q){a={},u=Tm(q,r,void 0,a)}function gi(q,Y){let te=u==null;OR(q,Y,u||o,a,r),te&&(o=[...o],ft({}))}return K={get basename(){return h},get future(){return p},get state(){return P},get routes(){return o},get window(){return e},initialize:ke,subscribe:ht,enableScrollRestoration:Da,navigate:Sn,fetch:Ca,revalidate:Nn,createHref:q=>n.history.createHref(q),encodeLocation:q=>n.history.encodeLocation(q),getFetcher:Ye,deleteFetcher:gn,dispose:kt,getBlocker:zi,deleteBlocker:Zn,patchRoutes:gi,_internalFetchControllers:je,_internalSetRoutes:Na},K}function nB(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function B_(n,e,t,r,a,o){let u,h;if(a){u=[];for(let p of e)if(u.push(p),p.route.id===a){h=p;break}}else u=e,h=e[e.length-1];let f=cp(r||".",up(u),Kr(n.pathname,t)||n.pathname,o==="path");if(r==null&&(f.search=n.search,f.hash=n.hash),(r==null||r===""||r===".")&&h){let p=E0(f.search);if(h.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let y=new URLSearchParams(f.search),v=y.getAll("index");y.delete("index"),v.filter(S=>S).forEach(S=>y.append("index",S));let T=y.toString();f.search=T?`?${T}`:""}}return t!=="/"&&(f.pathname=f.pathname==="/"?t:Li([t,f.pathname])),ba(f)}function xR(n,e,t){if(!t||!nB(t))return{path:e};if(t.formMethod&&!gB(t.formMethod))return{path:e,error:zr(405,{method:t.formMethod})};let r=()=>({path:e,error:zr(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),u=VC(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!si(o))return r();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((T,[S,C])=>`${T}${S}=${C}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!si(o))return r();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}et(typeof FormData=="function","FormData is not available in this environment");let h,f;if(t.formData)h=F_(t.formData),f=t.formData;else if(t.body instanceof FormData)h=F_(t.body),f=t.body;else if(t.body instanceof URLSearchParams)h=t.body,f=LR(h);else if(t.body==null)h=new URLSearchParams,f=new FormData;else try{h=new URLSearchParams(t.body),f=LR(h)}catch{return r()}let p={formMethod:o,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(si(p.formMethod))return{path:e,submission:p};let y=xa(e);return n&&y.search&&E0(y.search)&&h.append("index",""),y.search=`?${h}`,{path:ba(y),submission:p}}function CR(n,e,t=!1){let r=n.findIndex(a=>a.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function DR(n,e,t,r,a,o,u,h,f,p,y,v,T,S){let C=S?_r(S[1])?S[1].error:S[1].data:void 0,M=n.createURL(e.location),D=n.createURL(a),F=t;o&&e.errors?F=CR(t,Object.keys(e.errors)[0],!0):S&&_r(S[1])&&(F=CR(t,S[0]));let B=S?S[1].statusCode:void 0,k=B&&B>=400,K=F.filter((ie,O)=>{let{route:I}=ie;if(I.lazy)return!0;if(I.loader==null)return!1;if(o)return z_(I,e.loaderData,e.errors);if(rB(e.loaderData,e.matches[O],ie))return!0;let N=e.matches[O],U=ie;return NR(ie,{currentUrl:M,currentParams:N.params,nextUrl:D,nextParams:U.params,...r,actionResult:C,actionStatus:B,defaultShouldRevalidate:k?!1:u||M.pathname+M.search===D.pathname+D.search||M.search!==D.search||iB(N,U)})}),P=[];return p.forEach((ie,O)=>{if(o||!t.some(G=>G.route.id===ie.routeId)||f.has(O))return;let I=ca(v,ie.path,T);if(!I){P.push({key:O,routeId:ie.routeId,path:ie.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(O),U=Qc(I,ie.path),z=!1;y.has(O)?z=!1:h.has(O)?(h.delete(O),z=!0):N&&N.state!=="idle"&&N.data===void 0?z=u:z=NR(U,{currentUrl:M,currentParams:e.matches[e.matches.length-1].params,nextUrl:D,nextParams:t[t.length-1].params,...r,actionResult:C,actionStatus:B,defaultShouldRevalidate:k?!1:u}),z&&P.push({key:O,routeId:ie.routeId,path:ie.path,matches:I,match:U,controller:new AbortController})}),[K,P]}function z_(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,a=t!=null&&t[n.id]!==void 0;return!r&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!a}function rB(n,e,t){let r=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return r||a}function iB(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function NR(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function OR(n,e,t,r,a){let o;if(n){let f=r[n];et(f,`No route found to patch children into: routeId = ${n}`),f.children||(f.children=[]),o=f.children}else o=t;let u=e.filter(f=>!o.some(p=>OC(f,p))),h=Tm(u,a,[n||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...h)}function OC(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var a;return(a=e.children)==null?void 0:a.some(o=>OC(t,o))}):!1}var PR=new WeakMap,PC=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let a=t[e.id];if(et(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let o=a.lazy[n];if(!o)return;let u=PR.get(a);u||(u={},PR.set(a,u));let h=u[n];if(h)return h;let f=(async()=>{let p=A9(n),v=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)Jt(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),u[n]=Promise.resolve();else if(v)Jt(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let T=await o();T!=null&&(Object.assign(a,{[n]:T}),Object.assign(a,r(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(T=>T===void 0)&&(a.lazy=void 0))})();return u[n]=f,f},MR=new WeakMap;function sB(n,e,t,r){let a=t[n.id];if(et(a,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=MR.get(a);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let y=(async()=>{et(typeof n.lazy=="function","No lazy route function found");let v=await n.lazy(),T={};for(let S in v){let C=v[S];if(C===void 0)continue;let M=x9(S),F=a[S]!==void 0&&S!=="hasErrorBoundary";M?Jt(!M,"Route property "+S+" is not a supported property to be returned from a lazy route function. This property will be ignored."):F?Jt(!F,`Route "${a.id}" has a static property "${S}" defined but its lazy function is also returning a value for this property. The lazy route property "${S}" will be ignored.`):T[S]=C}Object.assign(a,T),Object.assign(a,{...r(a),lazy:void 0})})();return MR.set(a,y),{lazyRoutePromise:y,lazyHandlerPromise:y}}let o=Object.keys(n.lazy),u=[],h;for(let p of o){let y=PC({key:p,route:n,manifest:t,mapRouteProperties:r});y&&(u.push(y),p===e&&(h=y))}return{lazyRoutePromise:Promise.all(u).then(()=>{}),lazyHandlerPromise:h}}function MC(n){return n!==void 0}function aB(n,e,t){let r=n.map(({route:a})=>{if(!(typeof a.lazy!="object"||!a.lazy.unstable_middleware))return PC({key:"unstable_middleware",route:a,manifest:e,mapRouteProperties:t})}).filter(MC);return r.length>0?Promise.all(r):void 0}async function kR(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,o)=>{t[e[o].route.id]=a}),t}async function oB(n){return n.matches.some(e=>e.route.unstable_middleware)?lB(n,!1,()=>kR(n),(e,t)=>({[t]:{type:"error",result:e}})):kR(n)}async function lB(n,e,t,r){let{matches:a,request:o,params:u,context:h}=n,f={handlerResult:void 0};try{let p=a.flatMap(v=>v.route.unstable_middleware?v.route.unstable_middleware.map(T=>[v.route.id,T]):[]),y=await kC({request:o,params:u,context:h},p,e,f,t);return e?y:f.handlerResult}catch(p){if(!f.middlewareError)throw p;let y=await r(f.middlewareError.error,f.middlewareError.routeId);return f.handlerResult?Object.assign(f.handlerResult,y):y}}async function kC(n,e,t,r,a,o=0){let{request:u}=n;if(u.signal.aborted)throw u.signal.reason?u.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${u.method} ${u.url}`);let h=e[o];if(!h)return r.handlerResult=await a(),r.handlerResult;let[f,p]=h,y=!1,v,T=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");y=!0,await kC(n,e,t,r,a,o+1)};try{let S=await p({request:n.request,params:n.params,context:n.context},T);return y?S===void 0?v:S:T()}catch(S){throw r.middlewareError?r.middlewareError.error!==S&&(r.middlewareError={routeId:f,error:S}):r.middlewareError={routeId:f,error:S},S}}async function uB(n,e,t,r,a,o,u,h,f){let p=aB(a,u,h),y=a.map(C=>sB(C.route,e,u,h));p&&await p;let v=a.map((C,M)=>{let{lazyRoutePromise:D,lazyHandlerPromise:F}=y[M],B=r.some(K=>K.route.id===C.route.id);return{...C,shouldLoad:B,resolve:async K=>(K&&t.method==="GET"&&(C.route.lazy||C.route.loader)&&(B=!0),B?cB({type:e,request:t,match:C,lazyHandlerPromise:F,lazyRoutePromise:D,handlerOverride:K,scopedContext:f}):Promise.resolve({type:"data",result:void 0}))}}),T=await n({matches:v,request:t,params:a[0].params,fetcherKey:o,context:f}),S=y.flatMap(C=>Object.values(C).filter(MC));try{await Promise.all(S)}catch{}return T}async function cB({type:n,request:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:a,handlerOverride:o,scopedContext:u}){let h,f,p=y=>{let v,T=new Promise((M,D)=>v=D);f=()=>v(),e.signal.addEventListener("abort",f);let S=M=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):y({request:e,params:t.params,context:u},...M!==void 0?[M]:[]),C=(async()=>{try{return{type:"data",result:await(o?o(D=>S(D)):S())}}catch(M){return{type:"error",result:M}}})();return Promise.race([C,T])};try{let y=t.route[n];if(r||a)if(y){let v,[T]=await Promise.all([p(y).catch(S=>{v=S}),r,a]);if(v!==void 0)throw v;h=T}else if(await r,y=t.route[n],y)[h]=await Promise.all([p(y),a]);else if(n==="action"){let v=new URL(e.url),T=v.pathname+v.search;throw zr(405,{method:e.method,pathname:T,routeId:t.route.id})}else return{type:"data",result:void 0};else if(y)h=await p(y);else{let v=new URL(e.url),T=v.pathname+v.search;throw zr(404,{pathname:T})}}catch(y){return{type:"error",result:y}}finally{f&&e.signal.removeEventListener("abort",f)}return h}async function hB(n){var r,a,o,u,h,f;let{result:e,type:t}=n;if(LC(e)){let p;try{let y=e.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(y){return{type:"error",error:y}}return t==="error"?{type:"error",error:new wm(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?FR(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new wm(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:wh(e)?e.status:void 0,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:wh(e)?e.status:void 0}:FR(e)?{type:"data",data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function fB(n,e,t,r,a){let o=n.headers.get("Location");if(et(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!v0.test(o)){let u=r.slice(0,r.findIndex(h=>h.route.id===t)+1);o=B_(new URL(e.url),u,a,o),n.headers.set("Location",o)}return n}function VR(n,e,t){if(v0.test(n)){let r=n,a=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Kr(a.pathname,t)!=null;if(a.origin===e.origin&&o)return a.pathname+a.search+a.hash}return n}function Hl(n,e,t,r){let a=n.createURL(VC(e)).toString(),o={signal:t};if(r&&si(r.formMethod)){let{formMethod:u,formEncType:h}=r;o.method=u.toUpperCase(),h==="application/json"?(o.headers=new Headers({"Content-Type":h}),o.body=JSON.stringify(r.json)):h==="text/plain"?o.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?o.body=F_(r.formData):o.body=r.formData}return new Request(a,o)}function F_(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function LR(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function dB(n,e,t,r=!1,a=!1){let o={},u=null,h,f=!1,p={},y=t&&_r(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let T=v.route.id,S=e[T];if(et(!To(S),"Cannot handle redirect results in processLoaderData"),_r(S)){let C=S.error;if(y!==void 0&&(C=y,y=void 0),u=u||{},a)u[T]=C;else{let M=yo(n,T);u[M.route.id]==null&&(u[M.route.id]=C)}r||(o[T]=NC),f||(f=!0,h=wh(S.error)?S.error.status:500),S.headers&&(p[T]=S.headers)}else o[T]=S.data,S.statusCode&&S.statusCode!==200&&!f&&(h=S.statusCode),S.headers&&(p[T]=S.headers)}),y!==void 0&&t&&(u={[t[0]]:y},o[t[0]]=void 0),{loaderData:o,errors:u,statusCode:h||200,loaderHeaders:p}}function UR(n,e,t,r,a,o){let{loaderData:u,errors:h}=dB(e,t,r);return a.forEach(f=>{let{key:p,match:y,controller:v}=f,T=o[p];if(et(T,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(_r(T)){let S=yo(n.matches,y==null?void 0:y.route.id);h&&h[S.route.id]||(h={...h,[S.route.id]:T.error}),n.fetchers.delete(p)}else if(To(T))et(!1,"Unhandled fetcher revalidation redirect");else{let S=ra(T.data);n.fetchers.set(p,S)}}),{loaderData:u,errors:h}}function jR(n,e,t,r){let a=Object.entries(e).filter(([,o])=>o!==NC).reduce((o,[u,h])=>(o[u]=h,o),{});for(let o of t){let u=o.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&o.route.loader&&(a[u]=n[u]),r&&r.hasOwnProperty(u))break}return a}function BR(n){return n?_r(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function yo(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function zR(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function zr(n,{pathname:e,routeId:t,method:r,type:a,message:o}={}){let u="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(u="Bad Request",r&&e&&t?h=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(h="Unable to encode submission body")):n===403?(u="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",h=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",r&&e&&t?h=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(h=`Invalid request method "${r.toUpperCase()}"`)),new wm(n||500,u,new Error(h),!0)}function Ed(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,a]=e[t];if(To(a))return{key:r,result:a}}}function VC(n){let e=typeof n=="string"?xa(n):n;return ba({...e,hash:""})}function mB(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function pB(n){return LC(n.result)&&W9.has(n.result.status)}function _r(n){return n.type==="error"}function To(n){return(n&&n.type)==="redirect"}function FR(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function LC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function gB(n){return X9.has(n.toUpperCase())}function si(n){return Y9.has(n.toUpperCase())}function E0(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Qc(n,e){let t=typeof e=="string"?xa(e).search:e.search;if(n[n.length-1].route.index&&E0(t||""))return n[n.length-1];let r=xC(n);return r[r.length-1]}function qR(n){let{formMethod:e,formAction:t,formEncType:r,text:a,formData:o,json:u}=n;if(!(!e||!t||!r)){if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:e,formAction:t,formEncType:r,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function Gy(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function yB(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Lc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function _B(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ra(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function vB(n,e){try{let t=n.sessionStorage.getItem(DC);if(t){let r=JSON.parse(t);for(let[a,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(a,new Set(o||[]))}}catch{}}function EB(n,e){if(e.size>0){let t={};for(let[r,a]of e)t[r]=[...a];try{n.sessionStorage.setItem(DC,JSON.stringify(t))}catch(r){Jt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function TB(){let n,e,t=new Promise((r,a)=>{n=async o=>{r(o);try{await t}catch{}},e=async o=>{a(o);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Yo=R.createContext(null);Yo.displayName="DataRouter";var Hh=R.createContext(null);Hh.displayName="DataRouterState";var T0=R.createContext({isTransitioning:!1});T0.displayName="ViewTransition";var UC=R.createContext(new Map);UC.displayName="Fetchers";var bB=R.createContext(null);bB.displayName="Await";var ci=R.createContext(null);ci.displayName="Navigation";var hp=R.createContext(null);hp.displayName="Location";var Qr=R.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var b0=R.createContext(null);b0.displayName="RouteError";function wB(n,{relative:e}={}){et(Au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=R.useContext(ci),{hash:a,pathname:o,search:u}=Gh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Li([t,o])),r.createHref({pathname:h,search:u,hash:a})}function Au(){return R.useContext(hp)!=null}function ji(){return et(Au(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(hp).location}var jC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BC(n){R.useContext(ci).static||R.useLayoutEffect(n)}function Iu(){let{isDataRoute:n}=R.useContext(Qr);return n?UB():SB()}function SB(){et(Au(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Yo),{basename:e,navigator:t}=R.useContext(ci),{matches:r}=R.useContext(Qr),{pathname:a}=ji(),o=JSON.stringify(up(r)),u=R.useRef(!1);return BC(()=>{u.current=!0}),R.useCallback((f,p={})=>{if(Jt(u.current,jC),!u.current)return;if(typeof f=="number"){t.go(f);return}let y=cp(f,JSON.parse(o),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Li([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,a,n])}var RB=R.createContext(null);function AB(n){let e=R.useContext(Qr).outlet;return e&&R.createElement(RB.Provider,{value:n},e)}function zC(){let{matches:n}=R.useContext(Qr),e=n[n.length-1];return e?e.params:{}}function Gh(n,{relative:e}={}){let{matches:t}=R.useContext(Qr),{pathname:r}=ji(),a=JSON.stringify(up(t));return R.useMemo(()=>cp(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function IB(n,e,t,r){et(Au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=R.useContext(ci),{matches:u}=R.useContext(Qr),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let B=v&&v.path||"";FC(p,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let T=ji(),S;S=T;let C=S.pathname||"/",M=C;if(y!=="/"){let B=y.replace(/^\//,"").split("/");M="/"+C.replace(/^\//,"").split("/").slice(B.length).join("/")}let D=!o&&t&&t.matches&&t.matches.length>0?t.matches:ca(n,{pathname:M});return Jt(v||D!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Jt(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),OB(D&&D.map(B=>Object.assign({},B,{params:Object.assign({},f,B.params),pathname:Li([y,a.encodeLocation?a.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:Li([y,a.encodeLocation?a.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),u,t,r)}function xB(){let n=LB(),e=wh(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:a},t):null,u)}var CB=R.createElement(xB,null),DB=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?R.createElement(Qr.Provider,{value:this.props.routeContext},R.createElement(b0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NB({routeContext:n,match:e,children:t}){let r=R.useContext(Yo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Qr.Provider,{value:n},t)}function OB(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t==null?void 0:t.errors;if(o!=null){let f=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);et(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:y,errors:v}=t,T=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||T){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,p,y)=>{let v,T=!1,S=null,C=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,S=p.route.errorElement||CB,u&&(h<0&&y===0?(FC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):h===y&&(T=!0,C=p.route.hydrateFallbackElement||null)));let M=e.concat(a.slice(0,y+1)),D=()=>{let F;return v?F=S:T?F=C:p.route.Component?F=R.createElement(p.route.Component,null):p.route.element?F=p.route.element:F=f,R.createElement(NB,{match:p,routeContext:{outlet:f,matches:M,isDataRoute:t!=null},children:F})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?R.createElement(DB,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:D(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):D()},null)}function w0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PB(n){let e=R.useContext(Yo);return et(e,w0(n)),e}function MB(n){let e=R.useContext(Hh);return et(e,w0(n)),e}function kB(n){let e=R.useContext(Qr);return et(e,w0(n)),e}function S0(n){let e=kB(n),t=e.matches[e.matches.length-1];return et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function VB(){return S0("useRouteId")}function LB(){var r;let n=R.useContext(b0),e=MB("useRouteError"),t=S0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function UB(){let{router:n}=PB("useNavigate"),e=S0("useNavigate"),t=R.useRef(!1);return BC(()=>{t.current=!0}),R.useCallback(async(a,o={})=>{Jt(t.current,jC),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var HR={};function FC(n,e,t){!e&&!HR[n]&&(HR[n]=!0,Jt(!1,t))}var GR={};function $R(n,e){!n&&!GR[e]&&(GR[e]=!0,console.warn(e))}function jB(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Jt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:R.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Jt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:R.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Jt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:R.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var BB=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function zB({router:n,flushSync:e}){let[t,r]=R.useState(n.state),[a,o]=R.useState(),[u,h]=R.useState({isTransitioning:!1}),[f,p]=R.useState(),[y,v]=R.useState(),[T,S]=R.useState(),C=R.useRef(new Map),M=R.useCallback((k,{deletedFetchers:K,flushSync:P,viewTransitionOpts:ie})=>{k.fetchers.forEach((I,N)=>{I.data!==void 0&&C.current.set(N,I.data)}),K.forEach(I=>C.current.delete(I)),$R(P===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if($R(ie==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ie||!O){e&&P?e(()=>r(k)):R.startTransition(()=>r(k));return}if(e&&P){e(()=>{y&&(f&&f.resolve(),y.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:ie.currentLocation,nextLocation:ie.nextLocation})});let I=n.window.document.startViewTransition(()=>{e(()=>r(k))});I.finished.finally(()=>{e(()=>{p(void 0),v(void 0),o(void 0),h({isTransitioning:!1})})}),e(()=>v(I));return}y?(f&&f.resolve(),y.skipTransition(),S({state:k,currentLocation:ie.currentLocation,nextLocation:ie.nextLocation})):(o(k),h({isTransitioning:!0,flushSync:!1,currentLocation:ie.currentLocation,nextLocation:ie.nextLocation}))},[n.window,e,y,f]);R.useLayoutEffect(()=>n.subscribe(M),[n,M]),R.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new BB)},[u]),R.useEffect(()=>{if(f&&a&&n.window){let k=a,K=f.promise,P=n.window.document.startViewTransition(async()=>{R.startTransition(()=>r(k)),await K});P.finished.finally(()=>{p(void 0),v(void 0),o(void 0),h({isTransitioning:!1})}),v(P)}},[a,f,n.window]),R.useEffect(()=>{f&&a&&t.location.key===a.location.key&&f.resolve()},[f,y,t.location,a]),R.useEffect(()=>{!u.isTransitioning&&T&&(o(T.state),h({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),S(void 0))},[u.isTransitioning,T]);let D=R.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,K,P)=>n.navigate(k,{state:K,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(k,K,P)=>n.navigate(k,{replace:!0,state:K,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),F=n.basename||"/",B=R.useMemo(()=>({router:n,navigator:D,static:!1,basename:F}),[n,D,F]);return R.createElement(R.Fragment,null,R.createElement(Yo.Provider,{value:B},R.createElement(Hh.Provider,{value:t},R.createElement(UC.Provider,{value:C.current},R.createElement(T0.Provider,{value:u},R.createElement(GB,{basename:F,location:t.location,navigationType:t.historyAction,navigator:D},R.createElement(FB,{routes:n.routes,future:n.future,state:t})))))),null)}var FB=R.memo(qB);function qB({routes:n,future:e,state:t}){return IB(n,void 0,t,e)}function HB({to:n,replace:e,state:t,relative:r}){et(Au(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=R.useContext(ci);Jt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(Qr),{pathname:u}=ji(),h=Iu(),f=cp(n,up(o),u,r==="path"),p=JSON.stringify(f);return R.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:r})},[h,p,r,e,t]),null}function qC(n){return AB(n.context)}function GB({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:o=!1}){et(!Au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=R.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof t=="string"&&(t=xa(t));let{pathname:f="/",search:p="",hash:y="",state:v=null,key:T="default"}=t,S=R.useMemo(()=>{let C=Kr(f,u);return C==null?null:{location:{pathname:C,search:p,hash:y,state:v,key:T},navigationType:r}},[u,f,p,y,v,T,r]);return Jt(S!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:R.createElement(ci.Provider,{value:h},R.createElement(hp.Provider,{children:e,value:S}))}var Ud="get",jd="application/x-www-form-urlencoded";function fp(n){return n!=null&&typeof n.tagName=="string"}function $B(n){return fp(n)&&n.tagName.toLowerCase()==="button"}function KB(n){return fp(n)&&n.tagName.toLowerCase()==="form"}function YB(n){return fp(n)&&n.tagName.toLowerCase()==="input"}function QB(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function XB(n,e){return n.button===0&&(!e||e==="_self")&&!QB(n)}var Td=null;function WB(){if(Td===null)try{new FormData(document.createElement("form"),0),Td=!1}catch{Td=!0}return Td}var ZB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $y(n){return n!=null&&!ZB.has(n)?(Jt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jd}"`),null):n}function JB(n,e){let t,r,a,o,u;if(KB(n)){let h=n.getAttribute("action");r=h?Kr(h,e):null,t=n.getAttribute("method")||Ud,a=$y(n.getAttribute("enctype"))||jd,o=new FormData(n)}else if($B(n)||YB(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?Kr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Ud,a=$y(n.getAttribute("formenctype"))||$y(h.getAttribute("enctype"))||jd,o=new FormData(h,n),!WB()){let{name:p,type:y,value:v}=n;if(y==="image"){let T=p?`${p}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else p&&o.append(p,v)}}else{if(fp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ud,r=null,a=jd,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:o,body:u}}function R0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function e5(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function t5(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function n5(n,e,t){let r=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await e5(o,t);return u.links?u.links():[]}return[]}));return a5(r.flat(1).filter(t5).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function KR(n,e,t,r,a,o){let u=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var y;return t[p].pathname!==f.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,p)=>u(f,p)||h(f,p)):o==="data"?e.filter((f,p)=>{var v;let y=r.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function r5(n,e,{includeHydrateFallback:t}={}){return i5(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function i5(n){return[...new Set(n)]}function s5(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function a5(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let o=JSON.stringify(s5(a));return t.has(o)||(t.add(o),r.push({key:o,link:a})),r},[])}function o5(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Kr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function HC(){let n=R.useContext(Yo);return R0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function l5(){let n=R.useContext(Hh);return R0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var A0=R.createContext(void 0);A0.displayName="FrameworkContext";function GC(){let n=R.useContext(A0);return R0(n,"You must render this element inside a <HydratedRouter> element"),n}function u5(n,e){let t=R.useContext(A0),[r,a]=R.useState(!1),[o,u]=R.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,T=R.useRef(null);R.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=F=>{F.forEach(B=>{u(B.isIntersecting)})},D=new IntersectionObserver(M,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[n]),R.useEffect(()=>{if(r){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[r]);let S=()=>{a(!0)},C=()=>{a(!1),u(!1)};return t?n!=="intent"?[o,T,{}]:[o,T,{onFocus:Uc(h,S),onBlur:Uc(f,C),onMouseEnter:Uc(p,S),onMouseLeave:Uc(y,C),onTouchStart:Uc(v,S)}]:[!1,T,{}]}function Uc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function c5({page:n,...e}){let{router:t}=HC(),r=R.useMemo(()=>ca(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?R.createElement(f5,{page:n,matches:r,...e}):null}function h5(n){let{manifest:e,routeModules:t}=GC(),[r,a]=R.useState([]);return R.useEffect(()=>{let o=!1;return n5(n,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[n,e,t]),r}function f5({page:n,matches:e,...t}){let r=ji(),{manifest:a,routeModules:o}=GC(),{basename:u}=HC(),{loaderData:h,matches:f}=l5(),p=R.useMemo(()=>KR(n,e,f,a,r,"data"),[n,e,f,a,r]),y=R.useMemo(()=>KR(n,e,f,a,r,"assets"),[n,e,f,a,r]),v=R.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,M=!1;if(e.forEach(F=>{var k;let B=a.routes[F.route.id];!B||!B.hasLoader||(!p.some(K=>K.route.id===F.route.id)&&F.route.id in h&&((k=o[F.route.id])!=null&&k.shouldRevalidate)||B.hasClientLoader?M=!0:C.add(F.route.id))}),C.size===0)return[];let D=o5(n,u);return M&&C.size>0&&D.searchParams.set("_routes",e.filter(F=>C.has(F.route.id)).map(F=>F.route.id).join(",")),[D.pathname+D.search]},[u,h,r,a,p,e,n,o]),T=R.useMemo(()=>r5(y,a),[y,a]),S=h5(y);return R.createElement(R.Fragment,null,v.map(C=>R.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>R.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),S.map(({key:C,link:M})=>R.createElement("link",{key:C,...M})))}function d5(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$C&&(window.__reactRouterVersion="7.5.0")}catch{}function m5(n,e){return tB({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:b9({window:e==null?void 0:e.window}),hydrationData:p5(),routes:n,mapRouteProperties:jB,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function p5(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:g5(n.errors)}),n}function g5(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")t[r]=new wm(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let u=new o(a.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let o=new Error(a.message);o.stack="",t[r]=o}}else t[r]=a;return t}var KC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_u=R.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:h,target:f,to:p,preventScrollReset:y,viewTransition:v,...T},S){let{basename:C}=R.useContext(ci),M=typeof p=="string"&&KC.test(p),D,F=!1;if(typeof p=="string"&&M&&(D=p,$C))try{let N=new URL(window.location.href),U=p.startsWith("//")?new URL(N.protocol+p):new URL(p),z=Kr(U.pathname,C);U.origin===N.origin&&z!=null?p=z+U.search+U.hash:F=!0}catch{Jt(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=wB(p,{relative:a}),[k,K,P]=u5(r,T),ie=v5(p,{replace:u,state:h,target:f,preventScrollReset:y,relative:a,viewTransition:v});function O(N){e&&e(N),N.defaultPrevented||ie(N)}let I=R.createElement("a",{...T,...P,href:D||B,onClick:F||o?e:O,ref:d5(S,K),target:f,"data-discover":!M&&t==="render"?"true":void 0});return k&&!M?R.createElement(R.Fragment,null,I,R.createElement(c5,{page:B})):I});_u.displayName="Link";var Xc=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:h,children:f,...p},y){let v=Gh(u,{relative:p.relative}),T=ji(),S=R.useContext(Hh),{navigator:C,basename:M}=R.useContext(ci),D=S!=null&&S5(v)&&h===!0,F=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,B=T.pathname,k=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(B=B.toLowerCase(),k=k?k.toLowerCase():null,F=F.toLowerCase()),k&&M&&(k=Kr(k,M)||k);const K=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let P=B===F||!a&&B.startsWith(F)&&B.charAt(K)==="/",ie=k!=null&&(k===F||!a&&k.startsWith(F)&&k.charAt(F.length)==="/"),O={isActive:P,isPending:ie,isTransitioning:D},I=P?e:void 0,N;typeof r=="function"?N=r(O):N=[r,P?"active":null,ie?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(O):o;return R.createElement(_u,{...p,"aria-current":I,className:N,ref:y,style:U,to:u,viewTransition:h},typeof f=="function"?f(O):f)});Xc.displayName="NavLink";var y5=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:o,method:u=Ud,action:h,onSubmit:f,relative:p,preventScrollReset:y,viewTransition:v,...T},S)=>{let C=b5(),M=w5(h,{relative:p}),D=u.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&KC.test(h),B=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let K=k.nativeEvent.submitter,P=(K==null?void 0:K.getAttribute("formmethod"))||u;C(K||k.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:a,state:o,relative:p,preventScrollReset:y,viewTransition:v})};return R.createElement("form",{ref:S,method:D,action:M,onSubmit:r?f:B,...T,"data-discover":!F&&n==="render"?"true":void 0})});y5.displayName="Form";function _5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YC(n){let e=R.useContext(Yo);return et(e,_5(n)),e}function v5(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=Iu(),f=ji(),p=Gh(n,{relative:o});return R.useCallback(y=>{if(XB(y,e)){y.preventDefault();let v=t!==void 0?t:ba(f)===ba(p);h(n,{replace:v,state:r,preventScrollReset:a,relative:o,viewTransition:u})}},[f,h,p,t,r,e,n,a,o,u])}var E5=0,T5=()=>`__${String(++E5)}__`;function b5(){let{router:n}=YC("useSubmit"),{basename:e}=R.useContext(ci),t=VB();return R.useCallback(async(r,a={})=>{let{action:o,method:u,encType:h,formData:f,body:p}=JB(r,e);if(a.navigate===!1){let y=a.fetcherKey||T5();await n.fetch(y,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function w5(n,{relative:e}={}){let{basename:t}=R.useContext(ci),r=R.useContext(Qr);et(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Gh(n||".",{relative:e})},u=ji();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(y=>y==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Li([t,o.pathname])),ba(o)}function S5(n,e={}){let t=R.useContext(T0);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YC("useViewTransitionState"),a=Gh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Kr(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Kr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return bm(a.pathname,u)!=null||bm(a.pathname,o)!=null}new TextEncoder;/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R5(n){return R.createElement(zB,{flushSync:Qx.flushSync,...n})}const QC=R.createContext(),I0=()=>R.useContext(QC),A5=({children:n})=>{const[e,t]=R.useState(()=>{const u=localStorage.getItem("favourites");return u?JSON.parse(u):[]}),r=u=>{t(h=>h.find(p=>p.id===u.id)?h:[...h,u])},a=u=>{t(h=>h.filter(f=>f.id!==u))},o=()=>{t([]),localStorage.removeItem("favourites")};return R.useEffect(()=>{localStorage.setItem("favourites",JSON.stringify(e))},[e]),w.jsx(QC.Provider,{value:{favourites:e,addToFavourites:r,clearFavourites:o,removeFromFavourites:a},children:n})},XC=({onClose:n})=>{const{favourites:e,removeFromFavourites:t}=I0(),{addToBag:r}=Fo(),a=u=>{r(u),t(u.id),Fe.success("Moved to Bag",{position:"top-center"})},o=u=>{t(u),Fe.info("Removed from Wishlist!",{position:"top-center"})};return w.jsx("div",{className:"favourites-backdrop",children:w.jsxs("div",{className:"favourites-content",children:[w.jsx("h2",{children:"Your WishList"}),w.jsx("button",{className:"close-btn",onClick:n,children:"Close"}),e.length===0?w.jsx("div",{className:"empty-favourites",children:"No Favourite Product yet!"}):w.jsx("div",{className:"favourites-grid",children:e.map(u=>w.jsxs("div",{className:"favourites-card",children:[w.jsx("img",{src:u.image,alt:u.title}),w.jsx("h4",{children:u.title}),w.jsxs("p",{children:["$",u.price]}),w.jsxs("div",{className:"card-buttons",children:[w.jsx("button",{className:"remove-btn",onClick:()=>o(u.id),children:"Remove"}),w.jsx("button",{className:"move-btn",onClick:()=>a(u),children:"Move To Bag"})]})]},u.id))})]})})},I5=({show:n,onClose:e,updateName:t})=>{const[r,a]=R.useState({displayName:"",phone:"",photoURL:""}),[o,u]=R.useState(null),[h,f]=R.useState(!1),[p,y]=R.useState(!1);R.useEffect(()=>{if(!n)return;(async()=>{if(wn.currentUser){const D=await yu($r($t,"users",wn.currentUser.uid));D.exists()&&a({displayName:D.data().displayName||"",phone:D.data().phone||"",photoURL:wn.currentUser.photoURL||""})}})()},[n]);const v=M=>{a(D=>({...D,[M.target.name]:M.target.value}))},T=M=>{M.target.files[0]&&u(M.target.files[0])},S=async M=>{M.preventDefault(),f(!0);try{let D=r.photoURL;if(o){const k=Q3(tj,`profilePics/${wn.currentUser.uid}`);await K3(k,o),D=await Y3(k)}const F=$r($t,"users",wn.currentUser.uid);(await yu(F)).exists()?await Su(F,{displayName:r.displayName,phone:r.phone,photoURL:D}):await r0(F,{displayName:r.displayName,phone:r.phone,photoURL:D,createdAt:xx()}),await SP(wn.currentUser,{displayName:r.displayName,photoURL:D}),t(r.displayName),Fe.success("Profile updated!"),f(!1),C()}catch(D){console.error("update error",D),Fe.error("Something went wrong updating your profile.")}finally{f(!1)}},C=()=>{y(!0),setTimeout(()=>{y(!1),e()},300)};return n?w.jsx("div",{className:"modal-backdrop",children:w.jsxs("div",{className:`update-profile-modal ${p?"fade-out":"fade-in"}`,children:[w.jsx("button",{className:"close-btn",onClick:C,children:""}),w.jsx("h2",{children:"Update Profile"}),w.jsxs("form",{onSubmit:S,children:[w.jsxs("label",{children:["Name:",w.jsx("input",{name:"displayName",value:r.displayName,onChange:v})]}),w.jsxs("label",{children:["Phone:",w.jsx("input",{name:"phone",value:r.phone,onChange:v})]}),w.jsxs("label",{children:["Profile Picture:",w.jsx("input",{type:"file",accept:"image/*",onChange:T})]}),r.photoURL&&w.jsx("img",{src:r.photoURL,alt:"Profile Preview",className:"profile-preview"}),w.jsx("button",{type:"submit",disabled:h,children:h?"Updating...":"Update"})]})]})}):null};function x5({name:n,setName:e,search:t,setSearch:r}){const[a,o]=R.useState(!1),[u,h]=R.useState(null),[f,p]=R.useState(!1),[y,v]=R.useState(!1),[T,S]=R.useState(!1),[C,M]=R.useState(!1),D=Iu(),{bagItems:F}=Fo(),{clearBag:B}=Fo(),{clearFavourites:k}=I0(),K=(F||[]).reduce((I,N)=>I+N.quantity,0),P=I=>{e(I)};R.useEffect(()=>{const I=xh(wn,N=>{h(N),e(N?N.displayName||N.email:"")});return()=>I()},[e]);const ie=async()=>{await IP(wn),h(null),e(""),p(!1),B(),k(),D("/")},O=()=>{S(!1),D("/payment")};return w.jsxs("div",{className:"header",children:[w.jsx("div",{className:"header-logo",children:w.jsx("h1",{children:"Shoppers stop"})}),w.jsxs("div",{className:"header-search",children:[w.jsx(UN,{}),w.jsx("input",{className:"search",type:"text",placeholder:"What are you looking for?",value:t,onChange:I=>r(I.target.value)})]}),w.jsxs("div",{className:"header-actions",children:[w.jsx("h3",{onClick:()=>M(!0),children:w.jsx(WR,{})}),w.jsxs("h3",{onClick:()=>S(!0),children:[w.jsx(LN,{}),K>0&&w.jsx("span",{className:"cart-badge",children:K})]}),u?w.jsx(w.Fragment,{children:w.jsxs("div",{className:"user-dropdown",children:[w.jsx("img",{className:"profile-picture",src:u.photoURL||"https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png",alt:"Profile"}),w.jsxs("span",{className:"userName",onClick:()=>{p(!f),console.log("Dropdown toggled:",!f)},children:["Welcome, ",n.split("@")[0]]}),f&&w.jsxs("div",{className:"dropdown-menu",children:[w.jsx("span",{onClick:()=>v(!0),children:"Update Profile"}),w.jsx("button",{onClick:ie,className:"logout-btn",children:"LogOut"})]}),w.jsx(I5,{show:y,onClose:()=>v(!1),user:u,updateName:P})]})}):w.jsxs("button",{onClick:()=>o(!0),children:[w.jsx(zN,{}),w.jsx("span",{children:"Login"})]})]}),w.jsx(V6,{shouldShow:a,handleShow:o,setName:e}),T&&w.jsx(SC,{bagItems:F,onClose:()=>S(!1),onCheckout:O}),C&&w.jsx(XC,{onClose:()=>M(!1)})]})}function C5(){return w.jsx("div",{children:w.jsx("h2",{children:"Footer"})})}const D5=({search:n})=>{const[e,t]=R.useState([]),[r,a]=R.useState(!0),[o,u]=R.useState("all"),[h,f]=R.useState(""),{favourites:p,addToFavourites:y,removeFromFavourites:v}=I0(),{addToBag:T}=Fo(),S=k=>{p.some(P=>P.id===k.id)?v(k.id):y(k)},C=k=>{T(k)};R.useEffect(()=>{(async()=>{a(!0);try{const P=await(await fetch("https://fakestoreapi.in/api/products")).json();console.log(P);const ie=(P.products||[]).map(N=>({...N,source:"api"})),I=(await Ro(li($t,"products"))).docs.map(N=>({id:N.id,...N.data()}));t([...ie,...I])}catch(K){console.error("Error fetching data:",K)}finally{a(!1)}})()},[]);const M=e.filter(k=>{const K=o==="all"||k.category===o,P=n===""||k.title.toLowerCase().includes(n.toLowerCase());return K&&P}),D=["all",...new Set(e.map(k=>k.category))];if(console.log("Search value in Products:",n),r)return w.jsx("p",{children:"Loading Products..."});const F=k=>{f(k.target.value)},B=()=>{const k=[...M];return h==="priceLowHigh"?k.sort((K,P)=>K.price-P.price):h==="priceHighLow"?k.sort((K,P)=>P.price-K.price):h==="ratingHighLow"?k.sort((K,P)=>(P.rating||0)-(K.rating||0)):h==="titleAZ"?k.sort((K,P)=>K.title.localeCompare(P.title)):h==="titleZA"&&k.sort((K,P)=>P.title.localeCompare(K.title)),k};return w.jsxs("div",{className:"product-view",children:[w.jsx("h2",{children:"Products"}),w.jsxs("div",{className:"filter-bar",children:[w.jsx("label",{children:"Filter by Category: "}),w.jsx("select",{onChange:k=>u(k.target.value),value:o,children:D.map(k=>w.jsx("option",{value:k,children:k},k))})]}),w.jsxs("div",{className:"sort-bar",children:[w.jsx("label",{children:"Sort By: "}),w.jsxs("select",{onChange:F,value:h,children:[w.jsx("option",{value:"",children:"Default"}),w.jsx("option",{value:"priceLowHigh",children:"Price: Low to High"}),w.jsx("option",{value:"priceHighLow",children:"Price: High to Low"}),w.jsx("option",{value:"ratingHighLow",children:"Rating: High to Low"}),w.jsx("option",{value:"titleAZ",children:"Title: A to Z"}),w.jsx("option",{value:"titleZA",children:"Title: Z to A"})]})]}),w.jsxs("div",{className:"product-grid",children:[B().map(k=>{const K=k.source==="firestore"?"fs-":"api-";return w.jsxs("div",{className:"product-card",children:[w.jsxs(_u,{to:`/product/${K}${k.id}`,className:"product-link",children:[w.jsx("img",{src:k.image,alt:k.title}),w.jsx("h4",{children:k.title}),w.jsxs("p",{children:["$",k.price]})]}),w.jsx("button",{className:"add-btn",onClick:()=>C(k),children:"Add to Cart"}),w.jsx("button",{className:"fav-btn",onClick:()=>S(k),children:p.some(P=>P.id===k.id)?w.jsx(BN,{}):w.jsx(WR,{})})]},K+k.id)}),";"]})]})};function N5(){const[n,e]=R.useState(""),[t,r]=R.useState(""),[a,o]=R.useState({name:"",photoURL:""});return w.jsxs("div",{children:[w.jsx(x5,{name:n,setName:e,userData:a,setUserData:o,search:t,setSearch:r}),w.jsxs("main",{children:[w.jsx(qC,{}),w.jsx(D5,{search:t})]}),w.jsx(C5,{})]})}const O5=()=>{const n=Iu();return w.jsxs("div",{className:"error-page",children:[w.jsx("h1",{children:"404 - Page Not Found"}),w.jsx("p",{children:"Sorry, we couldn't find what you were looking for."}),w.jsx("button",{onClick:()=>n("/"),children:"Go Home"})]})},P5=()=>{const n=Iu(),{bagItems:e,clearBag:t}=Fo(),[r,a]=R.useState(!1),[o,u]=R.useState(""),[h,f]=R.useState(""),[p,y]=R.useState(""),[v,T]=R.useState(""),S=e.reduce((D,F)=>D+F.price*F.quantity,0);R.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const C=()=>{n(-1)},M=async D=>{if(D.preventDefault(),h.length!==16||isNaN(Number(h))){Fe.error("Card number must be 16 digits.");return}if(!/^\d{2}\/\d{2}$/.test(p)){Fe.error("Expiry must be in MM/YY format.");return}if(v.length!==3||isNaN(Number(v))){Fe.error("CVV must be 3 digits.");return}a(!0);const F={userId:wn.currentUser?wn.currentUser.uid:"guest",userName:o,items:e,total:e.reduce((B,k)=>B+k.price*k.quantity,0),status:"Pending",createdAt:xx(),shipping:{name:o}};try{const B=await i0(li($t,"orders"),F);Fe.success("Payment Successful! Your order is placed."),t(),n("/order-confirmation",{state:{orderId:B.id,total:`$${S.toFixed(2)}`,shipping:{name:o}}})}catch(B){console.error("Payment error:",B),Fe.error("Something went wrong. Please try again.")}finally{a(!1)}};return w.jsxs("div",{className:"payment-container",children:[w.jsx("h2",{children:"Checkout"}),w.jsxs("p",{className:"total-amount",children:["Total Amount: ",w.jsxs("strong",{children:["$",S.toFixed(2)]})]}),w.jsxs("form",{className:"payment-form",onSubmit:M,children:[w.jsx("label",{htmlFor:"name",children:"Name on the Card"}),w.jsx("input",{id:"name",type:"text",required:!0,placeholder:"John Doe",value:o,disabled:r,onChange:D=>u(D.target.value)}),w.jsx("label",{htmlFor:"card",children:"Card Number"}),w.jsx("input",{id:"card",type:"text",inputMode:"numeric",maxLength:"16",required:!0,value:h,disabled:r,onChange:D=>f(D.target.value),placeholder:"1234 5678 9012 3456"}),w.jsxs("div",{className:"payment-row",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"expiry",children:"Expiry"}),w.jsx("input",{id:"expiry",type:"text",placeholder:"MM/YY",required:!0,value:p,disabled:r,onChange:D=>y(D.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"cvv",children:"CVV"}),w.jsx("input",{id:"cvv",type:"password",maxLength:"3",placeholder:"123",required:!0,value:v,disabled:r,onChange:D=>T(D.target.value)})]})]}),w.jsx("button",{type:"submit",disabled:r,children:r?w.jsx("span",{className:"spinner"}):"Pay Now"}),w.jsx("button",{type:"button",className:"cancel-btn",onClick:C,disabled:r,children:"Cancel"})]})]})},M5=({children:n})=>{const[e,t]=R.useState(!0),[r,a]=R.useState(!1),o=Iu();return R.useEffect(()=>{const u=xh(wn,h=>{a(!!h),h||(Fe.error("Please Login to Continue"),o("/")),t(!1)});return()=>u()},[o]),e?w.jsx("p",{children:"Loading...."}):r?n:null},k5=({reviews:n,setReviews:e,productId:t})=>{const[r,a]=R.useState(null),[o,u]=R.useState(0),[h,f]=R.useState(""),[p,y]=R.useState(null),v=li($t,"reviews");R.useEffect(()=>{const M=xh(wn,D=>{a(D)});return()=>M()},[]);const T=async M=>{if(M.preventDefault(),!r){Fe.error("Please login to submit a review");return}if(!o||!h.trim())return;const D=n.find(B=>B.userId===r.uid&&B.productId===t),F={productId:t,userId:r.uid,name:r.displayName||r.email,rating:o,comment:h,date:new Date().toLocaleString()};try{if(p){const B=$r($t,"reviews",p);await Su(B,F),e(k=>k.map(K=>K.id===p?{id:p,...F}:K)),Fe.success("Review updated!"),y(null)}else{if(D){Fe.error("Youve already reviewed this product. You can edit it.");return}const B=await i0(v,F);e(k=>[{id:B.id,...F},...k]),Fe.success("review submitted")}u(0),f("")}catch(B){Fe.error("something went wrong"),console.log(B)}},S=M=>{y(M.id),u(M.rating),f(M.comment)},C=async M=>{try{await Ax($r($t,"reviews",M)),e(D=>D.filter(F=>F.id!==M)),Fe.success("review deleted")}catch{Fe.error("failed to delete review")}};return w.jsxs("div",{className:"review-section",children:[w.jsx("h3",{children:"Reviews"}),n.length===0&&w.jsx("p",{children:"No reviews yet"}),[...n].sort((M,D)=>new Date(D.date)-new Date(M.date)).map(M=>w.jsxs("div",{className:"review-card",children:[w.jsxs("div",{className:"review-header",children:[w.jsxs("p",{children:[w.jsx("strong",{children:M.name})," rated it ",M.rating]}),(r==null?void 0:r.uid)===M.userId&&w.jsxs("div",{className:"review-actions",children:[w.jsx("button",{onClick:()=>S(M),children:"Edit"}),w.jsx("button",{onClick:()=>C(M.id),children:"Delete"})]})]}),w.jsx("p",{children:M.comment}),w.jsx("span",{children:M.date})]},M.id)),r?w.jsx(w.Fragment,{children:p||!n.find(M=>M.userId===r.uid&&M.productId===t)?w.jsxs("form",{onSubmit:T,className:"review-form",children:[w.jsx("h4",{children:"Leave a Review"}),w.jsxs("label",{children:["Rating:",w.jsxs("select",{value:o,onChange:M=>u(Number(M.target.value)),children:[w.jsx("option",{value:"",children:"Select..."}),[1,2,3,4,5].map(M=>w.jsx("option",{value:M,children:""},M))]})]}),w.jsx("textarea",{placeholder:"Your Experience with product",value:h,onChange:M=>f(M.target.value)}),w.jsxs("button",{type:"submit",children:[p?"Update":"Submit"," Review"]})]}):w.jsx("p",{children:"Youve already submitted a review. You can edit or delete it below."})}):w.jsx("p",{children:"Please login first to give a review."})]})},V5=()=>{const{id:n}=zC(),[e,t]=R.useState(null),[r,a]=R.useState(!0),[o,u]=R.useState([]),[h,f]=R.useState(""),{addToBag:p}=Fo(),y=li($t,"reviews");return R.useEffect(()=>{(async()=>{try{const S=await(await fetch(`https://fakestoreapi.in/api/products/${n}`)).json();t(S.product),console.log(S),a(!1)}catch(T){console.log("products not available",T)}})()},[n]),R.useEffect(()=>{if(!e||!e.id)return;(async()=>{try{const T=NU(y,OU("productId","==",e.id)),C=(await Ro(T)).docs.map(M=>({id:M.id,...M.data()}));u(C)}catch(T){console.log("Error fetching reviews",T)}})(),console.log("fetchinf reviews for productId",e.id)},[e]),r||!e?w.jsx("p",{children:"Loading....."}):w.jsxs("div",{className:"product-details-container",children:[w.jsx("div",{className:"product-image",children:w.jsx("img",{src:e.image,alt:e.title})}),w.jsxs("div",{className:"product-info",children:[w.jsx("h2",{children:e.title}),w.jsxs("p",{className:"description",children:[w.jsx("strong",{children:"Description: "}),e.description]}),w.jsxs("p",{className:"category",children:[w.jsx("strong",{children:"Category: "}),e.category]}),w.jsxs("p",{className:"price",children:[w.jsx("strong",{children:"Price: $"}),e.price]}),w.jsx("button",{className:"add-to-cart-btn",onClick:()=>p(e),children:"Add to Bag"})]}),w.jsx(_u,{to:"/",children:"Back to products"}),w.jsx(k5,{productId:e.id,reviews:o,setReviews:u})]})};function L5(){const[n,e]=R.useState({totalOrders:0,totalUsers:0,totalProducts:0,totalRevenue:0});return R.useEffect(()=>{async function t(){const a=(await Ro(li($t,"orders"))).docs.map(y=>y.data()),o=a.length,u=a.reduce((y,v)=>y+(v.total||0),0),f=(await Ro(li($t,"users"))).size;let p=0;try{p=(await Ro(li($t,"products"))).size}catch{p=0}e({totalOrders:o,totalUsers:f,totalProducts:p,totalRevenue:u})}t()},[]),n}const U5=()=>{const{totalOrders:n,totalUsers:e,totalProducts:t,totalRevenue:r}=L5();return w.jsxs("div",{className:"dashboard-stats",children:[w.jsx("h2",{children:"Dashboard Overview"}),w.jsxs("div",{className:"stat-card orders",children:[w.jsx("h3",{children:n}),w.jsx("p",{children:"Total Orders"})]}),w.jsxs("div",{className:"stat-card users",children:[w.jsx("h3",{children:e}),w.jsx("p",{children:"Total Users"})]}),w.jsxs("div",{className:"stat-card products",children:[w.jsx("h3",{children:t}),w.jsx("p",{children:"Total Products"})]}),w.jsxs("div",{className:"stat-card revenue",children:[w.jsxs("h3",{children:["$",r.toFixed(2)]}),w.jsx("p",{children:"Total Revenue"})]})]})},j5=()=>w.jsxs("div",{children:[w.jsx("h1",{children:"Admin Dashboard"}),w.jsx(U5,{})]}),B5=()=>{const[n,e]=R.useState([]),[t,r]=R.useState({id:"",title:"",price:"",description:""}),[a,o]=R.useState(!1),u=li($t,"products");R.useEffect(()=>{(async()=>{const y=li($t,"products"),T=(await Ro(y)).docs.map(S=>({id:S.id,...S.data()}));e(T)})()},[]);const h=async p=>{if(p.preventDefault(),a){const y=doc($t,"products",t.id);await Su(y,t)}else await i0(u,t);r({id:"",title:"",price:"",description:""}),o(!1),Fe.success("Product Data Created")},f=p=>r({...t,[p.target.name]:p.target.value});return w.jsxs("div",{className:"admin-manage",children:[w.jsx("h2",{children:"Manage Products"}),w.jsxs("form",{onSubmit:h,className:"admin-form",children:[w.jsx("input",{name:"title",value:t.title,onChange:f,placeholder:"Title"}),w.jsx("input",{name:"price",value:t.price,onChange:f,placeholder:"Price"}),w.jsx("textarea",{name:"description",value:t.description,onChange:f,placeholder:"Desciption"}),w.jsxs("button",{type:"submit",children:[a?"Update":"Add"," Product "]})]}),w.jsx("ul",{className:"admin-list",children:n.map(p=>w.jsxs("li",{children:[w.jsx("strong",{children:p.title})," -",p.price,w.jsx("button",{onClick:()=>{o(!0),r(p)},children:"Edit"}),w.jsx("button",{onClick:()=>Ax(doc($t,"products",p.id)),children:"Delete"})]},p.id))})]})};function z5({children:n}){const[e,t]=R.useState(""),[r,a]=R.useState(null),o=ji();return R.useEffect(()=>{const u=xh(wn,async h=>{if(h){console.log("CURRENT USER UID:",h.uid),t(h);try{const f=await yu($r($t,"users",h.uid));if(f.exists()){const p=f.data().role;console.log("User Role:",p),a(f.data().role==="admin"),console.log("docSnap data",f.data())}else a(!1)}catch(f){console.error("Error fetching user role:",f),a(!1)}}else t(null),a(!1)});return()=>u()},[]),r===null?w.jsx("div",{children:"Checking permissions..."}):!e||!r?w.jsx(HB,{to:"/",replace:!0,state:{from:o}}):n}const F5=()=>{const[n,e]=R.useState(!1);return w.jsxs("aside",{className:`admin-sidebar ${n?"collapsed":""}`,children:[w.jsx("button",{className:"toggle-btn",onClick:()=>e(!n),children:n?"":""}),w.jsx("h2",{children:!n&&"Admin Panel"}),w.jsx("nav",{children:w.jsxs("ul",{children:[w.jsx("li",{children:w.jsx(Xc,{to:"/admin",children:"Admin Dashboard"})}),w.jsx("li",{children:w.jsx(Xc,{to:"/admin/products",children:"Manage Products"})}),w.jsx("li",{children:w.jsx(Xc,{to:"/admin/orders",children:"Manage Orders"})}),w.jsx("li",{children:w.jsx(Xc,{to:"/admin/users",children:"Manage Users"})})]})})]})},q5=()=>w.jsxs("div",{className:"admin-layout",children:[w.jsx(F5,{}),w.jsx("main",{className:"admin-main",children:w.jsx(qC,{})})]}),H5=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!0);R.useEffect(()=>{const o=kU(li($t,"orders"),u=>{e(u.docs.map(h=>({id:h.id,...h.data()}))),r(!1)});return()=>o()},[]);const a=async(o,u)=>{await Su($r($t,"orders",o),{status:u}),e(h=>h.map(f=>f.id===o?{...f,status:u}:f))};return t?w.jsx("p",{children:"Loading Orders...."}):w.jsxs("div",{className:"manage-orders",children:[w.jsx("h2",{children:"Manage Orders"}),w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Orders #"}),w.jsx("th",{children:"Users"}),w.jsx("th",{children:"Items"}),w.jsx("th",{children:"Total"}),w.jsx("th",{children:"Status"}),w.jsx("th",{children:"Action"})]})}),w.jsx("tbody",{children:n.map(o=>{var u;return w.jsxs("tr",{children:[w.jsx("td",{children:o.id}),w.jsx("td",{children:o.userName||((u=o.shipping)==null?void 0:u.name)||"unknown"}),w.jsx("td",{children:o.items&&o.items.length?o.items.length:0}),w.jsxs("td",{children:["$",o.total!==void 0?o.total:"0.00"]}),w.jsx("td",{className:`status ${o.status?o.status.toLowerCase():"unknown"}`,children:o.status||"Unknown"}),w.jsx("td",{children:w.jsx("button",{onClick:()=>navigate(`/order/${o.id}`),children:"View"})}),w.jsx("td",{children:w.jsx("select",{value:o.status||"pending",onChange:h=>a(o.id,h.target.value),children:["Pending","Processing","Shipped","Delivered","Cancelled"].map(h=>w.jsx("option",{value:h,children:h},h))})})]},o.id)})})]})]})},G5=()=>{var u;const[n,e]=R.useState([]),[t,r]=R.useState(!0),a=(u=wn.currentUser)==null?void 0:u.uid;R.useEffect(()=>{(async()=>{const p=(await Ro(li($t,"users"))).docs.map(y=>({id:y.id,...y.data()}));e(p),r(!1)})()},[]);const o=async(h,f)=>{const p=f?"user":"admin";try{await Su($r($t,"users",h),{role:p}),e(y=>y.map(v=>v.id===h?{...v,role:p}:v))}catch(y){console.error("Error updating user role:",y)}};return t?w.jsx("p",{children:"Loading Users"}):w.jsxs("div",{className:"manage-users",children:[w.jsx("h2",{children:"Manage Users"}),w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"User ID"}),w.jsx("th",{children:"Email"}),w.jsx("th",{children:"Name"}),w.jsx("th",{children:"Role"}),w.jsx("th",{children:"Change Role"})]})}),w.jsx("tbody",{children:n.map(h=>w.jsxs("tr",{children:[w.jsx("td",{children:h.id}),w.jsx("td",{children:h.name||h.email}),w.jsx("td",{children:h.role}),w.jsxs("td",{children:[h.id!==a&&w.jsx("button",{onClick:()=>o(h.id,h.role==="admin"),children:h.role==="admin"?"Revoke Admin":"Make Admin"}),h.id===a&&w.jsx("span",{style:{color:"gray"},children:"You"})]})]},h.id))})]})]})},$5=()=>{const{state:n}=ji();if(!n)return w.jsx("div",{className:"order-confirmation",children:w.jsxs("div",{className:"confirmation-card animate-pop",children:[w.jsx("h2",{children:" Thank you for your order!"}),w.jsx("p",{children:"Your payment was successful."}),w.jsx("p",{children:"We are processing your order and will notify you when it ships."}),w.jsx(_u,{to:"/",className:"back-home-btn",children:"Continue Shopping"})]})});const{orderId:e,total:t,shipping:r}=n;return w.jsx("div",{className:"order-confirmation",children:w.jsxs("div",{className:"confirmation-card animate-pop",children:[w.jsx("h2",{children:" Thank you for your order!"}),w.jsx("p",{children:"Your payment was successful."}),w.jsxs("div",{className:"order-details",children:[w.jsx("h3",{children:"Order Summary"}),w.jsxs("p",{children:[w.jsx("strong",{children:"Order ID:"})," ",e]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Total:"})," ",t]}),w.jsx("h3",{children:"Shipping Information"}),w.jsxs("p",{children:[w.jsx("strong",{children:"Name:"})," ",r.name]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Address:"})," ",r.address]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Phone:"})," ",r.phone]})]}),w.jsx(_u,{to:"/",className:"back-home-btn",children:"Continue Shopping"})]})})},K5=()=>{var u,h,f;const{orderId:n}=zC(),[e,t]=R.useState(null),[r,a]=R.useState(!0);R.useEffect(()=>{(async()=>{const y=await yu($r,(db,n));y.exists()&&t({id:y.id,...y.data()}),a(!1)})()},[n]);const o=async()=>{await Su($r(db,"orders",n),{status:"Delivered"}),t(p=>({...p,status:"Delivered"}))};return r?w.jsx("p",{children:"Loading....."}):e?w.jsxs("div",{className:"order-details",children:[w.jsxs("h2",{children:["Order #",e.id]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Status:"}),w.jsx("span",{className:`status ${e.status.toLowerCase()}`,children:e.status})]}),w.jsxs("p",{children:[w.jsx("strong",{children:"User:"})," ",e.userName||"Unknown"]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Placed:"})," ",(u=e.createdAt)==null?void 0:u.toDate().toLocaleString()]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Total:"})," $",(h=e.total)==null?void 0:h.toFixed(2)]}),w.jsx("h3",{children:"Items:"}),w.jsx("ul",{children:(f=e.items)==null?void 0:f.map(p=>w.jsxs("li",{children:[p.title," - $",p.price," x ",p.quantity]},p.id))}),e.status!=="Delivered"&&w.jsx("button",{onClick:o,children:"Mark as Delivered"})]}):w.jsx("p",{children:"Order not found."})};console.log("Firebase initiated",Bh);const Y5=m5([{path:"/",element:w.jsx(N5,{}),errorElement:w.jsx(O5,{}),children:[{path:"bag",element:w.jsx(SC,{})},{path:"favourites",element:w.jsx(XC,{})},{path:"/product/:id",element:w.jsx(V5,{})},{path:"payment",element:w.jsx(M5,{children:w.jsx(P5,{})})},{path:"order-confirmation",element:w.jsx($5,{})}]},{path:"/admin",element:w.jsx(z5,{children:w.jsx(q5,{})}),children:[{path:"",element:w.jsx(j5,{})},{path:"products",element:w.jsx(B5,{})},{path:"orders",element:w.jsx(H5,{})},{path:"users",element:w.jsx(G5,{})},{path:"order/:orderId",element:w.jsx(K5,{})}]}]),Q5=()=>{const[n,e]=R.useState(localStorage.getItem("theme")||"light");R.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n)},[n]);const t=()=>{e(r=>r==="light"?"dark":"light")};return w.jsxs(w.Fragment,{children:[w.jsx("header",{children:w.jsxs("button",{onClick:t,children:["SwitchTo ",n==="light"?"dark":"light"," Mode"]})}),w.jsx(R5,{router:Y5}),w.jsx(y9,{position:"top-right",autoClose:2e3})]})};CN.createRoot(document.getElementById("root")).render(w.jsx(_9,{children:w.jsx(A5,{children:w.jsx(Q5,{})})}));
